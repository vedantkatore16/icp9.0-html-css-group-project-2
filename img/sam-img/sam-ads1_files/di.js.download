/**
 * Copyright 2024 Medallia Inc.
 * https://www.medallia.com/
 */
window._da_=window._da_||[];_da_['jsVersion']=1719980909;_da_["da_websiteId"] = 1135502;_da_["returnVisit"] = false;_da_["accountNumber"] = 14121;_da_["da_dnsRecord"] = "collection.decibelinsight.net";_da_["intPreScripts"] = function(){};_da_["intScripts"] = function(){try{// List of events which need to check at DXA level
var medalliaEventsArr = ["MDigital_Form_Close_No_Submit","MDigital_Form_Next_Page","MDigital_Form_Back_Page","MDigital_ThankYou_Close","MDigital_Form_Close_Submitted","MDigital_ThankYou_Displayed","MDigital_Submit_Feedback","MDigital_CaptureButton_Taken","MDigital_Invite_Declined"];
var medalliaEventConfig = "surveyEngagement";

// Update DF that DXA is ready
if (typeof KAMPYLE_ONSITE_SDK !== 'undefined' && typeof KAMPYLE_ONSITE_SDK.collectIntegrationData !== 'undefined' ) { 
KAMPYLE_ONSITE_SDK.collectIntegrationData("decibelInsight");
}
		
// Send Integration data to DXA
function sendIntegrationData(eventType, detail) {
try {
var m_nps;
var m_fields = [];
if (detail.Content) {
for (var i = 0; i < detail.Content.length; i++) {
var name = detail.Content[i].unique_name ? detail.Content[i].unique_name : "";
var value = detail.Content[i].value ? detail.Content[i].value : "";
var type = detail.Content[i].type ? detail.Content[i].type : "";
if (detail.Content[i].type === "nps") {
m_nps = detail.Content[i].value;
}
if (detail.Content[i].type === "radio" || detail.Content[i].type === "select") {
if (detail.Content[i].value == null) {
value = "";
} else {
value = detail.Content[i].value.label ? detail.Content[i].value.label : "";
}
}
if (detail.Content[i].type === "checkbox") {
for (var j = 0; j < detail.Content[i].value.length; j++) {
value = detail.Content[i].value[j].label ? detail.Content[i].value[j].label : "";
m_fields.push({
name: name,
value: value,
type: type
});
}
} else {
m_fields.push({
name: name,
value: value,
type: type
});
}
}
}
var m_ContextData = {
event: eventType && eventType != null && isNaN(eventType) ? eventType.toString() : "",
formId: isNaN(detail.Form_ID) ? 99999 : parseInt(detail.Form_ID) || 99999,
formType: detail.Form_Type && detail.Form_Type != null && isNaN(detail.Form_Type) ? detail.Form_Type.toString() : "",
feedbackUuid: detail.Feedback_UUID && detail.Feedback_UUID != null && isNaN(detail.Feedback_UUID) ? detail.Feedback_UUID.toString() : "",
nps: isNaN(m_nps) ? 99999 : parseInt(m_nps) || 99999,
formFields: m_fields
};
if (m_ContextData.feedbackUuid !== "" && m_ContextData.formId !== 99999) {               
decibelInsight("sendIntegrationData", "Medallia", m_ContextData);
}
} catch (exception) { 
}
}
		
// Call back function call by DF
window.dxa_digital_integration = function(eventType, detail) {    
try {
// Ignore if event is out of required events
if (medalliaEventsArr.indexOf(eventType) === -1) {
return;
}

if (medalliaEventConfig === "surveyEngagement" || (medalliaEventConfig === "surveySubmission" && eventType.toString() === "MDigital_Submit_Feedback")) {
// TODO: this window level check not needed if implemented in di.js directly
if (!window.dxa_digital_set_retention_done) {
decibelInsight("setRetention");
window.dxa_digital_set_retention_done = true;
}
}        // TODO: unwrap this function
decibelInsight("onPageCollected", function() {
decibelInsight("sendTrackedEvent", eventType);
sendIntegrationData(eventType, detail);
}, true);
} catch (exception) {
} 
}

for (var i = 0; i < medalliaEventsArr.length; i++) {
var m_Event = medalliaEventsArr[i];
window.addEventListener(m_Event, function (mdEvent) { 
if (window.dxa_digital_listener_disabled) {
return;
} else {
// pass information to call back function
dxa_digital_integration(mdEvent.type, mdEvent.detail);
}});
}}catch(e){window[window.DecibelInsight].warn('DecibelInsight: Configuration error in Integration Tag.', e.toString()); if (window[window.DecibelInsight].handleException) window[window.DecibelInsight].handleException('Integration', e, 'CONFIG');}};_da_["formTitleCallback"] = _da_["formTitleCallback"] || function(form){try{if(!this.isEmpty(form.getAttribute('data-di-form-id'))){return form.getAttribute('data-di-form-id');}else if(!this.isEmpty(form.getAttribute('name'))){return form.getAttribute('name');}else if(!this.isEmpty(form.getAttribute('id'))){return form.getAttribute('id');}
return'';}catch(e){ if (window[window.DecibelInsight].handleException) window[window.DecibelInsight].handleException('formTitleCallback', e, 'CONFIG'); window[window.DecibelInsight].warn('DecibelInsight: Configuration error in formTitleCallback. ', e.toString());return '';}};_da_["fieldTitleCallback"] = _da_["fieldTitleCallback"] || function(field){try{if(field.parentNode&&field.parentNode.nodeName.toUpperCase()==='LABEL'){return this.Sizzle.getText(field.parentNode);}
if(!this.isEmpty(field.id)){var labelList=this.Sizzle('label[for=\''+field.id+'\']');if(labelList.length){return this.Sizzle.getText(labelList[0]);}}
if(!this.isEmpty(field.getAttribute('data-di-field-id'))){return field.getAttribute('data-di-field-id');}
if(!this.isEmpty(field.id)){return field.id;}
return field.name;}catch(e){ if (window[window.DecibelInsight].handleException) window[window.DecibelInsight].handleException('fieldTitleCallback', e, 'CONFIG'); window[window.DecibelInsight].warn('DecibelInsight: Configuration error in fieldTitleCallback. ', e.toString());return '';}};_da_["fieldErrorCallback"] = _da_["fieldErrorCallback"] || function(field){try{var error=field.parentNode?field.parentNode.querySelector('.input-error-msg'):false;if(!error)return false;return error.innerText?error.innerText.trim():false;}catch(e){ if (window[window.DecibelInsight].handleException) window[window.DecibelInsight].handleException('fieldErrorCallback', e, 'CONFIG'); window[window.DecibelInsight].warn('DecibelInsight: Configuration error in fieldErrorCallback. ', e.toString());return false;}};_da_["preInit"] = function(){try{_da_.noPageMeta=true;_da_.ignoreElementSelector='body > svg';}catch(e){window[window.DecibelInsight].warn('DecibelInsight: Configuration error in Custom JavaScript Tags.', e.toString()); if (window[window.DecibelInsight].handleException) window[window.DecibelInsight].handleException('CustomJS', e, 'CONFIG');}};/*!
 * 
 * /**
 *  * Copyright Medallia Inc.
 *  * https://www.medallia.com/
 *  * /
 *
 */
/*!
 * 
 * /**
 *  * Diff Match and Patch
 *  * Copyright Google Inc.
 *  * http://code.google.com/p/google-diff-match-patch/
 *  * Licensed under the Apache License, Version 2.0 (the "License");
 *  * http://www.apache.org/licenses/LICENSE-2.0
 *  * /
 *
 */(()=>{"use strict";var o=window,h=document,H=navigator,n=document.location,f=Math,i=o.MutationObserver||o.WebKitMutationObserver||o.MozMutationObserver,U=Array.prototype.slice,V=Array.prototype.push;Array.prototype.indexOf;function c(e){return null!==e&&"object"==typeof e}function l(e){return"function"==typeof e}function s(){var e=window.navigator;return/(Android|iPad|iPod|iPhone)/i.test(e.userAgent)}let d={ver:"5.4.67",dataVer:1,branch:"Shoreditch",cdn:"collection.decibelinsight.net",app:"app.decibelinsight.com",proxy:"proxy.decibelinsight.net",proxyStyle:"_di_standard_",qa:h.createElement("a"),hasStor:function(){try{return c(o.sessionStorage)&&l(o.sessionStorage.getItem)&&c(o.localStorage)&&l(o.localStorage.getItem)}catch(e){return!1}}(),isAC:(t=window.navigator,/Android/i.test(t.userAgent)&&/Chrome\/[0-9]/i.test(t.userAgent)),isFF:/Firefox\/[0-9]/i.test(H.userAgent),isMac:/mac/i.test(H.platform),isMob:s(),isIE9:!(!(t=window.document).documentMode||9!==t.documentMode),isSa:(t=window.navigator).vendor&&0===t.vendor.indexOf("Apple")&&/Safari\/[0-9]/i.test(t.userAgent),dAR:null,igQH:!0,pES:function(){let e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),hasSoc:"function"==typeof WebSocket,xhrTO:s()?3e4:1e4,jEList:{GenericError:0,Error:1,InternalError:2,RangeError:3,ReferenceError:4,SyntaxError:5,TypeError:6,URIError:7,Warning:8,EvalError:9,SecurityError:10,DOMException:11}};const r=["sendApplicationError","sendCustomDimension","sendGoal","sendTrackedEvent","sendHTTPError","sendIntegrationData","sendPageGroup","setFavorite","setFavourite"];let B=r.concat(["_hm","activateDXAWidget","activateHeatmap","addClickEvents","addEvent","ajax","bindGoalEvents","canCollect","clearCookies","closest","dataRetention","enableRealTime","endSession","extend","forIn","formSubmitted","getAttribute","getCookie","getDIDOMId","getInteractionModuleField","getLeadId","getLS","getNodeName","getObserverState","getPageTime","getPageUrl","getQualifiedSelector","getRecordingState","getSessionId","getSS","getStyle","getTabId","getXPath","handleException","hash","hasKey","height","inArray","indexElements","indexForms","indexScrollable","isArray","isCollecting","isDIDOM","isDomainValid","isEmpty","isEmptyObject","isFunction","isInSample","isNode","isNumber","isObject","isObjectNoProp","isObjectWithProp","isRealTimeEnabled","isString","isUndefined","offset","onCollectionChange","onHTMLCollected","onPageCollected","onRealTimeEnabled","parents","pauseRecording","proxy","ready","restartSession","resumeRecording","scrollLeft","scrollTop","selectPageviewForAnalysis","selectSessionForAnalysis","selectSessionForExperience","selectSessionForReplay","setCollection","setEnterpriseProxy","setFrameRate","setHtmlResSelector","setInteractionModuleField","setIntStatus","setLS","setPageRole","setRetention","setSS","siblings","startObserver","startSession","stopObserver","tabReady","trackCanvas","trackPageView","trim","trimnlb","updateLead","updateLeadScore","updateUserId","version","warn","width"]);var u,p,m,g,a,q,v,G,y,S,b,X,e;let W=o._da_,E;function C(e){return null==e||""===e}function T(e,t,i,s,r,n=""){C(e)||C(t)||(e.di_events=e.di_events||{},n=t+(n||i.toString()),e.di_events[n])||(e.addEventListener(t,e=>{i.call(s,e)},!(!d.pES||!r)&&{passive:!0}),e.di_events[n]=!0)}const R={attrSel:/\[\s*class\s*\$=/,boolFalse:/^(false|0)$/i,boolTrue:/^(true|1)$/i,bot:/(sp[iy]der|[a-z\/_]bot|crawler|slurp|teoma)/i,canvasCss:/(^|\s+|>|,|}|{)\bcanvas\b/gi,cc:/\b(\d{4}([\s-]?)\d{4}\2\d{4}\2(?:(?:\d{4}\2\d{3})|(?:\d{2,4})))\b/g,comment:/<!--(.|[\r\n])*?-->/gi,commentFrag:/(<!--|-->)/gi,css:/\.css$/i,cssComment:/\/\*(.|[\r\n])*?\*\//gi,cssUrl:/url[\s]*\([\s]*(['"]?)(.*?)(\1)[\s]*\)/g,cssEscaped:/(\\([0-9a-fA-F]{6}))|(\\([0-9a-fA-F]+)(\s+|(?=[^0-9a-fA-F])))/g,da:/^da_/,diTest:/\/i\/([0-9]+\/)?[0-9]+\/di\.js$/i,dU:/^data:[a-zA-Z]{2,6}\/([a-zA-Z]{2,4})(\+[a-zA-Z]{2,4})?;base64/,dWidthHeight:/device-(width|height)[\s]*:/gi,email:/(^|[>\s({\[\|,;:"'])([a-z0-9][a-z0-9._-]{0,30}@[a-z0-9-]{1,30}\.+[a-z0-9]{2,5})/gi,eProt:/^\/\//,erTest:/^Script error\.?$/i,escape:/["\\\x00-\x1f\x7f-\x9f]/g,fSel:/(name="|field-id=")/,hasProt:/^[a-z]+:/i,hrefC:/^javascript: ?(void|;)/i,hUrlFix:/^.+?(\.app\/|\/files\/)/,hAssetFix:/^file:\/\/\/(.+?\.app\/|(android_asset\/)|(android_res\/))/,hoverQueryFix:/(\(| )hover(\s*)\.di-hover/gi,idFix:/(:|\.|\[|\]|,|\{|\})/g,igQH:/[\?#].*$/,importIgnore:/@import [^;]+;/gi,importUrl:/@import[\s]+(['"])(.*?)(\1)/g,inValAttr:/\(\)\{\}\[\]\$/,invalidInput:/^(datetime-local|datetime|time|week|month|date|number)$/i,js:/\.js(\?.*|$)/i,jsO:/(\.js|\/[^\.]+)$/i,jsEType:/(.+):/i,lb:/[\r\n\s]+/g,lComSp:/^[, \t\n\r\u000c]+/,lNSp:/^[^ \t\n\r\u000c]+/,lNCom:/^[^,]+/,lowerEncoded:/%([0-9A-F]{2})/gi,mask:/[^\s]/g,maskReducer:/(\*+)/g,media:/all|screen|handheld|min-|max-|resolution|color|aspect-ratio/i,nat:/^\s*function[^{]+{\s*\[native code\]\s*}\s*$/,newDiPath:/\/i\/[0-9]+\/[0-9]+\/(di\.js|c\.json)$/i,protR:/^(https?):\/\//i,pseudoFix:/:(hover|invalid)/gi,punctuationEscaped:/\\([:\/.?=])(?![^\[]*\])/g,regex:/^\/(.*?)\/([gim]*)$/,sp:/ {2,}/g,stack:/^\s*(?:at)?\s* (.*?)@? ?\(?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,spaceOnly:/^[ \n\t\r]+$/,ssn:/\d{3}-\d{2}-\d{4}/gi,stW:/(^| )width: /,stH:/(^| )height: /,tCom:/[,]+$/,textarea:/<textarea(.*? data-di-mask.*?)>([\s\S]*?)<\/textarea>/gi,trim:/^\s+|\s+$/g,trimSpCom:/^[,\s]+|[,\s]+$/g,urlFix:/1\.[0-9]\.[0-9]\.[0-9]+\/bmi\//gi,val:/ value=["']([^"]+)["']/,valId:/^[a-z][a-z0-9_\-:\.]*$/i,vartest:/^[a-zA-Z0-9 _$\.\[\]'"]+$/,xmlns:/www\.w3\.org\/[0-9]{4}\/([a-zA-Z]+)/i};function z(e){return!!e&&R.valId.test(e)}function I(e,t){let i=null;return i=e&&l(e.getAttribute)?e.getAttribute(t):i}function _(e){return"string"==typeof e}function J(e){let t=I(e,u.href);return t="#"!==t.charAt(0)&&(_(e.href)&&(t=e.href||t),d.igQH)?t.replace(R.igQH,""):t}function $(e){e=J(e);return"#"!==e&&!R.hrefC.test(e)}function x(e){return void 0===e}function Y(e){var t={top:0,bottom:0,left:0,right:0,width:0,height:0};return e&&!x(e.getBoundingClientRect)&&(e=e.getBoundingClientRect(),t.top=e.top,t.bottom=e.bottom,t.left=e.left,t.right=e.right,t.width=t.right-t.left,t.height=t.bottom-t.top),t}function Q(e,t){return(e.currentStyle||(h.defaultView&&h.defaultView.getComputedStyle?h.defaultView.getComputedStyle(e):e.style))[t]}function K(e){var t=Y(e);return!!(t.width&&t.height||e.offsetWidth&&e.offsetHeight)}function Z(e){return!(!e||!e.nodeName)}function ee(e){let t=null;return t=Z(e)?e.di_node_name||e.nodeName.toLowerCase():t}function te(e){e=ee(e);return e===p.lowercaseBody||e===p.lowercaseHtml||e===p.document||e===p.documentFragment}function ie(){let e,t;var i;return"innerWidth"in o?(e=o.innerWidth,t=o.innerHeight,"visualViewport"in o&&1<(i=o.visualViewport).scale&&f.abs(i.width-e)<2&&(e=f.round(e*i.scale),t=f.round(t*i.scale))):(i=h.documentElement||h.body,e=i.clientWidth,t=i.clientHeight),{width:e,height:t,top:0,left:0,bottom:t,right:e}}function k(...e){e&&e[0]&&0===e[0].indexOf("DecibelInsight:")&&(e[0]=e[0].replace("DecibelInsight:","DXA warning:")),c(window.console)&&console.warn&&console.warn.apply(null,U.call(e))}(t=u=u||{}).ariaRequired="aria-required",t.autocomplete="autocomplete",t.charset="charset",t.class="class",t.data="data",t.disabled="disabled",t.height="height",t.href="href",t.id="id",t.label="label",t.media="media",t.name="name",t.novalidate="novalidate",t.rel="rel",t.required="required",t.src="src",t.srcdoc="srcdoc",t.style="style",t.text="text",t.type="type",t.value="value",t.width="width",(t=p=p||{}).a="A",t.body="BODY",t.button="BUTTON",t.lowercaseBody="body",t.canvas="CANVAS",t.div="DIV",t.document="#document",t.documentFragment="#document-fragment",t.noHashDocument="document",t.embed="EMBED",t.form="FORM",t.head="HEAD",t.html="HTML",t.lowercaseHtml="html",t.iframe="IFRAME",t.img="IMG",t.input="INPUT",t.li="LI",t.link="LINK",t.nav="NAV",t.object="OBJECT",t.p="P",t.picture="PICTURE",t.plaintext="PLAINTEXT",t.script="SCRIPT",t.select="SELECT",t.source="SOURCE",t.span="SPAN",t.style="STYLE",t.svg="SVG",t.lowercaseSvg="svg",t.textarea="TEXTAREA",t.ul="UL",t.video="VIDEO";const se=/^(?:input|select|textarea|button)$/i,re={combinators:[">","+","~","*"],standardPseudos:["active","any-link","checked","default","defined","disabled","empty","enabled","first-child","first-of-type","focus","focus-visible","focus-within","fullscreen","host","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","link","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","placeholder-shown","read-only","read-write","required","root","scope","target","valid","visited","where"],positionalPseudos:{first:function(e){return e.length?[e.shift()]:[]},last:function(e){return e.length?[e.pop()]:[]},eq:function(e,t){var i=[];return void 0!==e[t]&&i.push(e[t]),i},lt:function(e,t){return t=Math.min(e.length,t),e.splice(t,e.length-t),e},gt:function(e,t){return t=Math.min(e.length,t),e.splice(0,t),e},even:function(i){var s=[];for(let e=0,t=i.length;e<t;e+=2)i[e].nodeName&&s.push(i[e]);return s},odd:function(i){var s=[];for(let e=1,t=i.length;e<t;e+=2)i[e].nodeName&&s.push(i[e]);return s}},customPseudos:{has:function(e,t){let i=!1;try{i=!!e.querySelectorAll(t).length}catch(e){k("DXA warning: "+e.message)}return i},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},input:function(e){return se.test(e.nodeName)},button:function(e){var t=e.nodeName;return t===p.input&&"button"===e.type||t===p.button},visible:function(e){return e.nodeName===p.document||K(e)&&"hidden"!==Q(e,"visibility")&&"0px"!==Q(e,"height").trim()&&"0px"!==Q(e,"width").trim()&&0!=+Q(e,"opacity")},scrollable:function(e){return(5<e.scrollWidth-e.clientWidth||5<e.scrollHeight-e.clientHeight)&&!te(e)},inview:function(e){e=Y(e);return 0<=e.bottom&&e.top<=ie().height},shadow:function(e){return!!e.shadowRoot&&!e.shadowRoot.__shady}}},O={asterisk:"*",colon:":",comma:",",gt:">",openPar:"(",closePar:")",empty:"",pseudoScope:":scope",pseudoShadow:":shadow",space:" ",spaceAsteriskColon:" *:",spaceColon:" :",spaceColonRegex:/( :)/g,undef:"undefined"};function ne(e){let t,i;var s;return-1!==e.indexOf(O.openPar)?(s=e.substring(0,e.indexOf(O.openPar)),t=s.replace(O.colon,O.empty),i=e.substring(e.indexOf(O.openPar)+1,e.length-1).split(O.space)):t=e.replace(O.colon,O.empty),{name:t,args:i}}const ae=new Map;function oe(e){if(ae.has(e))return ae.get(e);var r=[];let n=e.split(O.space);for(let i=0,e=n.length;i<e;i++){var s=n[i];if(s.indexOf(O.openPar)>s.indexOf(O.closePar)){let e=i+1,t=s;for(n[i]=O.empty;n[e]&&n[e].indexOf(O.closePar)<0;)t+=O.space+n[e],n[e]=O.empty,e++;n[e]=t+O.space+n[e]}-1!==re.combinators.indexOf(s)&&n[i+1]&&(n[i+1]=s+O.space+n[i+1],n[i]=O.empty)}for(let i=0,s=(n=le(n)).length;i<s;i++){var a=n[i];if(typeof a===O.undef)break;if(-1!==a.indexOf(O.colon)){var o=le(a.split(O.colon));a[0]!==O.colon&&(r.push(o[0]),o.shift());let t=!1;for(const c of o)if(-1!==re.standardPseudos.indexOf(ne(c).name))!t&&0<r.length?r[r.length-1]=r[r.length-1]?r[r.length-1]+O.colon+c:O.colon+c:r.push(O.colon+c);else{t=!0;let e=[c];for(const d of re.combinators){var l=[];for(const u of e){if(u.indexOf(d)>u.indexOf(O.closePar)){var h=u.split(d);l.push(h[0]),h.shift();for(let e=0;e<h.length;e++)l.push(d+O.space+h[e])}u.indexOf(d)<0&&l.push(u)}l.length&&(e=l)}r.push(O.colon+e[0]),e.shift(),e.length&&(n[i+1]=typeof n[i+1]===O.undef?e.join(O.space):e.join(O.space)+O.space+n[i+1],s++)}}else n[i]&&r.push(n[i])}var t=[];let i=[];for(const p of r)(p[0]===O.colon?(i.length&&(t.push(i.join(O.space)),i=[]),t):i).push(p);return i.length&&t.push(i.join(O.space)),ae.has(e)||ae.set(e,t),t}function le(e){var t=[];for(const i of e)i&&t.push(i);return t}const he=97,ce=122,de=65,ue=40,pe=48,fe=57,me=58,ge=45;function ve(s){for(let i=s.indexOf(O.colon);-1<i&&i<s.length;i=s.indexOf(O.colon,i+1)){let e=i,t=s.charCodeAt(++e);if(t===me&&(t=s.charCodeAt(++e)),(r=t)>=he&&r<=ce||r>=de&&r<=ue||r>=pe&&r<=fe||t===ge)return 1;i=e}var r}(t=m=m||{})[t.ELEMENT=1]="ELEMENT",t[t.ATTR=2]="ATTR",t[t.TEXT=3]="TEXT",t[t.CDATA_SECTION=4]="CDATA_SECTION",t[t.ENTITY_REFERENCE=5]="ENTITY_REFERENCE",t[t.ENTITY=6]="ENTITY",t[t.PROCESSING_INSTRUCTION=7]="PROCESSING_INSTRUCTION",t[t.COMMENT=8]="COMMENT",t[t.DOCUMENT=9]="DOCUMENT",t[t.DOCUMENT_TYPE=10]="DOCUMENT_TYPE",t[t.DOCUMENT_FRAGMENT=11]="DOCUMENT_FRAGMENT",t[t.SHADOW_ROOT=11]="SHADOW_ROOT",t[t.NOTATION=12]="NOTATION";{var t=g=g||{};const gs=new Map;function ye(e,t,i){return Ce(Se,e=e&&xe(e),t,i)}function Se(e,t,i){let s=[];if(t&&t.nodeType!==m.TEXT)if(i&&e[0]!==O.colon)try{s=Array.prototype.slice.call(t.querySelectorAll(e))}catch(e){k("DXA warning: "+e.message)}else Ie(e,s,t,i);else try{s=Array.prototype.slice.call(document.querySelectorAll(e))}catch(e){k("DXA warning: "+e.message)}return s}function be(e,t,i){return Ce(Ee,e=e&&xe(e),t,i)}function Ee(e,t,i){var s=[];return t.nodeType!==m.ELEMENT&&t.nodeType!==m.DOCUMENT&&t.nodeType!==m.SHADOW_ROOT||function e(t,i,s,r){Ie(t,i,s,r);s&&s.shadowRoot&&e(t,i,s.shadowRoot,!0);for(const n of ye(O.pseudoShadow,s))e(t,i,n.shadowRoot,!0)}(e,s,t,i),s}function Ce(s,t,r,n){if(void 0===t||0===t.trim().length)return[];if(void 0===r&&(r=window.DISearchContext||document),ve(t)){let e=[];var i=[],a=[];for(const c of Te(t))(-1===c.indexOf(O.colon)?i:a).push(c);i.length&&(e=s(i.join(O.comma),r,n));var o=n;for(const d of a){n=o;var l,h=oe(d);let i=[];for(let t=0,e=h.length;t<e;t++){let e=h[t];if(0<i.length&&(n=n&&!1),e.startsWith(O.colon)?(l=ne(e),re.customPseudos[l.name]?i=function(e,t,i,s){if(e&&t)if(s.length){var r=[];i=i&&i.map(e=>e.startsWith(O.gt)?O.pseudoScope+O.space+e:e);for(const n of s)(i?t.call(this,n,i):t.call(this,n))&&r.push(n);s=r}else(i?t.call(this,e,i):t.call(this,e))&&s.push(e);return s}(r,re.customPseudos[l.name],l.args,i):re.positionalPseudos[l.name]?i=function(e,t,i,s){e&&t&&(s.length?s=t.apply(this,[s,i]):t.apply(this,[e,i])&&s.push(e));return s}(r,re.positionalPseudos[l.name],l.args,i):-1!==re.standardPseudos.indexOf(l.name)&&e&&(i=Re(s,e,r,n,i))):(e=e.startsWith(O.gt)?O.pseudoScope+O.space+e:e)&&(i=Re(s,e,r,n,i)),!i.length)break}V.apply(e,i)}return e}return s(t=t.startsWith(O.gt)?O.pseudoScope+O.space+t:t,r,n)}function Te(i){if(gs.has(i))return gs.get(i);var s=[];let r=0;var e,n=i.length;for(let e=0,t=0;e<n;e++)t<=0&&44===i.charCodeAt(e)?(s.push(i.substring(r,e)),r=e+1,t=0):40===i.charCodeAt(e)||91===i.charCodeAt(e)?++t:41!==i.charCodeAt(e)&&93!==i.charCodeAt(e)||--t;return r<n&&(e=i.substring(r,n)).trim().length&&s.push(e),gs.has(i)||gs.set(i,s),s}function Re(e,t,i,s,r){var n=r.length;if(i&&n){var a=[];for(const o of r)V.apply(a,e(t,o,s));r.length=0,V.apply(r,a)}else r.length=0,V.apply(r,e(t,i,s));return r}function Ie(e,t,i,s){if(!(s=void 0===s&&e[0]!==O.colon?!0:s)&&i&&function(e,t){let i=!1;if(e.nodeType===m.DOCUMENT)t.toLowerCase()===p.noHashDocument&&(i=!0);else try{e.nodeType===m.ELEMENT&&(i=e.matches(t))}catch(e){k("DXA warning: Invalid selector provided. "+e.message)}return i}(i,e)&&t.push(i),-1!==i.nodeName.indexOf(p.document)&&e.startsWith(O.pseudoScope)&&(e=e.slice(e.indexOf(O.gt)+1)),i&&-1===t.indexOf(i)&&(-1!==i.nodeName.indexOf(p.document)||e.startsWith(O.pseudoScope)||!e.startsWith(O.colon)))try{i.querySelectorAll&&V.apply(t,Array.prototype.slice.call(i.querySelectorAll(e)))}catch(e){k("DXA warning: "+e.message)}}function _e(e,t){return-1!==Ce(Se,t,e,!1).indexOf(e)}function xe(e){return e=(e=-1!==e.indexOf(O.spaceColon)?e.replace(O.spaceColonRegex,O.spaceAsteriskColon):e).startsWith(O.colon)?O.asterisk+e:e}t.search=ye,t.deep=be,t.standardSearch=ye,t.baseStandardSearch=Se,t.deepSearch=be,t.baseDeepSearch=Ee,t.processSelectors=Ce,t.splitSelectors=Te,t.matchesSelector=_e,t.matches=function(e,t){var i=[];for(const s of t)_e(s,e)&&i.push(s);return i},t.getText=function e(t){var i;let s=O.empty,r=0;var n=t.nodeType;if(n){if(n===m.ELEMENT||n===m.DOCUMENT||n===m.SHADOW_ROOT){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)s+=e(t)}else if(n===m.TEXT||n===m.CDATA_SECTION)return t.nodeValue}else for(;i=t[r++];)s+=e(i);return s}}function ke(e){e=ee(e);return e===p.lowercaseHtml||e===p.document||e===p.documentFragment}function Oe(e,t){return e=e.parentNode,g.matchesSelector(e,t)?e:ke(e)?void 0:Oe(e,t)}function w(){return(new Date).getTime()}function we(){var e=f.max(h.documentElement.scrollWidth,h.body.scrollWidth,h.documentElement.offsetWidth,h.body.offsetWidth,h.documentElement.clientWidth),t=f.max(h.documentElement.scrollHeight,h.body.scrollHeight,h.documentElement.offsetHeight,h.body.offsetHeight,h.documentElement.clientHeight);return{width:e,height:t,top:0,bottom:t,left:0,right:e}}function De(e){return C(e)?"":encodeURIComponent(String(e))}function D(e,t){return e&&e.hasOwnProperty(t)}function Ae(...e){if(0===e.length)return{};var t=e[0];for(const i of e)for(const s in i)D(i,s)&&(t[s]=i[s]);return e[0]}function Fe(e,t,i){if(c(e))for(const s in e)D(e,s)&&t.call(i,e[s],s,e)}function Pe(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function Ne(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Me(e){return(e||"").replace(R.trim,"")}(t=a=a||{})[t.NONE=0]="NONE",t[t.PAGE=2]="PAGE",t[t.IGNORE_QUERY=4]="IGNORE_QUERY",t[t.COOKIE=8]="COOKIE",t[t.ERROR_TRACKING=64]="ERROR_TRACKING",t[t.FORM=128]="FORM",t[t.DATA_UNMASKING=256]="DATA_UNMASKING",t[t.RESOURCE_PROXY=4096]="RESOURCE_PROXY",t[t.FULL_PROXY_REFERER=8192]="FULL_PROXY_REFERER";const A={empty:"",comma:",",undef:"undefined",hidden:"hidden",msHidden:"msHidden",webkitHidden:"webkitHidden",landscape:"landscape",portrait:"portrait",orientLandscape:"(orientation:landscape)",scrollinfo:"scrollinfo",pointer:"pointer",touch:"touch",mouse:"mouse",Left:"Left",Top:"Top",scroll:"scroll",resize:"resize",blur:"blur",focus:"focus",visibilitychange:"visibilitychange",msvisibilitychange:"msvisibilitychange",webkitvisibilitychange:"webkitvisibilitychange",ontouchstart:"ontouchstart",touchstart:"touchstart",touchend:"touchend",touchmove:"touchmove",touchcancel:"touchcancel",MSPointerdown:"MSPointerdown",MSPointerup:"MSPointerup",MSPointermove:"MSPointermove",MSPointercancel:"MSPointercancel",pointerdown:"pointerdown",pointerup:"pointerup",pointermove:"pointermove",pointercancel:"pointercancel",mousedown:"mousedown",mouseup:"mouseup",mousemove:"mousemove",DOMMouseScroll:"DOMMouseScroll",onmousewheel:"onmousewheel",mousewheel:"mousewheel",onwheel:"onwheel",wheel:"wheel",contextmenu:"contextmenu",ontouchforcechange:"ontouchforcechange",touchforcechange:"touchforcechange",onwebkitmouseforcechanged:"onwebkitmouseforcechanged",webkitmouseforcechanged:"webkitmouseforcechanged",keydown:"keydown",keyup:"keyup",onorientationchange:"onorientationchange",matchMedia:"matchMedia",getPath:"/heatmap/get-html",aboutHref:"about:srcdoc",visualViewport:"visualViewport",l:"l",r:"r",u:"u",d:"d",i:"i",o:"o",wu:"wu",wd:"wd"},Le={userId:null,blacklisted:{},sessionTimeout:null,maxPageTime:null,maxDataCredit:null,noHtml:!1,frameRate:1,minResourceSize:1e3,optimizeURLCallback:"",htmlResSelector:"",discardAttrs:null,maxCss:3e4,altProxyHostname:"",httpsJourney:!1,canvasFormat:null,pageTaxonomy:null,pageRole:null,pageTitleCallback:"",pageURLCallback:"",autoQueryTrack:null,autoFragmentTrack:null,fragmentPattern:null,disableHTMLContent:!1,interactionSelector:null,attributionCallback:"",attrMutationCallback:"",attributionCriteria:"",allowDuplicateAttribute:!0,depthElementSelector:"",personalDataSelector:"",personalDataRegex:"",maskEmail:!1,maskSSN:!1,recursiveMasking:!0,maskPlaceholder:!1,ignoreElementSelector:"",canvasSelector:"",customDimensions:[],datalayer:[],deepShadowRootSearch:!1,proxyV2:"",fixedElementSelector:A.empty,hoverThreshold:250,minHoverTime:750,formCollection:0,formGroupCriteria:"di-id,hash,url",formDict:[],ignoreFieldSelector:"[data-di-field-ignore]",ignoreFormSelector:"[data-di-form-ignore]",unmaskFieldSelector:"",fieldSelectorAttribute:u.id,shadowsAsPatches:!1,currencyConversionRates:{}},F={fixDaVars(){var e={interactionSelector:"a,.da_t,input,button",ignoreElementSelector:"",depthElementSelector:"",personalDataSelector:"",canvasSelector:"",attributionCriteria:"di-id,id,href"};for(const s of Object.keys(e))C(F[s])?F[s]=e[s]:F[s]=F[s].replace(R.trimSpCom,"");Pe(F.topResources)||(F.topResources=[]),c(F.currencyConversionRates)||(F.currencyConversionRates={});var t={frameRate:1,minResourceSize:1e3,sessionTimeout:30,maxPageTime:60,maxDataCredit:10,maxCss:3e4,datalayerTO:0,hoverThreshold:250,minHoverTime:750};for(const r of Object.keys(t))Ne(F[r])||(F[r]=t[r]);C(F.blacklisted)&&(F.blacklisted={}),F.sessionTimeout*=6e4,F.maxPageTime*=6e4,F.maxDataCredit*=2e5;var i={allowDuplicateAttribute:!0,recursiveMasking:!0,maskPlaceholder:!1,shadowsAsPatches:!1};for(const n of Object.keys(i))C(F[n])&&(F[n]=i[n]);F.fixDiscardAttr(),F.fixRegex(),F.fixForm()},fixDiscardAttr(){if(!C(F.discardAttrs)){var e=F.discardAttrs.match(R.regex);try{if(e)d.dAR=new RegExp(e[1],e[2]);else{let t=F.discardAttrs.split(",");for(let e=0;e<t.length;++e)""!==t[e]?t[e]=Me(t[e]).replace(/^data-$/i,"data-(?!di-)"):t.splice(e,1);C(t="^("+t.join("|")+")")||(d.dAR=new RegExp(t,"i"))}}catch(e){d.dAR=null}}},fixRegex(){var e={personalDataRegex:{d:null,o:"g"},fragmentPattern:{d:new RegExp("^#/.*"),o:""},ignoreQueryRegex:{d:null,o:""},ignoreFragmentRegex:{d:null,o:""}};for(const r of Object.keys(e)){var t,i=e[r],s=F[r];if(C(s)||"string"!=typeof s)F[r]=i.d;else{t=s.match(R.regex);try{F[r]=t?new RegExp(t[1],t[2]):new RegExp(s,i.o)}catch(e){F[r]=i.d}}}},fixForm(){for(const t of["formCollection","formGroupCriteria","formDict","formErrorCallback","formTitleCallback","ignoreFormSelector","ignoreFieldSelector","unmaskFieldSelector","fieldTitleCallback","fieldErrorCallback","fieldSelectorAttribute","aggregateFields"]){let e=F[t];C(e=_(e)?e.replace(R.trimSpCom,""):e)?delete F[t]:F[t]=e}(F.account_flags_orig&a.DATA_UNMASKING)!==a.DATA_UNMASKING&&(F.unmaskFieldSelector=""),Pe(F.formDict)||(F.formDict=[])},cleanup(e){var t={};for(const i of Object.keys(e))t[i.replace(R.da,"")]=e[i];for(const s of["autoFragmentTrack","autoQueryTrack","maskEmail","maskSSN","frameRate","resourceRate","minResourceSize","personalDataSelector","unmaskFieldSelector","ignoreElementSelector","personalDataRegex","fragmentPattern"])C(F[s])||(t[s]=F[s]);Ae(F,t),Ae(window._da_,F)}},P=new Proxy(F,{get(e,t){var i;let s="";return t=t.replace(R.da,""),s=C(e[t])?null!=(i=Le[t])?i:"":e[t]},set(e,t,i){return t&&(e[t.replace(R.da,"")]=i),!0}});function je(t){let i=null;try{for(const r of h.cookie.split(";")){let e=r.substr(0,r.indexOf("="));var s=r.substr(r.indexOf("=")+1);if((e=e.replace(R.trim,""))===t){i=unescape(s);break}}}catch(e){}return i}function He(e){let t=0;return t=e&&e.di_dom?e.di_dom.i:t}function Ue(){C(P.dnsRecord)||(d.cdn=P.dnsRecord);var e=g.search('script[src$="di.js?noblock"]').length?"?noblock":"";return"https://"+d.cdn+"/i/"+P.accountNumber+"/"+P.websiteId+"/c.json"+e}function Ve(e){let t=0;return e=e||{},(d.isMac?e.metaKey:e.ctrlKey)&&(t+=2),e.shiftKey&&(t+=4),e.altKey&&(t+=8),t}function Be(e,t){let i;if(d.hasStor)try{i=e.getItem(t)}catch(e){}return i}function qe(e){try{return Be(o.sessionStorage,e)}catch(e){}}function Ge(e){try{return Be(o.localStorage,e)}catch(e){}}function Xe(e){let t;return t=d.hasStor&&C(t=qe(e))?Ge(e):t}function N(e){return e?1:0}function We(e,t){var i=function(e){let t=!1;return null===e?t=!1:e===e.window?t=e:e.nodeType===m.DOCUMENT&&(t=e.defaultView||e.parentWindow),t}(e),s="Top"===t?"Y":"X";let r;return r=i?i["scroll"+s]||i["page"+s+"Offset"]||h.body["scroll"+t]||h.documentElement["scroll"+t]:e["scroll"+t],f.max(r||0,0)}function ze(e){return We(o,e)-(h.documentElement["client"+e]||0)}function Je(e,t,i){var i=i||Y(e),e=ze("Top"),s=ze("Left"),r={top:i.top+e,left:i.left+s};return t&&(r.right=i.right+s,r.bottom=i.bottom+e),r}function $e(e){let i=typeof e;function s(e){return e.match(R.escape)?e.replace(R.escape,function(e){var t=r[e];return"string"==typeof t?t:(t=e.charCodeAt(0),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))}):e}const r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};if(c(e)){const n=[],a=e.constructor===Array;return Fe(e,function(e,t){"string"===(i=typeof e)?e='"'+s(e)+'"':Z(e)?e='"[object HTMLElement]"':null!==i&&"object"===i&&null!==e&&(e=$e(e)),n.push((a?"":$e(t)+":")+String(e))}),(a?"[":"{")+String(n)+(a?"]":"}")}return"string"===i&&(e='"'+s(e)+'"'),String(e)}function Ye(){return"undefined"!=typeof JSON&&JSON.stringify&&(e=JSON.stringify,R.nat.test(e))?JSON.stringify:$e;var e}function Qe(e){return Ye()(e)}function Ke(e,t){let i;var s;return e.di_index_store&&e.di_index_store.callTime===t?e.di_index_store.id:Z(e)?(i=z(e.id)?"#"+e.id:(s=ee(e),te(e)?s:Ke(e.parentNode,t)+" > "+s+(e.hasAttribute(u.href)?'[href="'+J(e)+'"]':"")),e.di_index_store={callTime:t,id:i},i):""}function Ze(){let e=n.search.substr(1);var t={};if(""!==e)for(const s of e=e.split("&")){var i=s.split("=");if(2===i.length)try{t[i[0]]=decodeURIComponent(i[1])}catch(e){}}return t}function et(i){var s=self._da_crcTable||(self._da_crcTable=function(){let t;var i=[];for(let e=0;e<256;e++){t=e;for(let e=0;e<8;e++)t=1&t?3988292384^t>>>1:t>>>1;i[e]=t}return i}());let r=-1;for(let e=0,t=i.length;e<t;e++)r=r>>>8^s[255&(r^i.charCodeAt(e))];return(-1^r)>>>0}function tt(e){return et((e=""+(C(e)?"":e)).substr(0,e.length/2)).toString(16)+"-"+et(e.substr(e.length/2)).toString(16)}function it(e,t,i){if(d.hasStor)try{return C(i)?e.removeItem(t):e.setItem(t,i),!0}catch(e){}return!1}function M(e,t){try{return it(o.sessionStorage,e,t)}catch(e){}}function L(e,t){if(!l(e))return null;const i=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t||this,i.concat(Array.prototype.slice.call(arguments)))}}function st(){let t,e=null;if(C(e=l(P.pageURLCallback)?L(P.pageURLCallback,this)():e))t=location;else try{(t=document.createElement(p.a)).href=e}catch(e){t=location}return{url:t.protocol+"//"+t.host+t.pathname,query:C(t.search)?"":t.search.substr(1),hash:C(t.hash)?"":t.hash.substr(1)}}function rt(e){try{l(e)&&e()}catch(e){}}function nt(e){return C(e)?{width:0,height:0,top:0,bottom:0,left:0,right:0}:e===e.window?ie():e.nodeType===m.DOCUMENT?we():Y(e)}function at(e){return nt(e).height}function ot(t,i,s){var r;if(i){r=i.length;for(let e=0;e<r;e++)if(i[e]&&(s?i[e][s]:i[e])===t)return e}return-1}function lt(e){return ee(e)===p.lowercaseBody}function ht(e){return"[object Arguments]"===Object.prototype.toString.call(e)}function ct(e,t){if(!t&&q.isHistoricHeatmap())return!0;let i=location.hostname.toLowerCase(),s=(t&&(d.qa.href=t,i=d.qa.hostname.toLowerCase()),!1);if(Pe(e)&&0!==e.length)for(const n of e){var r=n.toLowerCase();if(s="*"===r.charAt(0)?new RegExp("^"+r.replace(/\./g,"\\.").replace(/^\*/,"[^\\.]+")+"$").test(i):"www"===r.substr(0,3)?i===r||i===r.substr(4):i===r||i==="www."+r)break}else s=!0;return s}function dt(e){var t=c(e);let i=!0;for(const s in e)if(D(e,s)){i=!1;break}return t&&i}function ut(e){var t=c(e);let i=!1;for(const s in e)if(D(e,s)){i=!0;break}return t&&i}function pt(e){let t=!1;return e.name?t=e.name.trim():e.stack&&(e=e.stack.match(R.jsEType),t=!!e&&e[1]),t}(t=q=q||{}).getWheelDelta=e=>-e.deltaY||-e.detail,t.getWheelEvent=()=>{let e=A.DOMMouseScroll;return A.onwheel in h?e=A.wheel:A.onmousewheel in h&&(e=A.mousewheel),e},t.isHistoricHeatmap=()=>-1!==n.pathname.indexOf(A.getPath)||n.href===A.aboutHref,(t=v=v||{}).DEBUG="DEBUG",t.CONFIG="CONFIG",t.INFO="INFO",t.WARN="WARN",t.ERROR="ERROR";{var t=G=G||{};const vs={},ys=5,Ss=100,bs=100;let s=!1;function ft(e,t,i,s,r){s=s?s.substring(0,Ss):"";var n=E.getPageViewId(),a=E.getSessionId(),o=H.userAgent.substring(0,bs),l=new Date(Date.now()).toISOString(),h=E.getAccountId(),c=E.getPropertyId(),d=(i.length>ys&&(i.length=ys),gt(t,e,s,i));vs[d]?vs[d].count++:vs[d]={time:l,level:e,tag:t,errorType:r,message:s,count:1,pageId:n,sessionId:a,accountId:h,propertyId:c,userAgent:o,stack:i}}function mt(e){let t="";for(const i of e)t+=Qe(i)+"\n";return t.trim()}function gt(e,t,i,s){let r=0,n=0;return 0<s.length&&(r=s[0].line||0,n=s[0].col||0),e+":"+t+":"+i+":"+r+":"+n}function vt(e){let t=0;switch(e.level){case v.CONFIG:t=500;break;case v.DEBUG:t=100;break;case v.ERROR:t=1e3;break;case v.INFO:t=10;break;case v.WARN:t=500}return t*e.count}t.setCollectLogs=function(e){s=e},t.canCollectLogs=function(){return s},t.debug=function(e,t,i){ft(v.DEBUG,e,i,t)},t.config=function(e,t,i){ft(v.CONFIG,e,i,t)},t.info=function(e,t,i){ft(v.INFO,e,i,t)},t.warn=function(e,t,i){ft(v.WARN,e,i,t)},t.error=function(e,t,i){ft(v.ERROR,e,i,t)},t.addLog=ft,t.startLogging=function(){},t.sendLogs=function(){var e=[];for(const t in vs)D(vs,t)&&e.push(vs[t]);e.sort((e,t)=>vt(e)>vt(t)?1:-1),10<e.length&&(e.length=10),s&&e.length&&E.postInfo("log",mt(e),{imp:!0,async:!1});for(const i of e)delete vs[gt(i.tag,i.level,i.message,i.stack)]},t.stringifyLogs=mt}function yt(e,t){let i;"function"==typeof o.CustomEvent?i=new CustomEvent(e,{detail:t}):(i=h.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t),h.dispatchEvent(i)}const St=["CustomJS","attributionCallback","customHmURLCallback"];function bt(e){let t={};try{o.JSON&&o.JSON.parse?t=o.JSON.parse(e):k("DXA warning: JSON.parse function not available")}catch(e){y.processError("JSON",e,v.ERROR,S.JSON)}return t}function Et(e){return We(e,"Left")}function Ct(e){return We(e,"Top")}function Tt(e,t){try{return it(o.localStorage,e,t)}catch(e){}}function Rt(t,i){var s=[],r=t.parentNode;if(r){let e=r.firstChild;for(;e;)e!==t&&e.nodeType===m.ELEMENT&&(C(i)||g.matchesSelector(e,i))&&s.push(e),e=e.nextSibling}return s}function It(e,t){let i;if(Pe(e))for(i=e.length;i;)t(e[--i],i)&&e.splice(i,1)}function _t(i,s,r){if(!l(i))return null;let n=0,a=null;return function(){const e=r||this;function t(){i.apply(e,U.call(arguments)),n=w(),a=null}w()-n>s?t():null===a&&(a=setTimeout(t,n+s-w()))}}function xt(e){return e.replace(R.lowerEncoded,function(e,t){return"%"+t.toLowerCase()})}function kt(e){return Me((e||"").replace(R.lb," "))}(t=y=y||{}).processError=function(e,t,i,s){var r;"CONFIG"===(i=i||v.INFO)&&St.includes(e)&&yt("DIWebToExt",{heatmapWarningMsg:"JavaScript error detected in "+e+" function. Please check property configuration.",event:"hmWebToApp",tag:e}),C(t)||(r=pt(t)||"",G.canCollectLogs()&&(t=function(e){if(!e)return[];var t=[];for(const s of e.split("\n")){var i=R.stack.exec(s);i&&5<=i.length&&t.push({function:i[1],line:parseInt(i[3]),col:parseInt(i[4])})}return t}(t.stack),G.addLog(i,e,t,s,r)))},t.processErrorString=function(e,t,i,s,r){s=s||v.INFO,G.canCollectLogs()&&G.addLog(s,e,i,r,t)},(t=S=S||{}).READY_EXEC="Error caught in ready function",t.GLOBAL_READY="Error caught in global ready function",t.SOCKET_ON_MESSAGE="Error caught in socket message processing",t.AJAX="Error caught in AJAX method execution",t.JSON="Unable to parse JSON structure",t.CAUGHT_ERROR="JS Execution Error Occured",t.C_JSON_CACHE="Cached c.json is detected",(t=fs=fs||{}).WEBSITE="website",t.MOBILE="app",t.HYBRID="hybrid",(t=b=b||{})[t.SERVER=0]="SERVER",t[t.FORCED_IN=1]="FORCED_IN",t[t.FORCED_OUT=2]="FORCED_OUT",t[t.FORCED_IN_SERVER=3]="FORCED_IN_SERVER",t[t.FORCED_OUT_SERVER=4]="FORCED_OUT_SERVER";function Ot(e,t,i){var s,t=e+"="+(t||"")+"; path=/; samesite=strict"+("https:"===n.protocol?"; secure":""),i=t+"; max-age="+(i?1800:31536e3)+"; domain=",t=t+"; max-age=0; domain=";P.cookieDomain&&-1!==n.hostname.indexOf(P.cookieDomain)?h.cookie=i+P.cookieDomain:2<(s=n.hostname.split(".")).length?(h.cookie=t+s.slice(-2).join("."),h.cookie=t+s.slice(-3).join("."),h.cookie=i+s.slice(-2).join("."),null===je(e)&&(h.cookie=i+s.slice(-3).join("."))):h.cookie=i+n.hostname}const wt=class{static setFirstPartyCookie(){Ot("da_sid",E.sId+(C(E.jspsf)?"":"."+E.jspsf)+"|"+E.dataColl.getSessionFlag(),!0),Ot("da_lid",E.leadId+"|"+E.dataColl.getLeadFlag()),Ot("da_intState",P.int_state,!0)}static getHeaderForConfig(){var e={},t=Ze(),i=e,s=qe("d_int_state")||je("da_intState"),r=qe("d_sessionId")||je("da_sid")||"",n=Ge("_da_da_leadId")||je("da_lid")||"",r=r.split("|"),n=n.split("|"),a=["0","0","0","0","0","0"],o=(4===r.length&&((o=r[0].match(/\.(0|1)$/))?(i["X-DI-jspsf"]=N(+o[1]),i["X-DI-sid"]=r[0].slice(0,-2)):i["X-DI-sid"]=r[0],a[0]=r[1],a[2]=r[2],a[4]=r[3],null!==s)&&(i["X-DI-int-state"]=s),4===n.length&&(i["X-DI-lid"]=n[0],a[1]=n[1],a[3]=n[2],a[5]=n[3]),4!==r.length&&4!==n.length||(i["X-DI-cookieflags"]=a.join("|")),e),s=t;return s.da_sid&&(o["X-DI-sid"]=s.da_sid),s.da_lid&&(o["X-DI-lid"]=s.da_lid),+s.da_from_native&&(M("_da_from_native",1),+s.da_in_sample)&&(o["X-DI-cookieflags"]="1|0|1|0|1|0",o["X-DI-jspsf"]=1),e}},Dt=((t=X=X||{}).DATA_CREDIT="datacredit",t.PAGE_VIEW="pageview",t.SESSION="session",(t=e=e||{})[t.PRE_MIGRATED=-1]="PRE_MIGRATED",t[t.RANDOM=0]="RANDOM",t[t.WEIGHTED=1]="WEIGHTED",t[t.PURPOSEFUL=2]="PURPOSEFUL",{subscriptionType:"subscriptionType",experienceMethod:"experienceDataSampleMethod",analysisMethod:"analysisDataSampleMethod",replayMethod:"replayDataSampleMethod",experienceSession:"sessCookieFlags",experienceLead:"leadCookieFlags",analysisSession:"analysisSessFlags",analysisLead:"analysisLeadFlags",replaySession:"replaySessFlags",replayLead:"replayLeadFlags"});const At=class{constructor(){this.active=!0,this.inactivityTriggered=!1,this.subscriptionType=X.DATA_CREDIT,this.experienceMethod=e.RANDOM,this.experienceSession=b.SERVER,this.experienceLead=b.SERVER,this.analysisMethod=e.RANDOM,this.analysisSession=b.SERVER,this.analysisLead=b.SERVER,this.replayMethod=e.RANDOM,this.replaySession=b.SERVER,this.replayLead=b.SERVER,Fe(Dt,function(e,t){this[t]=P[e]||0},this),this.subscriptionType||(this.subscriptionType=X.DATA_CREDIT),this.experienceMethod===e.PRE_MIGRATED&&(this.subscriptionType=X.DATA_CREDIT,this.experienceMethod=e.RANDOM,this.analysisMethod=e.RANDOM,this.replayMethod=e.RANDOM),this.subscriptionType===X.DATA_CREDIT&&(this.replaySession=this.experienceSession,this.replayLead=this.experienceLead)}isDataCreditSubscription(){return this.subscriptionType===X.DATA_CREDIT}isPageViewSubscription(){return this.subscriptionType===X.PAGE_VIEW}isSessionSubscription(){return this.subscriptionType===X.SESSION}experienceRandom(){return this.experienceMethod===e.RANDOM}experiencePurposeful(){return this.experienceMethod===e.PURPOSEFUL}analysisRandom(){return this.analysisMethod===e.RANDOM}analysisPurposeful(){return this.analysisMethod===e.PURPOSEFUL}replayRandom(){return this.replayMethod===e.RANDOM}replayPurposeful(){return this.replayMethod===e.PURPOSEFUL}getSamplingHeader(){return this.experienceSession+"|"+this.experienceLead+"|"+this.analysisSession+"|"+this.analysisLead+"|"+this.replaySession+"|"+this.replayLead}getSessionFlag(){return this.experienceSession+"|"+this.analysisSession+"|"+this.replaySession}getLeadFlag(){return this.experienceLead+"|"+this.analysisLead+"|"+this.replayLead}getStatus(e){return this[e+"Lead"]||this[e+"Session"]}getExperienceStatus(){var e=this.experienceLead||this.experienceSession;return e!==b.FORCED_OUT&&(!this.experienceRandom()||e!==b.FORCED_OUT_SERVER)}getReplayStatus(){var e=this.replayLead||this.replaySession;return e!==b.FORCED_OUT&&(!this.replayRandom()||e!==b.FORCED_OUT_SERVER)}};const Ft=class{constructor(){this.excludeKeys=["type","pvid"],this.behaviourTriggered={},this.expIssueTriggered={},this.prevRealtimeDxs={},this.pageTime=E.getPageTime(),this.onEnabledCB=[];var e=P.int_state||"";this.enabled=-1!==e.indexOf("RealTimeDXS:1"),E.enableRealTime=this.enableRealTime.bind(this),E.isRealTimeEnabled=()=>this.enabled,E.onRealTimeEnabled=this.onRealTimeEnabled.bind(this)}enableRealTime(){P.useKafkaQueue?this.enabled||(this.enabled=!0,E.setIntStatus("RealTimeDXS","1"),this.realTimeEnabled()):k("DXA warning: RealTime DXS is not enebled for this account.")}onRealTimeEnabled(t){l(t)&&!this.onEnabledCB.find(e=>e.toString()===t.toString())&&this.onEnabledCB.push(t),this.enabled&&this.realTimeEnabled()}realTimeEnabled(){for(const e of this.onEnabledCB)e.apply(window[window.DecibelInsight]);this.onEnabledCB=[]}processRealTime(t){if(this.pageTime===+t.pvid){const i={realtime:{data:{}}};let e="decibel";"live_dxs_ks"===t.type&&(e="decibel.ks"),Fe(t,(e,t)=>{-1===this.excludeKeys.indexOf(t)&&(i.realtime.data[t]=e)}),this.processRTPillars(i),this.processRTBehaviour(i),this.processRTExpIssues(i),this.trigger(i,e)}}trigger(e,i){Fe(e,(e,t)=>{"data"!==t&&(yt(t=i+"."+t,e),-1!==t.indexOf("behaviours")&&yt(t.replace("behaviours","behaviors"),e),c(e))&&this.trigger(e,t)})}processRTExpIssues(e){if(e.realtime.data.exp_issues&&e.realtime.data.exp_issues.length)for(const i of e.realtime.data.exp_issues){var t=i.type+"_"+this.pageTime+"_"+i.starttime;this.expIssueTriggered[t]||(e.realtime.exp_issues=e.realtime.exp_issues||{},e.realtime.exp_issues[i.type]={data:i},this.expIssueTriggered[t]=1)}}processRTBehaviour(e){if(e.realtime.data.behaviours&&e.realtime.data.behaviours.length)for(const i of e.realtime.data.behaviours){var t=i.type+"_"+this.pageTime+"_"+i.offset;this.behaviourTriggered[t]||(e.realtime.behaviours=e.realtime.behaviours||{},e.realtime.behaviours[i.type]={data:i},this.behaviourTriggered[t]=1)}}processRTPillars(i){Fe(i.realtime.data,(e,t)=>{t.length<4&&(x(this.prevRealtimeDxs[t])||.1<f.abs(e-this.prevRealtimeDxs[t]))&&(i.realtime[t]=e,this.prevRealtimeDxs[t]=e)})}};const Pt=class{static hash(r,n){{var a=function(t){var i=[];for(let e=0;e<t.length;e++){var s=t.charCodeAt(e);s<128?i.push(s):s<2048?i.push(192|s>>6,128|63&s):s<55296||57344<=s?i.push(224|s>>12,128|s>>6&63,128|63&s):(e++,s=65536+((1023&s)<<10|1023&t.charCodeAt(e)),i.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s))}return i}(r);r=n;let e,t,i,s;var n=3&a.length,o=a.length-n,l=(e=r,3432918353),h=461845907;for(s=0;s<o;)i=255&a[s]|(255&a[++s])<<8|(255&a[++s])<<16|(255&a[++s])<<24,++s,i=(65535&(i=(i=(65535&i)*l+(((i>>>16)*l&65535)<<16)&4294967295)<<15|i>>>17))*h+(((i>>>16)*h&65535)<<16)&4294967295,e=(e^=i)<<13|e>>>19,t=5*(65535&e)+((5*(e>>>16)&65535)<<16)&4294967295,e=27492+(65535&t)+((58964+(t>>>16)&65535)<<16);switch(i=0,n){case 3:i^=(255&a[s+2])<<16;case 2:i^=(255&a[s+1])<<8;case 1:i=(65535&(i=(i=(65535&(i^=255&a[s]))*l+(((i>>>16)*l&65535)<<16)&4294967295)<<15|i>>>17))*h+(((i>>>16)*h&65535)<<16)&4294967295,e^=i}return e=2246822507*(65535&(e=(e^=a.length)^e>>>16))+((2246822507*(e>>>16)&65535)<<16)&4294967295,e=3266489909*(65535&(e^=e>>>13))+((3266489909*(e>>>16)&65535)<<16)&4294967295,(e^=e>>>16)>>>0}}};const Nt=class{constructor(e){this.version="1.0",this.format="HJSON",this.hashes=e,this.useHashing=ut(e)}serialize(e,t){return c(e)&&(e=this.minTree(e)[1]),t?e:{f:this.format,vr:this.version,v:e}}convertObject(e){let t=e;if(c(e)){t=[];for(const i of Object.keys(e))t.push([i,this.convertObject(e[i])])}return t}minTree(e){let t=0,i;var s=e.c;if(s&&0!==s.length){var r,n=[];for(const h of s){var a,o=this.minTree(h);this.useHashing&&(a=o[0].toString()+";",t=Pt.hash(a,t)),n.push(o[1])}i=[];for(const c of Object.keys(e))"c"!==c&&(r=this.convertObject(e[c]),i.push([c,r]),this.useHashing)&&(t=Pt.hash(c+":"+JSON.stringify(r),t));this.hashes[t]?i={h:t.toString(36)}:i.push(["c",n])}else if(i=this.convertObject(e),this.useHashing)if(t=Pt.hash(JSON.stringify(i),0),this.hashes[t])i={h:t.toString(36)};else if(e.a&&"string"==typeof e.a[8]&&1e4<e.a[8].length){var l=Pt.hash(e.a[8],0);if(this.hashes[l])for(const d of i)if("a"===d[0])for(const u of d[1])if("8"===u[0]){u[1]={h:l.toString(36)};break}}return[t,i]}};t=g.search;t.deep=g.deep,t.search=g.search,t.matches=g.matches,t.matchesSelector=g.matchesSelector,t.getText=g.getText;const Mt=t;var Lt=function(e,a,o,l){return new(o=o||Promise)(function(i,t){function s(e){try{n(l.next(e))}catch(e){t(e)}}function r(e){try{n(l.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?i(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(s,r)}n((l=l.apply(e,a||[])).next())})};class jt{constructor(){this.resultCallbacks=new Map}_init(){return Lt(this,void 0,void 0,function*(){return new Promise((e,t)=>{setTimeout(()=>{t()},5e3),this.i=0;let i;var s='/*!\n * \n * /**\n *  * Diff Match and Patch\n *  * Copyright Google Inc.\n *  * http://code.google.com/p/google-diff-match-patch/\n *  * Licensed under the Apache License, Version 2.0 (the "License");\n *  * http://www.apache.org/licenses/LICENSE-2.0\n *  * /\n *\n */\n/*!\n * \n * /**\n *  * Copyright Medallia Inc.\n *  * https://www.medallia.com/\n *  * /\n *\n */(()=>{"use strict";var a,c,h;function u(t,e){return t&&t.hasOwnProperty(e)}function l(t){return null!==t&&"object"==typeof t}function d(t,e,s){if(l(t))for(const r in t)u(t,r)&&e.call(s,t[r],r,t)}(t=a=a||{}).DEBUG="DEBUG",t.CONFIG="CONFIG",t.INFO="INFO",t.WARN="WARN",t.ERROR="ERROR",(t=c=c||{}).READY_EXEC="Error caught in ready function",t.GLOBAL_READY="Error caught in global ready function",t.SOCKET_ON_MESSAGE="Error caught in socket message processing",t.AJAX="Error caught in AJAX method execution",t.JSON="Unable to parse JSON structure",t.CAUGHT_ERROR="JS Execution Error Occured",t.C_JSON_CACHE="Cached c.json is detected";const f={attrSel:/\\[\\s*class\\s*\\$=/,boolFalse:/^(false|0)$/i,boolTrue:/^(true|1)$/i,bot:/(sp[iy]der|[a-z\\/_]bot|crawler|slurp|teoma)/i,canvasCss:/(^|\\s+|>|,|}|{)\\bcanvas\\b/gi,cc:/\\b(\\d{4}([\\s-]?)\\d{4}\\2\\d{4}\\2(?:(?:\\d{4}\\2\\d{3})|(?:\\d{2,4})))\\b/g,comment:/\x3c!--(.|[\\r\\n])*?--\x3e/gi,commentFrag:/(\x3c!--|--\x3e)/gi,css:/\\.css$/i,cssComment:/\\/\\*(.|[\\r\\n])*?\\*\\//gi,cssUrl:/url[\\s]*\\([\\s]*([\'"]?)(.*?)(\\1)[\\s]*\\)/g,cssEscaped:/(\\\\([0-9a-fA-F]{6}))|(\\\\([0-9a-fA-F]+)(\\s+|(?=[^0-9a-fA-F])))/g,da:/^da_/,diTest:/\\/i\\/([0-9]+\\/)?[0-9]+\\/di\\.js$/i,dU:/^data:[a-zA-Z]{2,6}\\/([a-zA-Z]{2,4})(\\+[a-zA-Z]{2,4})?;base64/,dWidthHeight:/device-(width|height)[\\s]*:/gi,email:/(^|[>\\s({\\[\\|,;:"\'])([a-z0-9][a-z0-9._-]{0,30}@[a-z0-9-]{1,30}\\.+[a-z0-9]{2,5})/gi,eProt:/^\\/\\//,erTest:/^Script error\\.?$/i,escape:/["\\\\\\x00-\\x1f\\x7f-\\x9f]/g,fSel:/(name="|field-id=")/,hasProt:/^[a-z]+:/i,hrefC:/^javascript: ?(void|;)/i,hUrlFix:/^.+?(\\.app\\/|\\/files\\/)/,hAssetFix:/^file:\\/\\/\\/(.+?\\.app\\/|(android_asset\\/)|(android_res\\/))/,hoverQueryFix:/(\\(| )hover(\\s*)\\.di-hover/gi,idFix:/(:|\\.|\\[|\\]|,|\\{|\\})/g,igQH:/[\\?#].*$/,importIgnore:/@import [^;]+;/gi,importUrl:/@import[\\s]+([\'"])(.*?)(\\1)/g,inValAttr:/\\(\\)\\{\\}\\[\\]\\$/,invalidInput:/^(datetime-local|datetime|time|week|month|date|number)$/i,js:/\\.js(\\?.*|$)/i,jsO:/(\\.js|\\/[^\\.]+)$/i,jsEType:/(.+):/i,lb:/[\\r\\n\\s]+/g,lComSp:/^[, \\t\\n\\r\\u000c]+/,lNSp:/^[^ \\t\\n\\r\\u000c]+/,lNCom:/^[^,]+/,lowerEncoded:/%([0-9A-F]{2})/gi,mask:/[^\\s]/g,maskReducer:/(\\*+)/g,media:/all|screen|handheld|min-|max-|resolution|color|aspect-ratio/i,nat:/^\\s*function[^{]+{\\s*\\[native code\\]\\s*}\\s*$/,newDiPath:/\\/i\\/[0-9]+\\/[0-9]+\\/(di\\.js|c\\.json)$/i,protR:/^(https?):\\/\\//i,pseudoFix:/:(hover|invalid)/gi,punctuationEscaped:/\\\\([:\\/.?=])(?![^\\[]*\\])/g,regex:/^\\/(.*?)\\/([gim]*)$/,sp:/ {2,}/g,stack:/^\\s*(?:at)?\\s* (.*?)@? ?\\(?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\/).*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i,spaceOnly:/^[ \\n\\t\\r]+$/,ssn:/\\d{3}-\\d{2}-\\d{4}/gi,stW:/(^| )width: /,stH:/(^| )height: /,tCom:/[,]+$/,textarea:/<textarea(.*? data-di-mask.*?)>([\\s\\S]*?)<\\/textarea>/gi,trim:/^\\s+|\\s+$/g,trimSpCom:/^[,\\s]+|[,\\s]+$/g,urlFix:/1\\.[0-9]\\.[0-9]\\.[0-9]+\\/bmi\\//gi,val:/ value=["\']([^"]+)["\']/,valId:/^[a-z][a-z0-9_\\-:\\.]*$/i,vartest:/^[a-zA-Z0-9 _$\\.\\[\\]\'"]+$/,xmlns:/www\\.w3\\.org\\/[0-9]{4}\\/([a-zA-Z]+)/i};function i(t){return null==t||""===t}function o(t,e,s,r){try{e=function(t){if(0===t.length)return{};var e=t[0];for(const s of t)for(const r in s)u(s,r)&&(e[r]=s[r]);return t[0]}([{},e]);const o=new XMLHttpRequest,i=function(t){t=t||{type:"error"},r&&r(o.status||t.type)},n=function(t){200===o.status?s&&s(o.responseText):i(t)};"onload"in o?(o.onload=n,o.onerror=i,o.onabort=i,o.ontimeout=i):o.onreadystatechange=function(){4===o.readyState&&n()},o.open(e.method||(e.data?"POST":"GET"),t,!1!==e.async),!1!==e.async&&("number"==typeof e.timeout?o.timeout=e.timeout:o.timeout=self.vars.xhrTO),o.withCredentials=!0,e.nocache&&(o.setRequestHeader("Cache-Control","no-cache"),o.setRequestHeader("Pragma","no-cache"),self.vars.isFF)&&o.setRequestHeader("If-None-Match",""),d(e.extraHeader,function(t,e){o.setRequestHeader(e,t)}),o.send(e.data),o}catch(t){h.processError("AJAX",t,a.ERROR,c.AJAX)}}function e(s){var r=self._da_crcTable||(self._da_crcTable=function(){let e;var s=[];for(let t=0;t<256;t++){e=t;for(let t=0;t<8;t++)e=1&e?3988292384^e>>>1:e>>>1;s[t]=e}return s}());let o=-1;for(let t=0,e=s.length;t<e;t++)o=o>>>8^r[255&(o^s.charCodeAt(t))];return(-1^o)>>>0}function r(t){return"function"==typeof t}function n(t,e){if(!r(t))return null;const s=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e||this,s.concat(Array.prototype.slice.call(arguments)))}}function k(t){let r=typeof t;function o(t){return t.match(f.escape)?t.replace(f.escape,function(t){var e=s[t];return"string"==typeof e?e:(e=t.charCodeAt(0),"\\\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16))}):t}const s={"\\b":"\\\\b","\\t":"\\\\t","\\n":"\\\\n","\\f":"\\\\f","\\r":"\\\\r",\'"\':\'\\\\"\',"\\\\":"\\\\\\\\"};if(l(t)){const i=[],n=t.constructor===Array;return d(t,function(t,e){var s;"string"===(r=typeof t)?t=\'"\'+o(t)+\'"\':(s=t)&&s.nodeName?t=\'"[object HTMLElement]"\':null!==r&&"object"===r&&null!==t&&(t=k(t)),i.push((n?"":k(e)+":")+String(t))}),(n?"[":"{")+String(i)+(n?"]":"}")}return"string"===r&&(t=\'"\'+o(t)+\'"\'),String(t)}function s(){return"undefined"!=typeof JSON&&JSON.stringify&&(t=JSON.stringify,f.nat.test(t))?JSON.stringify:k;var t}(h||(h={})).processError=function(t,e,s,r){var o;s=s||a.INFO,i(e)||(o=function(t){let e=!1;return t.name?e=t.name.trim():t.stack&&(t=t.stack.match(f.jsEType),e=!!t&&t[1]),e}(e)||"",e=function(t){if(!t)return[];var e=[];for(const r of t.split("\\n")){var s=f.stack.exec(r);s&&5<=s.length&&e.push({function:s[1],line:parseInt(s[3]),col:parseInt(s[4])})}return e}(e.stack),self.workerFunctions.sendToDI({key:["handleProcessedException"],param:[t,o,e,s,r]}))};var t=class{constructor(){this.socketRAT=[500,1e3,2500,5e3,1e4,2e4,4e4,6e4],this.failedMaxTry=3,this.speedSent=0,this.maxSpeedSent=25,this.status={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},this.socket={},this.hasSocket="function"==typeof WebSocket,this.sBuf=[],this.socketRTO=null,this.socketRT=0,this.socketFailed=!1,this.sQ={}}send(e){if(this.socU=e.socU,this.xhrU=e.xhrU,e.data&&!e.retryCount){if(l(e.data)&&(e.data=(t=e.data,s()(t))),e.dataLength=e.data.length,e.preparedParam+="&dl="+e.dataLength,144e5<e.dataLength)return void self.workerFunctions.sendToDI({key:["postInfo"],param:["extra",{entityTooLarge:1}]});self.workerFunctions.sendToDI({key:["addDSize"],param:[e.dataLength]})}var t;this.xhrSocket(e,t=>e.callback&&e.callback(t),t=>{e.retryCode=t,e.retryCount=(e.retryCount||0)+1,this.sendFailedBuffer(e)})}sendFailedBuffer(t){t.retryCount<this.failedMaxTry&&setTimeout(()=>{t.retryCode&&-1===t.preparedParam.indexOf("&retryCode=")&&(t.preparedParam+="&retryCode="+t.retryCode),this.send(t)},1===t.retryCount?250:500)}xhrSocket(t,e,s){var r=this.socketActive();r&&!1!==t.process?this.socketTry(t,e,s):(r||this.reconnectSocket(),this.ajaxTry(t,e,s))}ajaxTry(t,e,s,r){r&&-1===t.preparedParam.indexOf("retryCode")&&(t.preparedParam+="&retryCode="+r),o(this.xhrU+"?"+t.preparedParam,t,e,s)}socketTry(t,e,s){var r=this.socket.readyState;r===this.status.OPEN?this.socketSend(t,e,s):r===this.status.CLOSING||r===this.status.CLOSED?(this.setSocketFailed(!0),this.ajaxTry(t,e,s,"socketDisConnected")):(this.sBuf.push({opt:t,sFn:e,fFn:s}),this.socketConnect())}socketConnect(){var t=this.socket.readyState;if(t!==this.status.OPEN&&t!==this.status.CONNECTING)try{this.socket=new WebSocket(this.socU),this.socket.addEventListener("message",n(this.socketOnMessage,this)),this.socket.addEventListener("open",n(this.socketFlush,this)),this.socket.openTimeout=setTimeout(n(this.socketFlush,this,!0),500)}catch(t){}}reconnectSocket(){var t=this.socket.readyState;this.hasSocket&&t!==this.status.OPEN&&t!==this.status.CONNECTING&&null===this.socketRTO&&(this.socketRTO=setTimeout(n(this.socketConnect,this),this.socketGetRT()))}socketGetRT(){var t=this.socketRAT[Math.min(function(e,s,r){var o;if(s){o=s.length;for(let t=0;t<o;t++)if(s[t]&&(r?s[t][r]:s[t])===e)return t}return-1}(this.socketRT,this.socketRAT)+1,this.socketRAT.length-1)];return this.socketRT=t}socketFlush(t){if(clearTimeout(this.socket.openTimeout),!0===t){this.setSocketFailed(!0),this.socket.conTimeout=!0;for(const e of this.sBuf)this.ajaxTry(e.opt,e.sFn,e.fFn,"socketNotConnected")}else{this.setSocketFailed(!1),this.socketRT=0,this.socketRTO=null,this.socket.conTimeout&&(this.socket.conTimeout=!1,this.socket.slowCon=!0);for(const s of this.sBuf)this.socketSend(s.opt,s.sFn,s.fFn);this.socket.pingTimer=setInterval(n(this.socketPing,this),2e4)}this.sBuf=[]}socketSend(t,e,s){this.socket.slowCon&&-1===t.preparedParam.indexOf("retryCode")&&(t.preparedParam+="&retryCode=socketSlowConnection",this.socket.slowCon=!1),this.sQ[t.key]={sFn:e,fFn:s,t:Date.now()},this.socket.send(t.preparedParam+"&wsReqId="+t.key.substr(1)+"\\n"+t.data),setTimeout(()=>{this.sQ[t.key]&&(this.setSocketFailed(!0),this.socketFnExe(this.sQ[t.key].fFn,"socketTimeout"),delete this.sQ[t.key])},self.vars.xhrTO)}socketOnMessage(t){let e,s;try{"pong"!==t.data&&(e=JSON.parse(t.data),s="k"+e.id,this.sendLiveDXSToDI(e)),this.sQ[s]&&(e.success?(this.socketFnExe(this.sQ[s].sFn),this.speedSent<this.maxSpeedSent&&(self.workerFunctions.sendToDI({key:["networkSpeedCollection","collectWSSNetworkSpeed"],param:[e,this.sQ[s].t,Date.now()]}),++this.speedSent)):(this.setSocketFailed(!0),this.socketFnExe(this.sQ[s].fFn,"socketError")),delete this.sQ[s])}catch(t){this.setSocketFailed(!0),this.socketClose(),this.hasSocket=!1,h.processError("DINetwork",t,a.ERROR,c.SOCKET_ON_MESSAGE)}}socketFnExe(t,e){r(t)&&t(e)}setSocketFailed(t){this.socketFailed=t,self.workerFunctions.sendToDI({key:["net","socketFailed"],value:t})}socketPing(){this.socket.readyState===this.status.OPEN?this.socket.send("ping"):clearInterval(this.socket.pingTimer)}socketActive(){return this.hasSocket&&!this.socketFailed}socketClose(){this.socket.readyState===this.status.OPEN&&this.socket.close()}sendLiveDXSToDI(t){"live_dxs"!==t.type&&"live_dxs_ks"!==t.type||self.workerFunctions.sendToDI({key:["realTime","processRealTime"],param:[t]})}};var p=class{constructor(){this.version="1.0",this.format="DJSON",this.reset()}reset(){this.dictionary={},this.dictionaryLength=1}recurSerialize(t){let e;var s;return s=t,e=(Array.isArray?Array.isArray(s):"[object Array]"===Object.prototype.toString.call(s))?this.convertArray(t):this.convertObject(t)}convertArray(s){var r=[0];for(let e=0,t=s.length;e<t;e++){let t=s[e];l(t)&&(t=this.recurSerialize(t)),r.push(t)}return r}convertObject(e){let s="";var r=[0];for(const o of Object.keys(e)){let t=e[o];l(t)&&(t=this.recurSerialize(t)),s+=o+";",r.push(t)}return r[0]=this.lookupEntryOrAdd(s),r}lookupEntryOrAdd(t){if(""===t)return 0;let e=this.dictionary[t];return e||(e=this.dictionaryLength,this.dictionary[t]=e,this.dictionaryLength++),e}serialize(t,e){return this.reset(),l(t)&&(t=this.recurSerialize(t)),e?t:{v:t,d:Object.keys(this.dictionary),f:this.format,vr:this.version}}};const g=class{static hash(o,i){{var n=function(e){var s=[];for(let t=0;t<e.length;t++){var r=e.charCodeAt(t);r<128?s.push(r):r<2048?s.push(192|r>>6,128|63&r):r<55296||57344<=r?s.push(224|r>>12,128|r>>6&63,128|63&r):(t++,r=65536+((1023&r)<<10|1023&e.charCodeAt(t)),s.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return s}(o);o=i;let t,e,s,r;var i=3&n.length,a=n.length-i,c=(t=o,3432918353),h=461845907;for(r=0;r<a;)s=255&n[r]|(255&n[++r])<<8|(255&n[++r])<<16|(255&n[++r])<<24,++r,s=(65535&(s=(s=(65535&s)*c+(((s>>>16)*c&65535)<<16)&4294967295)<<15|s>>>17))*h+(((s>>>16)*h&65535)<<16)&4294967295,t=(t^=s)<<13|t>>>19,e=5*(65535&t)+((5*(t>>>16)&65535)<<16)&4294967295,t=27492+(65535&e)+((58964+(e>>>16)&65535)<<16);switch(s=0,i){case 3:s^=(255&n[r+2])<<16;case 2:s^=(255&n[r+1])<<8;case 1:s=(65535&(s=(s=(65535&(s^=255&n[r]))*c+(((s>>>16)*c&65535)<<16)&4294967295)<<15|s>>>17))*h+(((s>>>16)*h&65535)<<16)&4294967295,t^=s}return t=2246822507*(65535&(t=(t^=n.length)^t>>>16))+((2246822507*(t>>>16)&65535)<<16)&4294967295,t=3266489909*(65535&(t^=t>>>13))+((3266489909*(t>>>16)&65535)<<16)&4294967295,(t^=t>>>16)>>>0}}};const m=class{constructor(t){this.version="1.0",this.format="HJSON",this.hashes=t,this.useHashing=function(t){var e=l(t);let s=!1;for(const r in t)if(u(t,r)){s=!0;break}return e&&s}(t)}serialize(t,e){return l(t)&&(t=this.minTree(t)[1]),e?t:{f:this.format,vr:this.version,v:t}}convertObject(t){let e=t;if(l(t)){e=[];for(const s of Object.keys(t))e.push([s,this.convertObject(t[s])])}return e}minTree(t){let e=0,s;var r=t.c;if(r&&0!==r.length){var o,i=[];for(const h of r){var n,a=this.minTree(h);this.useHashing&&(n=a[0].toString()+";",e=g.hash(n,e)),i.push(a[1])}s=[];for(const u of Object.keys(t))"c"!==u&&(o=this.convertObject(t[u]),s.push([u,o]),this.useHashing)&&(e=g.hash(u+":"+JSON.stringify(o),e));this.hashes[e]?s={h:e.toString(36)}:s.push(["c",i])}else if(s=this.convertObject(t),this.useHashing)if(e=g.hash(JSON.stringify(s),0),this.hashes[e])s={h:e.toString(36)};else if(t.a&&"string"==typeof t.a[8]&&1e4<t.a[8].length){var c=g.hash(t.a[8],0);if(this.hashes[c])for(const l of s)if("a"===l[0])for(const d of l[1])if("8"===d[0]){d[1]={h:c.toString(36)};break}}return[e,s]}};self.workerFunctions={},self.workerFunctions.DJSON=new p,self.workerFunctions.DJSONSerialize=function(t){return self.workerFunctions.DJSON.serialize(t.data,t.partialDom)},self.workerFunctions.HJSONInit=function(t){self.workerFunctions.HJSON=new m(t)},self.workerFunctions.HJSONSerialize=function(t){return self.workerFunctions.HJSON.serialize(t.data,t.partialDom)},self.workerFunctions.ajaxExecute=function(t,e){o(t.url,t.options,function(t){e({success:!0,responseText:t})},function(t){e({success:!1,status:t})})},self.workerFunctions.diNetwork=new t,self.workerFunctions.diNetworkSend=function(t,e){t.callback=e,self.workerFunctions.diNetwork.send(t)},self.workerFunctions.diNetworkSocketClose=function(){self.workerFunctions.diNetwork.socketClose()},self.workerFunctions.hash=function(t){return e((t=""+(i(t)?"":t)).substr(0,t.length/2)).toString(16)+"-"+e(t.substr(t.length/2)).toString(16)},self.workerFunctions.sendToDI=function(t){try{postMessage({id:"DI",message:t})}catch(t){}},onmessage=function(t){if(!self.workerFunctions[t.data.procMethodName])throw new Error("No such processing method defined in worker: "+t.data.procMethodName);const e={id:t.data.id,message:null,procMethodName:t.data.procMethodName};t=self.workerFunctions[t.data.procMethodName](t.data.message,function(t){e.message=t,postMessage(e)});void 0!==t&&(e.message=t,postMessage(e))}})();',r="self.vars = "+JSON.stringify(d)+";";try{i=new Blob([r,s],{type:"application/javascript"})}catch(e){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);n.append(r),n.append(s),i=n.getBlob("application/javascript")}r=(window.URL||window.webkitURL).createObjectURL(i);this.worker=new Worker(r);const a=this;this.worker.onmessage=function(e){a.resultCallbacks[e.data.id]?(a.resultCallbacks[e.data.id](e.data.message),delete a.resultCallbacks[e.data.id]):"DI"===e.data.id&&a.processIncoming(e.data.message)},e()})})}processIncoming(i){if(i.key){let t=E;var s=i.key.length-1;for(let e=0;e<s;e++)t=t[i.key[e]];void 0!==i.param?t[i.key[s]].apply(t,i.param):t[i.key[s]]=i.value}}process(e,t,i){i&&(this.resultCallbacks[this.i]=i);i={id:this.i,message:t,procMethodName:e};this.i++,this.worker.postMessage(i)}}var Ht,Ut,Vt,Bt=function(e,a,o,l){return new(o=o||Promise)(function(i,t){function s(e){try{n(l.next(e))}catch(e){t(e)}}function r(e){try{n(l.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?i(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(s,r)}n((l=l.apply(e,a||[])).next())})};{t=Ht=Ht||{};let s=null;t.init=function(){return Bt(this,void 0,void 0,function*(){window.Worker?yield(s=new jt)._init():k("DXA warning: This browser doesn't support web workers.")})},t.process=function(e,t,i){s&&s.process(e,t,i)}}(Ut||(Ut={})).serialize=function(e,t,i){Ht.process("DJSONSerialize",{data:e,partialDom:t},i)},(t=Vt=Vt||{}).init=function(e){Ht.process("HJSONInit",e)},t.serialize=function(e,t,i){Ht.process("HJSONSerialize",{data:e,partialDom:t},i)};t=class{constructor(){this.listeners=[]}addListener(e){-1===this.listeners.indexOf(e)&&this.listeners.push(e),this.addHook()}removeListener(e){e=this.listeners.indexOf(e);-1!==e&&this.listeners.splice(e,1),this.removeHook()}addHook(){const i=this;!Element.prototype.di_attachShadow&&Element.prototype.attachShadow&&(Element.prototype.di_attachShadow=Element.prototype.attachShadow,Element.prototype.attachShadow=function(){var e=Element.prototype.di_attachShadow.apply(this,arguments);try{if(e.host&&0<"[native code]".length)for(const t of i.listeners)t([{target:e.host,type:"childList",removedNodes:[],addedNodes:[e]}])}catch(e){}return e})}removeHook(){0===this.listeners.length&&Element.prototype.di_attachShadow&&(Element.prototype.attachShadow=Element.prototype.di_attachShadow,delete Element.prototype.di_attachShadow)}};var qt=class{constructor(){this.webApis=["CSSGroupingRule","CSSMediaRule","CSSSupportsRule","CSSPageRule","CSSStyleSheet"],this.methodNames=["insertRule","deleteRule","addRule","removeRule","replace","replaceSync"],this.replaceMethodNames=["replace","replaceSync"],this.listeners=[]}addListener(e){-1===this.listeners.indexOf(e)&&this.listeners.push(e),this.addHook()}removeListener(e){e=this.listeners.indexOf(e);-1!==e&&this.listeners.splice(e,1),this.removeHook()}addHook(){const s=this;for(const e of this.webApis){if(!o[e])return;const r=o[e];!r.prototype.di_insertRule&&r.prototype.insertRule&&(r.prototype.di_insertRule=r.prototype.insertRule,r.prototype.insertRule=function(e,t){try{if(s.listeners)for(const i of s.listeners)i({el:this,addedRule:e,addedIndex:t})}catch(e){}return r.prototype.di_insertRule.apply(this,arguments)}),!r.prototype.di_deleteRule&&r.prototype.deleteRule&&(r.prototype.di_deleteRule=r.prototype.deleteRule,r.prototype.deleteRule=function(e){try{if(s.listeners)for(const t of s.listeners)t({el:this,deletedIndex:e})}catch(e){}return r.prototype.di_deleteRule.apply(this,arguments)})}this.addDeprecatedMethods(),this.addReplaceMethods()}addDeprecatedMethods(){const r=this;!CSSStyleSheet.prototype.di_addRule&&CSSStyleSheet.prototype.addRule&&(CSSStyleSheet.prototype.di_addRule=CSSStyleSheet.prototype.addRule,CSSStyleSheet.prototype.addRule=function(e,t,i){try{if(r.listeners)for(const s of r.listeners)s({el:this,addedRule:e+` {${t}}`,addedIndex:i})}catch(e){}return CSSStyleSheet.prototype.di_addRule.apply(this,arguments)}),!CSSStyleSheet.prototype.di_removeRule&&CSSStyleSheet.prototype.removeRule&&(CSSStyleSheet.prototype.di_removeRule=CSSStyleSheet.prototype.removeRule,CSSStyleSheet.prototype.removeRule=function(e){try{if(r.listeners)for(const t of r.listeners)t({el:this,deletedIndex:e})}catch(e){}return CSSStyleSheet.prototype.di_removeRule.apply(this,arguments)})}addReplaceMethods(){const i=this;for(const s of this.replaceMethodNames)!CSSStyleSheet.prototype["di_"+s]&&CSSStyleSheet.prototype[s]&&(CSSStyleSheet.prototype["di_"+s]=CSSStyleSheet.prototype[s],CSSStyleSheet.prototype[s]=function(e){try{if(i.listeners)for(const t of i.listeners)t({el:this,replacedText:e})}catch(e){}return CSSStyleSheet.prototype["di_"+s].apply(this,arguments)})}removeHook(){for(const t of this.webApis){if(!o[t])return;var e=o[t];for(const i of this.methodNames)0===this.listeners.length&&e.prototype["di_"+i]&&(e.prototype[i]=e.prototype["di_"+i],delete e.prototype["di_"+i])}}};const Gt=class{send(e){const t=e.callback;delete e.callback,e.xhrU=E.xhrU,e.socU=E.socU,Ht.process("diNetworkSend",e,()=>{t&&t()})}socketClose(){Ht.process("diNetworkSocketClose",{})}};var Xt,Wt,zt,Jt,$t=class{constructor(){this.rId=0,this.pB=[],this.pBLT=w(),this.socketFailed=!1,this.net=new Gt}postInfo(e,t,i){E.canCollect()&&((i=Ae({time:w()},i)).time-E.getInteractionModuleField("lInt")>P.sessionTimeout&&(E.dataColl.active=!1,this.net.socketClose(),E.endColl()),this.clearHTMLPatch(t),i.imp?this.send(e,t,i):"exit"===e?this.postMulti({async:!1,extraParam:"&ex=1"}):"flush"!==e&&(this.pB.push({type:e,data:t,offset:f.max(0,f.floor((i.time-E.getPageTime())/1e3))}),!this.canPostMulti(i))||this.postMulti())}send(e,t,i){this.rId++,(i=Ae({},i)).key=i.key||"k"+this.rId,i.data=null,i.type=e,C(t)||(i.data=t),this.setPreparedParam(e,i),this.pBLT=w(),M("di_last_session_time",E.getInteractionModuleField("lInt")),R.boolTrue.test(I(h.body,"di-heatmap"))||(this.triggerForExt(i),H.sendBeacon&&(!1===i.async||E.unloadInProgress)?this.sendWithBeacon(i):this.net.send(i))}triggerForExt(e){this.socketActive()&&yt("disocketdata",{url:e.preparedParam,postBody:e.data})}sendWithBeacon(e){if(e.data){if(c(e.data)&&(e.data=Qe(e.data)),e.dataLength=e.data.length,e.preparedParam+="&dl="+e.dataLength,144e5<e.dataLength)return void E.postInfo("extra",{entityTooLarge:1});E.dSize+=e.dataLength}H.sendBeacon(this.getDataAjaxPath(e),e.data)||(e.retryCode="beaconError",e.crossPage=!0,e.retryCount=1,e.async=!0,M("d_failedBeacon",Qe(e)))}checkFailedBeacon(){var e=qe("d_failedBeacon");C(e)||(e=bt(e)).key&&this.net.send(e)}socketClose(){this.net.socketClose()}setPreparedParam(e,t){let i="";var s=C(E.jspsf)?"":"&jspsf="+E.jspsf,r=null!=(r=E.realTime)&&r.enabled?"&ldxs=1":"",n=P.ipHandling?"&dnt=1":"",a=C(t.dataLength)?"":"&dl="+t.dataLength;!1!==t.process&&(i="&dc="+ ++E.dC),E.pvId=f.abs(E.getPageTime()),t.preparedParam="type="+e+"&wid="+E.wId+"&sid="+E.sId+s+r+"&pvid="+E.pvId+(t.extraParam||"")+n+i+"&dv="+d.dataVer+a}getDataAjaxPath(e){return E.xhrU+"?"+e.preparedParam}clearHTMLPatch(e){P.disableHTMLContent&&e&&(e.jP&&(e.jP={}),e.html)&&(e.html="")}postMulti(e){this.pB.length&&(this.send("multi",this.pB,e),this.pB=[])}canPostMulti(e){return!e.onExit&&(this.pB.length>(this.socketActive()?0:1)||5e3<e.time-this.pBLT)}socketActive(){return d.hasSoc&&!this.socketFailed}};(Xt||(Xt={})).execute=function(e,t,i,s){e={url:e,options:{}},t&&(e.options={data:t.data,async:t.async,timeout:t.timeout,method:t.method,nocache:t.nocache,extraHeader:t.extraHeader}),Ht.process("ajaxExecute",e,function(e){c(e)&&(e.success?i&&i(e.responseText):s&&s(e.status))})},(ai=Wt=Wt||{}).SEND_FRAMED_PAGE="send_framed_pageview",ai.SEND_PARENT_PAGE="send_parent_pageview",ai.REQUEST_SESSION="request_session",ai.RESPONSE_SESSION="response_session";const Yt=class{constructor(e){this.namespace=e}addListener(t){o.addEventListener("message",e=>{e.data&&e.data.namespace&&this.matchesNamespace(e.data.namespace)&&t(e)})}postMessage(e,t,i,s){t={namespace:this.namespace,type:t,payload:s};e.postMessage&&e.postMessage(t,i)}matchesNamespace(e){return e===this.namespace}};const Qt=class{constructor(e){this.messengerNamespace="DXA_",this.messenger=new Yt(this.messengerNamespace+e),this.messenger.addListener(L(this.messageReceived,this))}checkFramed(){o.self!==o.top&&this.messenger.postMessage(o.parent,Wt.SEND_FRAMED_PAGE,"*",{aId:E.aId,wId:E.wId,sId:E.sId,pvId:E.pvId})}checkParent(t){this.checkParentCallback=e=>{clearInterval(this.checkParentTO),t(e),this.checkParentCallback=()=>{}};var i=()=>{setTimeout(()=>{this.checkParentTO=setTimeout(()=>{this.checkParentCallback()},1e3),this.messenger.postMessage(o.top,Wt.REQUEST_SESSION,"*",{aId:P.accountNumber,wId:P.websiteId})},500)};if(o.top===o.self)this.checkParentCallback();else try{o.self.location.origin===o.top.location.origin?this.checkParentCallback():i()}catch(e){i()}}messageReceived(e){switch(e.data.type){case Wt.SEND_FRAMED_PAGE:this.framedPageReceived(e);break;case Wt.SEND_PARENT_PAGE:this.parentPageReceived(e);break;case Wt.REQUEST_SESSION:this.sessionRequestFromiFrame(e);break;case Wt.RESPONSE_SESSION:this.sessionResponseFromParent(e)}}sessionResponseFromParent(e){e=e.data.payload;e&&e.preparedHeader&&this.checkParentCallback(e.preparedHeader)}sessionRequestFromiFrame(e){var t=e.data.payload;t&&E&&E.sId&&this.isSameProperty(t.aId,t.wId)&&ct(P.domains,e.origin)&&this.messenger.postMessage(e.source,Wt.RESPONSE_SESSION,"*",{preparedHeader:E.getExtraHeaders()})}findSourceFrame(t){return Array.prototype.slice.call(document.getElementsByTagName(p.iframe)).find(e=>e.contentWindow===t.source)}framedPageReceived(e){var t,i=e.data.payload;i&&this.isSameSession(i.sId,i.aId,i.wId)&&(t=this.findSourceFrame(e))&&(t.setAttribute("data-di-pvid",i.pvId),this.messenger.postMessage(e.source,Wt.SEND_PARENT_PAGE,"*",{aId:E.aId,wId:E.wId,sId:E.sId,pvId:E.pvId}))}parentPageReceived(e){e=e.data.payload;e&&this.isSameSession(e.sId,e.aId,e.wId)&&E.postInfo("meta",{parentPvid:e.pvId})}isSameSession(e,t,i){return e===E.sId&&t===E.aId&&i===E.wId}isSameProperty(e,t){return e===E.aId&&t===E.wId}};function Kt(e){return"string"==typeof e&&""!==e}(Jt=zt=zt||{}).sendFormData=e=>{E.postInfo("formview",{h:e.hash,su:e.submitted,igEr:e.ignoreEr,offset:w()-E.getPageTime()}),e.submitted=0,e.ignoreEr=0},Jt.getFieldErFromAttr=e=>{var t=I(e,"data-di-field-error");let i=null!==t&&!R.boolFalse.test(t);return i=i&&(!R.boolTrue.test(t)&&Kt(t)?t:Jt.getFieldErFromTag(e))},Jt.getFieldErFromTag=e=>{let t=!0,i;var e=I(e,"data-di-field-id")||e.id;return C(e)||(e=g.search('[data-di-field-error-for="'+e+'"]'),Kt(i=e.length?g.getText(e[0]):i)&&(t=i)),t},Jt.fixFieldSelector=e=>e="#"===e.charAt(0)&&-1!==e.indexOf(" ")?'[id="'+e.substr(1)+'"]':e,Jt.getFormHash=e=>{var t=[],i=e.sel.replace("[data-di-form-track]","");let s;if(-1!==i.indexOf("data-di-form-id"))s=i;else{for(const n in e.fields){var r=e.fields[n];r&&t.push(r.sel+"-"+r.type)}t.sort(),s=t.join("|")}return tt(s)},Jt.getFieldVal=e=>{var t;let i="";var s=e.di_entry;return i=s?"group"===s.valueType?(t=g.search(Jt.fixFieldSelector(s.sel)+":checked",s.form,!0)).length?t[0].value:"":"check"===s.valueType?e.checked?"1":"0":e.value:i},Jt.isRequired=e=>{let t=0;var i=I(e,u.required);return t=null!==i&&"false"!==i||(i=I(e,u.ariaRequired))&&"false"!==i?1:t},Jt.getAvailFormSel=(e,t)=>{var i={},s=I(e,"data-di-form-id");return s?i["di-id"]='[data-di-form-track][data-di-form-id="'+s+'"]':(z(s=I(e,u.id))&&(i.id="#"+s.replace(R.idFix,"\\$1")),(s=I(e,u.name))&&(i.name='[data-di-form-track][name="'+s+'"]'),i.hash=i.id||i.name||"[data-di-form-track]:eq("+ot(e,t)+")",i.url=i.hash),i},Jt.updateFieldEntry=(e,t,i)=>{e.el=i,e.form=t.el},Jt.removeFieldEntry=(e,t)=>{t=t||e.el,"group"!==e.valueType&&delete t.di_entry};const Zt=class{setDependency(e,t,i,s){this.formsModule=e,this.fEvents=t,this.fieldEvent=i,this.fSubmitter=s}formIndex(){this.formsModule.f&&E.canCollect()&&(this.scanForm()?(this.formsModule.sendFormMeta(),this.scanAllFormError()):dt(this.formsModule.forms)&&M("di_sub_form"),null===this.formsModule.fcInt)&&(this.formsModule.fcInt=setInterval(()=>{It(this.formsModule.ffbind,e=>{var t,i=h.body.contains(e);return i&&(t=e).di_entry&&t!==h.activeElement&&zt.getFieldVal(t)!==t.di_form_curValue&&L(this.fieldEvent.handler,this.fieldEvent)({type:"change",target:e}),!i})},200))}scanFormError(e){let t=N(this.formsModule.getFormError(e.el)),i=t;var s;for(const r in e.fields)D(e.fields,r)&&(s=e.fields[r],this.scanFieldError(s,!0))&&(t=1,i++);return t&&E.postInfo("formview",{h:e.hash,er:t,offset:w()-E.getPageTime()}),i}scanFieldError(e,t){var i=e.form.di_entry,s=this.formsModule.getFieldError(e.el),r=N(!!s||e.error),n=Kt(s)?s:e.errorStr||"";return t&&r?E.postInfo("fieldview",{s:e.sel,fh:i.hash,er:r,erStr:n,offset:w()-E.getPageTime()}):(e.error=r,e.errorStr=n),s}scanForm(){var i=[],s=[];let r=!1,n,a;if(!E.canCollect())return!1;this.formsModule.addFormTracker(),this.formsModule.processFormDictionary();var o=g.search("[data-di-form-track]");for(let e=0,t=o.length;e<t;e++){var l,h=o[e];C(l=this.formsModule.getFormSel(h,o))||(C(a=this.formsModule.forms[l])?(a={el:h,sel:l,title:kt(this.formsModule.getFormTitle(h)),hasTracker:N(2===P.formCollection||!h.di_formDyn),submitted:0,fields:[],ignoreEr:0,formIndex:e},h.di_entry=a,(n=this.scanFields(a,s))?this.formsModule.forms[l]=a:delete h.di_entry):((h.di_entry=a).el!==h&&(delete a.el.di_entry,a.el=h),n=this.scanFields(a,s)),n&&(a.hash=zt.getFormHash(a),r=r||n),h.di_event_added)||i.push(h)}return setTimeout(L(this.fEvents.addFormEvent,this.fEvents,i,s),100),r}scanFields(e,t){var i,s;let r=!1,n;var a=g.search("input,select,textarea,[data-di-field-include]",e.el,!0);const o=P.ignoreFormSelector;for(const l of a.filter(e=>g.matchesSelector(e,":not([type=hidden],[type=submit],[type=reset],[type=image],[type=button]),[data-di-field-include]")&&!g.matchesSelector(e,o)))(l.id||l.name||I(l,"data-di-field-id"))&&(i=this.formsModule.getFieldSel(l),C(n=e.fields[i])?(s=(null==(s=l.type)?void 0:s.toLowerCase())||"",n={el:l,form:e.el,sel:i,type:s,title:kt(this.formsModule.getFieldTitle(l)).substring(0,127),name:l.name||"",diid:I(l,"data-di-field-id")||"",event:null,focustime:0,timespent:0,delay:0,interactions:0,completed:0,changed:0,valueType:this.formsModule.fieldValType(i,s),required:zt.isRequired(l)},l.di_entry=n,e.fields[i]=n,r=!0):(l.di_entry=n,this.checkScannedElement(n,e,l)),s=zt.getFieldVal(l),x(l.di_form_curValue)&&(l.di_form_curValue=s),x(l.di_form_comValue)&&(l.di_form_comValue=""),l.di_event_added||t.push(l));return r}checkScannedElement(e,t,i){var s,r;e.el!==i&&(P.aggregateFields&&!C(e.diid)?zt.updateFieldEntry(e,t,i):(s=g.matchesSelector(e.el,":visible"),r=g.matchesSelector(i,":visible"),s&&!r?zt.removeFieldEntry(e,i):(zt.removeFieldEntry(e),zt.updateFieldEntry(e,t,i))))}scanAllFormError(){var e,t=this.formsModule.forms;for(const i in t)D(t,i)&&((e=t[i]).initEr=this.scanFormError(e))}};function ei(e){return e||o.event}function ti(e){var t=e.path||e.composedPath&&e.composedPath();return t&&t.length?t[0]:e.target||e.srcElement}const ii=class{setDependency(e,t,i){this.formsModule=e,this.fScanner=t,this.fieldEvent=i}addFormEvent(e,t){for(const i of e)T(i,"submit",this.formEventSubmitFn,this),i.di_event_added=!0;for(const s of t)this.fieldEventFn(s)}checkFormValue(){let e;var t,i="di_fieldVal"+E.getPageTime();for(const r of g.matches(':not([type="submit"],[type="reset"],[type="image"],[type="file"],[type="button"],[type="hidden"])',g.search("input,select,textarea"))){var s=r;x(s[i])&&(s[i]=""),t=I(s,u.type),e="radio"===t||"checkbox"===t?s.checked?"checked":"":s.value,s[i]!==e&&(s[i]=e,this.valueChanged(s))}}formEventSubmitFn(e){e=ei(e);var t=g.search("[data-di-form-track]");this.formsModule.formSubmitted(this.formsModule.getFormSel(ti(e),t),e)}fieldEventFn(e){var t=I(e,u.type);T(e,"focus",this.fieldEvent.handler,this.fieldEvent),T(e,"keypress",this.fieldEvent.handler,this.fieldEvent),T(e,"blur",this.fieldEvent.handler,this.fieldEvent),T(e,"submit"===t||"reset"===t||"image"===t||"button"===t?"click":"change",this.fieldEvent.handler,this.fieldEvent),this.formsModule.ffbind.push(e),e.di_event_added=!0}valueChanged(e){var t,i;E.isJ()&&(t=ee(e),i=I(e,u.type),E.setInteractionModuleField("lInt",w()),t===p.select.toLowerCase()?E.jCur.fE["S:"+He(e)]=e.selectedIndex:"radio"===i?E.jCur.fE["R:"+He(e)]=N(e.checked):"checkbox"===i?E.jCur.fE["C:"+He(e)]=N(e.checked):t!==p.input.toLowerCase()&&t!==p.textarea.toLowerCase()||this.inputValueChanged(e,t,i))}inputValueChanged(e,t,i){let s=e.value.toString();g.matchesSelector(e,P.unmaskFieldSelector)&&"password"!==i||(s="__*"+s.length),E.jCur.fE["I:"+He(e)]=s}};const si=class{constructor(){this.cnt=0,this.cntForm=0,this.foECTries=0,this.foECMaxTries=5,this.foECInterval=null}setDependency(e,t){this.formsModule=e,this.fScanner=t}resetCounters(){this.cnt=0,this.cntForm=0}preSubmit(e,t){this.formNodeSel=e,this.event=t,this.resetCounters(),this.formsModule.addFormTracker(),this.formList=g.search(this.formNodeSel),this.formList.length?(this.formEl=this.formList[0],this.formSel=this.formsModule.getFormSel(this.formEl,this.formsModule.formsOnPage),C(this.formEl)||this.submitForm()):++this.cnt<10&&setTimeout(L(this.preSubmit,this),200)}submitForm(){var e;this.form=this.formsModule.forms[this.formsModule.getFormSel(this.formEl,this.formsModule.formsOnPage)],C(this.form)&&(this.formsModule.addFormTracker(),this.formList=g.search(this.formSel),this.formList.length)&&(this.form=this.formsModule.forms[this.formsModule.getFormSel(this.formList[0],this.formsModule.formsOnPage)]),C(this.form)?++this.cntForm<10&&setTimeout(L(this.submitForm,this),200):(this.form.submitted=1,this.form.ignoreEr=1,this.form.ajax=C(this.event),this.erCount=this.fScanner.scanFormError(this.form),C(this.event)||this.form.initEr!==this.erCount?(this.form.submitted=N(!this.erCount),this.form.ignoreEr=0):C(this.event)||(M("di_sub_form",this.form.hash),this.formsModule.formSubmittedProgress=!0,setTimeout(L(this.checkFormPrevention,this),1e3)),this.form.initEr=this.erCount,e=this.form.submitted,zt.sendFormData(this.form),this.watchForErrors(e))}watchForErrors(e){e&&(clearInterval(this.foECInterval),this.foECInterval=setInterval(()=>{this.foECTries>this.foECMaxTries&&(clearInterval(this.foECInterval),this.foECTries=0),this.form.initEr=this.fScanner.scanFormError(this.form),this.form.initEr?this.cancelSubmission():document.body.contains(this.form.el)||clearInterval(this.foECInterval),this.foECTries++},1e3))}checkFormPrevention(){var e;((e=this.event).defaultPrevented||void 0===e.defaultPrevented&&(!1===(e=e).returnValue||e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()))&&h.body.contains(this.form.el)&&(this.form.initEr=this.fScanner.scanFormError(this.form),this.form.initEr)&&qe("di_sub_form")===this.form.hash&&this.cancelSubmission(),this.formsModule.formSubmittedProgress=!1,M("di_sub_form")}cancelSubmission(e){E.postInfo("formview",{h:(e||this.form).hash,cs:1,offset:w()-E.getPageTime()}),clearInterval(this.foECInterval)}};const ri=class{setDependency(e,t){this.formsModule=e,this.fScanner=t}handler(e){this.el=ti(e),this.d=w(),this.fieldValue=zt.getFieldVal(this.el),this.fieldEntry=this.el.di_entry,E.setInteractionModuleField("lInt",this.d),ut(this.fieldEntry)&&("focus"===e.type?(this.fieldEntry.focustime=this.d,this.fieldEntry.event="focus",this.formsModule.hasFormFocus=!0):"keypress"===e.type&&"keypress"!==this.fieldEntry.event?this.onKeypress():"change"===e.type?this.onChange():"blur"===e.type?this.onBlur():"click"===e.type&&(this.fieldEntry.event="click",this.fieldEntry.timespent+=1e3,this.fieldEntry.interactions+=1,this.fieldEntry.completed=1,this.formsModule.sendFieldData(this.fieldEntry)))}checkChange(){this.fieldEntry.changed=this.fieldEntry.changed||N(this.fieldEntry.completed&&this.fieldValue!==this.el.di_form_comValue),this.fieldEntry.completed=N(!C(this.fieldValue)),this.el.di_form_comValue=this.fieldEntry.completed?this.el.di_form_curValue:"",L(this.fScanner.scanFieldError,this.fScanner)(this.fieldEntry)}checkBlurTime(){this.fieldEntry.timespent<25?this.fieldEntry.shortBlur||(this.fieldEntry.shortBlur=!0,this.formsModule.sendFieldData(this.fieldEntry)):(this.fieldEntry.shortBlur=!1,this.formsModule.sendFieldData(this.fieldEntry))}onChange(){this.fieldValue!==this.el.di_form_curValue&&(this.fieldEntry.event="change",this.el.di_form_curValue=this.fieldValue,this.fieldEntry.completed&&(this.el.di_form_comValue=this.fieldValue),-1===ot(this.fieldEntry.type,["select-one","select-multiple","checkbox"])&&0!==this.fieldEntry.interactions||(this.fieldEntry.interactions+=1),clearTimeout(this.fieldEntry.changeTimeout),this.fieldEntry.changeTimeout=setTimeout(()=>{this.fieldEntry.changeTimeout=null,this.checkChange(),this.fieldEntry.focustime||(this.fieldEntry.timespent+=1e3,this.formsModule.sendFieldData(this.fieldEntry))},100))}onBlur(){this.fieldEntry.event="blur",clearTimeout(this.fieldEntry.changeTimeout),this.fieldEntry.changeTimeout=null,this.fieldEntry.timespent+=this.fieldEntry.focustime?this.d-this.fieldEntry.focustime:0,this.checkChange(),this.checkBlurTime(),this.fieldEntry.focustime=0}onKeypress(){this.fieldEntry.event="keypress",this.fieldEntry.interactions+=1,this.fieldEntry.delay+=this.fieldEntry.focustime?this.d-this.fieldEntry.focustime:0}},ni={delay:"de",timespent:"ti",interactions:"in",error:"er",errorStr:"erStr",changed:"ch"};var ai=class{constructor(){this.ffbind=[],this.fcInt=null,this.f=!1,this.forms={},this.ficnt=0,this.fScanner=new Zt,this.fEvents=new ii,this.fieldEvent=new ri,this.fSubmitter=new si,this.fScanner.setDependency(this,this.fEvents,this.fieldEvent,this.fSubmitter),this.fEvents.setDependency(this,this.fScanner,this.fieldEvent),this.fieldEvent.setDependency(this,this.fScanner),this.fSubmitter.setDependency(this,this.fScanner)}startForm(){this.f=this.canCollectForm(),this.f&&this.formIndex()}endForm(){this.f&&(this.forms={},this.ficnt=0,clearInterval(this.fcInt))}formIndex(){this.fScanner.formIndex()}unfocusForm(){if(this.hasFormFocus&&w()-E.getInteractionModuleField("lInt")>E.getInteractionModuleField("cto")){for(const i in this.forms)if(D(this.forms,i)){var e=this.forms[i];for(const s in e.fields){var t=e.fields[s];D(e.fields,s)&&(t.focustime=0)}}this.hasFormFocus=!1}}checkFormValue(){this.fEvents.checkFormValue()}getFieldTitle(e){return l(P.fieldTitleCallback)?L(P.fieldTitleCallback,E)(e):""}getFieldSel(e){var t=ee(e),i=e.id,s=I(e,"data-di-field-id");let r;return s?r=t+'[data-di-field-id="'+s+'"]':i&&(P.fieldSelectorAttribute!==u.name||C(e.name))?r="#"+i.replace(R.idFix,"\\$1"):e.name?r=t+'[name="'+e.name+'"]':e.type&&(r=t+'[type="'+e.type+'"]'),r}getFormTitle(e){return l(P.formTitleCallback)?L(P.formTitleCallback,E)(e):I(e,"data-di-form-id")||""}getFormError(e){return!!l(P.formErrorCallback)&&L(P.formErrorCallback,E)(e)}getFormSel(e,t){const i=zt.getAvailFormSel(e,t);e=P.formGroupCriteria.split(",").find(e=>void 0!==i[e]);return i[e]}sendFormMeta(){if(E.canCollect()&&ut(this.forms)){var t,i=[],s=[];let e={};for(const o in this.forms){var r=this.forms[o];r&&(e=Object.assign(Object.assign({},e),r.fields))}for(const l in e){var n=e[l];n&&s.push({s:n.sel,t:n.type,na:n.name,di:n.diid,ti:n.title,r:n.required})}for(const h in this.forms){var a=this.forms[h];a&&(t=a.sel.replace("[data-di-form-track]","")).length<=128&&i.push({s:t,n:a.title,e:s,i:a.formIndex,h:a.hash,ht:a.hasTracker,cs:N(!this.formSubmittedProgress&&qe("di_sub_form")===a.hash)})}this.formSubmittedProgress||M("di_sub_form"),i.length&&E.postInfo("formmeta",i)}else M("di_sub_form")}formSubmitted(e,t){this.f&&E.canCollect()&&(_(e=C(e)?"[data-di-form-track]":e)?(this.formsOnPage=g.search("[data-di-form-track]"),this.fSubmitter.preSubmit(e,t)):Z(e)&&e.hasAttribute("data-di-form-track")&&(this.formsOnPage=g.search("[data-di-form-track]"),this.fSubmitter.formEl=e,this.fSubmitter.formSel=this.getFormSel(this.fSubmitter.formEl,this.formsOnPage),this.fSubmitter.submitForm()))}sendFieldData(e){var t=e.form.di_entry,i={};let s=!1,r=!1;if(t){i.s=e.sel,i.fh=t.hash,i.co=e.completed,s=!!e.error;for(const n in ni)D(ni,n)&&e[n]&&(i[ni[n]]=e[n],e[n]=0,r=!0);e.errorStr="",i.offset=(e.focustime||w())-E.getPageTime()}s||setTimeout(L(this.fScanner.scanFieldError,this.fScanner,e,!0),500),!r&&i.co===e.lastSentCO||(e.lastSentCO=i.co,E.postInfo("fieldview",i))}getFieldError(e){let t=[e],i;if(e){if(0===(t=e.di_entry&&e.di_entry.form?g.search(zt.fixFieldSelector(e.di_entry.sel),e.di_entry.form,!0):t).length)return!1;try{e.di_entry&&t[0]!==e.di_entry.el&&((e=t[0]).di_entry.el=e)}catch(e){}i=this.getFieldErFn(e)}return i}fieldValType(e,t){let i="simple";return"radio"===t&&R.fSel.test(e)?i="group":"checkbox"!==t&&"radio"!==t||(i="check"),i}processFormDictionary(){if(2===P.formCollection)for(const t of P.formDict){const i=g.search(t.sel);var e;i.length&&(i[0].hasAttribute("data-di-form-track")||i[0].setAttribute("data-di-form-track",""),t.name&&!i[0].hasAttribute("data-di-form-id")&&i[0].setAttribute("data-di-form-id",t.name),t.btnSel)&&(e=g.search(t.btnSel)).length&&!e[0].di_dict_event&&(e[0].di_dict_event=!0,T(e[0],"click",()=>this.formSubmitted(i[0]),this))}}addFormTracker(){if(1===P.formCollection)for(const e of g.search("form").filter(e=>!g.matchesSelector(e,P.ignoreFormSelector)))e.hasAttribute("data-di-form-track")||(e.setAttribute("data-di-form-track",""),e.di_formDyn=!0)}getFieldErFn(e){var t=zt.getFieldErFromAttr(e);let i,s;return Kt(t)?s=t:l(P.fieldErrorCallback)&&Kt(i=L(P.fieldErrorCallback,E)(e))&&(s=i),s=s||i||t}canCollectForm(){return E.hasFeature(a.FORM)&&0<P.formCollection}};const oi="DI-IGNORED",li="di_old_",hi=" di-replacement",ci="data-di-rand",di="data-di-track",ui=[u.value,u.label],pi={style:1,class:2,colspan:3,label:4,placeholder:5,readonly:6,required:7,src:8,id:9,"data-di-id":10,poster:11,min:12,minlength:13,maxlength:14,max:15,async:16,align:17,autocomplete:18,preload:19,muted:20,"http-equiv":21,title:22,type:23,href:24,enctype:25,dropzone:26,draggable:27,border:28,autoplay:29,media:30,xmlns:31,charset:32,content:33,cols:34,alt:35,width:36,height:37,start:38,step:39,"xlink:href":40,rowspan:41,method:42,novalidate:43,"data-di-form-id":44,"data-di-field-id":45,name:46,action:47,checked:48,for:49,value:50,from:51,target:52,lang:53,rel:54,"xmlns:xlink":55,srcset:56,itemprop:57,"fill-rule":58,"clip-rule":59,fill:60,autocapitalize:61,autofocus:62,crossorigin:63,icon:64,disabled:65,loop:66,multiple:67,pattern:68,selected:69,size:70,span:71,tabindex:72,usemap:73,transform:74,viewBox:76,preserveAspectRatio:77,points:78,textLength:79,path:80,gradientTransform:81,offset:82,background:83,data:84},fi={A:1,LI:2,SPAN:3,DIV:4,META:5,INPUT:6,IMG:7,TD:8,TR:9,BUTTON:10,SECTION:11,HEADER:12,FOOTER:13,SELECT:14,OPTION:15,TEXTAREA:16,STYLE:17,G:18,STRONG:19,NAV:20,MAIN:21,OL:22,UL:23,P:24,CANVAS:25,IFRAME:26,OBJECT:27,LINK:28,EMBED:29,TABLE:30,TBODY:31,TH:32,THEAD:33,FIGURE:34,U:35,S:36,Q:37,IMAGE:38,SVG:39,I:40,FORM:41,B:42,BR:43,SYMBOL:44,GLYPH:45,SUB:46,LABEL:47,FIELDSET:48,POLYLINE:49,COLGROUP:50,ADDRESS:51,H1:52,H2:53,H3:54,H4:55,H5:56,H6:57,POLYGON:58,PICTURE:59,CAPTION:60,PATH:61,RECT:62,ELLIPSE:63,TITLE:64,USE:65,CLIPPATH:66,TEXTPATH:67,LINEARGRADIENT:68,CIRCLE:69,VIDEO:70,TSPAN:71,TFOOT:72,SMALL:73,PARAM:74,FRAME:75,TEXT:76,MAP:77,PRE:78,AREA:79,LINE:80,OPTGROUP:81,TREF:82,VIEW:83,EM:84,LEGEND:85,MARKER:86,HR:87,COL:88,SUP:89,ABBR:90,BASE:91,CODE:92,FONT:93,SOURCE:94,ARTICLE:95,NOSCRIPT:96,HTML:97,HEAD:98,BODY:99,TEMPLATE:100,"FONT-FACE":101,DATALIST:103,BLOCKQUOTE:104,BIG:105,ASIDE:106,DD:107,DEFS:108,DL:109,DT:110,STRIKE:111,"DI-IGNORED":112,"#DOCUMENT-FRAGMENT":113};const mi={STYLE:{d:{getter:e=>(e.sheet||e).disabled,nodeList:"styleDINodes"}},LINK:{d:{getter:e=>(e.sheet||e).disabled,nodeList:"styleDINodes"}},VIDEO:{paused:{getter:e=>e.paused?"pause":"play"},currentTime:{getter:e=>e.currentTime},playbackRate:{getter:e=>void 0!==e.playbackRate?e.playbackRate:1}}},gi={addedRule:"aR",addedIndex:"aI",deletedIndex:"dI",replacedText:"rT"},vi=e=>fi[e]||e,yi=e=>pi[e]||e;var Si,bi;const Ei={IMG:e=>!R.js.test(e.getAttribute(u.src)),INPUT:e=>"hidden"!==e.type,LINK:e=>"text/css"===e.getAttribute(u.type)||-1!==(e.getAttribute(u.rel)||"").toLowerCase().indexOf("stylesheet"),META:e=>e.getAttribute(u.charset)||"viewport"===e.getAttribute(u.name),NOSCRIPT:()=>!1,SCRIPT:()=>!1},Ci={FORM:[{n:u.autocomplete,v:"off",o:!0},{n:u.novalidate,v:"novalidate",o:!0}],INPUT:[{n:u.autocomplete,v:"off",o:!0}],LINK:[{n:u.type,v:"text/css"},{n:u.rel,v:"stylesheet"}],SELECT:[{n:u.autocomplete,v:"off",o:!0}],TEXTAREA:[{n:u.autocomplete,v:"off",o:!0}]},Ti={"data-di-alt-src":1,"data-di-form-track":1,"data-di-rand":1,"data-di-res-id":1,"data-di-track":1,"data-di-id-done":1,integrity:1,maxlength:1,minlength:1,onload:1,pattern:1,required:1,step:1},Ri=(j.prototype.diff_main=function(e,t,i,s){var r,n,a,s=s=void 0===s?this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout:s;if(null==e||null==t)throw new Error("Null input. (diff_main)");return e==t?e?[[0,e]]:[]:(i=i=void 0===i||i,a=this.diff_commonPrefix(e,t),r=e.substring(0,a),e=e.substring(a),t=t.substring(a),a=this.diff_commonSuffix(e,t),n=e.substring(e.length-a),e=e.substring(0,e.length-a),t=t.substring(0,t.length-a),a=this.diff_compute_(e,t,i,s),r&&a.unshift([0,r]),n&&a.push([0,n]),this.diff_cleanupMerge(a),a)},j.prototype.diff_compute_=function(e,t,i,s){var r,n,a,o,l;return e?t?(o=e.length>t.length?e:t,r=e.length>t.length?t:e,-1!=(a=o.indexOf(r))?(o=[[1,o.substring(0,a)],[0,r],[1,o.substring(a+r.length)]],e.length>t.length&&(o[0][0]=o[2][0]=-1),o):1==r.length?[[-1,e],[1,t]]:(a=this.diff_halfMatch_(e,t))?(o=a[0],r=a[1],l=a[2],n=a[3],a=a[4],o=this.diff_main(o,l,i,s),l=this.diff_main(r,n,i,s),o.concat([[0,a]],l)):this.diff_bisect_(e,t,s)):[[-1,e]]:[[1,t]]},j.prototype.diff_bisect_=function(e,t,i){for(var s=e.length,r=t.length,n=Math.ceil((s+r)/2),a=n,o=2*n,l=new Array(o),h=new Array(o),c=0;c<o;c++)l[c]=-1,h[c]=-1;l[a+1]=0;for(var d=s-r,u=d%2!=(h[a+1]=0),p=0,f=0,m=0,g=0,v=0;v<n&&!((new Date).getTime()>i);v++){for(var y=-v+p;y<=v-f;y+=2){for(var S=a+y,b=(I=y==-v||y!=v&&l[S-1]<l[S+1]?l[S+1]:l[S-1]+1)-y;I<s&&b<r&&e.charAt(I)==t.charAt(b);)I++,b++;if(s<(l[S]=I))f+=2;else if(r<b)p+=2;else if(u){var E=a+d-y;if(0<=E&&E<o&&-1!=h[E])if((T=s-h[E])<=I)return this.diff_bisectSplit_(e,t,I,b,i)}}for(var C=-v+m;C<=v-g;C+=2){for(var T,E=a+C,R=(T=C==-v||C!=v&&h[E-1]<h[E+1]?h[E+1]:h[E-1]+1)-C;T<s&&R<r&&e.charAt(s-T-1)==t.charAt(r-R-1);)T++,R++;if(s<(h[E]=T))g+=2;else if(r<R)m+=2;else if(!u)if(0<=(S=a+d-C)&&S<o&&-1!=l[S]){var I,b=a+(I=l[S])-S;if((T=s-T)<=I)return this.diff_bisectSplit_(e,t,I,b,i)}}}return[[-1,e],[1,t]]},j.prototype.diff_bisectSplit_=function(e,t,i,s,r){var n=e.substring(0,i),a=t.substring(0,s),e=e.substring(i),i=t.substring(s),t=this.diff_main(n,a,!1,r),s=this.diff_main(e,i,!1,r);return t.concat(s)},j.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var i=0,s=Math.min(e.length,t.length),r=s,n=0;i<r;)e.substring(n,r)==t.substring(n,r)?n=i=r:s=r,r=Math.floor((s-i)/2+i);return r},j.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var i=0,s=Math.min(e.length,t.length),r=s,n=0;i<r;)e.substring(e.length-r,e.length-n)==t.substring(t.length-r,t.length-n)?n=i=r:s=r,r=Math.floor((s-i)/2+i);return r},j.prototype.diff_commonOverlap_=function(e,t){var i=e.length,s=t.length;if(0==i||0==s)return 0;s<i?e=e.substring(i-s):i<s&&(t=t.substring(0,i));var r=Math.min(i,s);if(e==t)return r;for(var n=0,a=1;;){var o=e.substring(r-a),o=t.indexOf(o);if(-1==o)return n;a+=o,0!=o&&e.substring(r-a)!=t.substring(0,a)||(n=a,a++)}},j.prototype.diff_halfMatch_=function(e,t){var u,i,s,r,n,a,o,l;return!(this.Diff_Timeout<=0)&&(r=e.length>t.length?e:t,s=e.length>t.length?t:e,!(r.length<4||2*s.length<r.length))&&(u=this,i=h(r,s,Math.ceil(r.length/4)),s=h(r,s,Math.ceil(r.length/2)),i||s)?(r=!s||i&&i[4].length>s[4].length?i:s,e.length>t.length?(n=r[0],a=r[1],o=r[2],l=r[3]):(o=r[0],l=r[1],n=r[2],a=r[3]),[n,a,o,l,r[4]]):null;function h(e,t,i){for(var s,r,n,a,o=e.substring(i,i+Math.floor(e.length/4)),l=-1,h="";-1!=(l=t.indexOf(o,l+1));){var c=u.diff_commonPrefix(e.substring(i),t.substring(l)),d=u.diff_commonSuffix(e.substring(0,i),t.substring(0,l));h.length<d+c&&(h=t.substring(l-d,l)+t.substring(l,l+c),s=e.substring(0,i-d),r=e.substring(i+c),n=t.substring(0,l-d),a=t.substring(l+c))}return 2*h.length>=e.length?[s,r,n,a,h]:null}},j.prototype.diff_cleanupSemantic=function(e){for(var t,i,s,r,n=!1,a=[],o=0,l=null,h=0,c=0,d=0,u=0,p=0;h<e.length;)0==e[h][0]?(c=u,d=p,p=u=0,l=e[a[o++]=h][1]):(1==e[h][0]?u+=e[h][1].length:p+=e[h][1].length,l&&l.length<=Math.max(c,d)&&l.length<=Math.max(u,p)&&(e.splice(a[o-1],0,[-1,l]),e[a[o-1]+1][0]=1,o--,h=0<--o?a[o-1]:-1,p=u=d=c=0,n=!(l=null))),h++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),h=1;h<e.length;)-1==e[h-1][0]&&1==e[h][0]&&(t=e[h-1][1],i=e[h][1],s=this.diff_commonOverlap_(t,i),(r=this.diff_commonOverlap_(i,t))<=s?(s>=t.length/2||s>=i.length/2)&&(e.splice(h,0,[0,i.substring(0,s)]),e[h-1][1]=t.substring(0,t.length-s),e[h+1][1]=i.substring(s),h++):(r>=t.length/2||r>=i.length/2)&&(e.splice(h,0,[0,t.substring(0,r)]),e[h-1][0]=1,e[h-1][1]=i.substring(0,i.length-r),e[h+1][0]=-1,e[h+1][1]=t.substring(r),h++),h++),h++},j.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){var i,s,r,n,a,o;return e&&t?(a=e.charAt(e.length-1),o=t.charAt(0),i=a.match(j.nonAlphaNumericRegex_),s=o.match(j.nonAlphaNumericRegex_),r=i&&a.match(j.whitespaceRegex_),n=s&&o.match(j.whitespaceRegex_),a=r&&a.match(j.linebreakRegex_),o=n&&o.match(j.linebreakRegex_),e=a&&e.match(j.blanklineEndRegex_),t=o&&t.match(j.blanklineStartRegex_),e||t?5:a||o?4:i&&!r&&n?3:r||n?2:i||s?1:0):6}for(var i=1;i<e.length-1;){if(0==e[i-1][0]&&0==e[i+1][0]){for(var s,r=e[i-1][1],n=e[i][1],a=e[i+1][1],o=this.diff_commonSuffix(r,n),l=(o&&(s=n.substring(n.length-o),r=r.substring(0,r.length-o),n=s+n.substring(0,n.length-o),a=s+a),r),h=n,c=a,d=t(r,n)+t(n,a);n.charAt(0)===a.charAt(0);){r+=n.charAt(0),n=n.substring(1)+a.charAt(0),a=a.substring(1);var u=t(r,n)+t(n,a);d<=u&&(d=u,l=r,h=n,c=a)}e[i-1][1]!=l&&(l?e[i-1][1]=l:(e.splice(i-1,1),i--),e[i][1]=h,c?e[i+1][1]=c:(e.splice(i+1,1),i--))}i++}},j.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,j.whitespaceRegex_=/\s/,j.linebreakRegex_=/[\r\n]/,j.blanklineEndRegex_=/\n\r?\n$/,j.blanklineStartRegex_=/^\r?\n\r?\n/,j.prototype.diff_cleanupMerge=function(e){e.push([0,""]);for(var t,i=0,s=0,r=0,n="",a="";i<e.length;)switch(e[i][0]){case 1:r++,a+=e[i][1],i++;break;case-1:s++,n+=e[i][1],i++;break;case 0:1<s+r?(0!==s&&0!==r&&(0!==(t=this.diff_commonPrefix(a,n))&&(0<i-s-r&&0==e[i-s-r-1][0]?e[i-s-r-1][1]+=a.substring(0,t):(e.splice(0,0,[0,a.substring(0,t)]),i++),a=a.substring(t),n=n.substring(t)),0!==(t=this.diff_commonSuffix(a,n)))&&(e[i][1]=a.substring(a.length-t)+e[i][1],a=a.substring(0,a.length-t),n=n.substring(0,n.length-t)),0===s?e.splice(i-r,s+r,[1,a]):0===r?e.splice(i-s,s+r,[-1,n]):e.splice(i-s-r,s+r,[-1,n],[1,a]),i=i-s-r+(s?1:0)+(r?1:0)+1):0!==i&&0==e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,s=r=0,a=n=""}""===e[e.length-1][1]&&e.pop();for(var o=!1,i=1;i<e.length-1;)0==e[i-1][0]&&0==e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),o=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),o=!0)),i++;o&&this.diff_cleanupMerge(e)},j);function j(){this.Diff_Timeout=1,this.Diff_EditCost=4}{var Ii=Si=Si||{};const Es=new Ri;let a;function _i(e,t){return Es.diff_main(e,t)}function xi(e){return 3===e.length?a.REPLACEMENT:2===e.length?"string"==typeof e[1]?a.ADDITION:"number"==typeof e[1]?a.REMOVAL:void 0:void 0}(us=a=a||{})[us.REPLACEMENT=0]="REPLACEMENT",us[us.ADDITION=1]="ADDITION",us[us.REMOVAL=2]="REMOVAL",Ii.getPatches=function(e,i){if(null==e)return i;{var s=_i(e,i);var r=s.length,n=[];let t=0;for(let e=0;e<r;e++){var a=s[e][0],o=s[e][1];-1===a?(e+1<r&&1===s[e+1][0]?(n.push([t,o.length,s[e+1][1]]),e++):n.push([t,o.length]),t+=o.length):1===a?n.push([t,o]):t+=o.length}return n}},Ii.diff=_i,Ii.patch=function(e,t){return e=t?"string"==typeof t?t:function(e,t){let i="",s=0;e=e||"";for(const n of t){var r=e.substring(s,n[0]);switch(xi(n)){case a.REPLACEMENT:i+=r+n[2],s=n[0]+n[1];break;case a.ADDITION:i+=r+n[1],s=n[0];break;case a.REMOVAL:i+=r,s=n[0]+n[1];break;default:i=""}}return i+=e.substring(s,e.length)}(e,t):e},Ii.readPatches=function(e){var t=[];for(const i of e)switch(xi(i)){case a.REPLACEMENT:t.push({type:"Replacement",index:i[0],length:i[1],value:i[2]});break;case a.ADDITION:t.push({type:"Addition",index:i[0],value:i[1]});break;case a.REMOVAL:t.push({type:"Removal",index:i[0],length:i[1]})}return t}}function ki(e){return 4<e.length?"__*"+e.length+";":e}function Oi(e){let t=null;return t="string"==typeof e?e.replace(R.mask,"*").replace(R.maskReducer,ki):t}class wi{constructor(e,t,i){this.i=e,this.t=t.nodeType,i&&(this.ti=i),Object.defineProperty(this,"el",{enumerable:!1,writable:!0,value:t})}getChildIndex(t){let e=-1;return e=this.c?this.c.findIndex(e=>e.el===t):e}clone(e,t){let i={};var s,r=Object.keys(this);let n;if(!this.ti||this.ti===t){if(this.rt&&this.i===t)i={i:0},this.c&&(i.c=this.cloneChildren(e,t));else{i.i=this.i,s=i.i;for(const a of r)switch(a){case"i":case"el":break;case"t":11!==this.t&&8!==this.t||(i.t=this.t);break;case"n":i.n=vi(this.n);break;case"na":i.n=vi(this.na);break;case"c":n=this.cloneChildren(e,t);break;case"a":i.a=this.cloneAttributes();break;case"p":i.p=this.cloneProperties();break;case"ti":e||(i.ti=this.ti);break;default:i[a]=this[a]}!1!==e&&(i.hasOwnProperty("v")?i=" "===i.v?s:s+"|"+i.v:8===i.t&&(i={k:s})),n&&(i.c=n)}return i}}cloneChildren(e,t){var i=[];for(const r of this.c){var s=r.clone(e,t);null!=s&&i.push(s)}return i}cloneAttributes(){var e={};for(const t of Object.keys(this.a))e[yi(t)]=this.a[t];return e}cloneProperties(){var e={};for(const t of Object.keys(this.p))e[t]=this.p[t];return e}getAttribute(e){let t=null;return t=this.a&&this.a.hasOwnProperty(e)?this.a[e]:t}removeAttribute(e){this.a&&delete this.a[e]}setAttribute(e,t){this.a||(this.a={}),this.a[e]=t}maskContent(e,t){if(t){if(this.el[t])return;this.el[t]=!0}if(this.el.di_masked=!0,this.v&&(this.v=Oi(this.v)),this.a&&this.maskPredefinedAttributes(),this.n===p.source&&this.el.parentNode.di_dom.n===p.picture&&this.maskSource(),this.n===p.img&&this.maskImage(e),this.c)for(const i of this.c)(P.recursiveMasking||i.v)&&i.maskContent(e,t)}maskSource(){void 0===this.a&&(this.a={}),this.a.src="//"+d.app+"/images/noimg.svg",delete this.a.srcset}maskImage(e){this.a.width=this.el.width,this.a.height=this.el.height,this.a.src="//"+d.app+"/images/noimg.svg",0===this.a.width&&this.recheckImageSize(e,u.width),0===this.a.height&&this.recheckImageSize(e,u.height)}recheckImageSize(e,t){setTimeout(()=>{0===this.a[t]&&0!==this.el[t]&&e(this.el,t,this.el[t],0)},1e3)}maskPredefinedAttributes(){for(const e of ui)this.a[e]&&(this.a[e]=Oi(this.a[e]))}}function Di(e){let t;try{t=e.cssRules||e.rules}catch(e){y.processError("Stylesheet",e,v.WARN)}return t}function Ai(e){let t="";for(const i of Array.prototype.slice.call(Di(e)))t+=i.cssText+"\n";return t}class Fi{maskTextNode(e){return e=R.spaceOnly.test(e)?" ":(e=e.replace(R.sp," "),C(P.personalDataRegex)||(e=e.replace(P.personalDataRegex,Oi)),P.maskEmail&&(e=e.replace(R.email,function(e,t,i){return t+Oi(i)})),(e=P.maskSSN?e.replace(R.ssn,Oi):e).replace(R.cc,function(e,t){return Oi(t)}))}checkParentForMasking(e){let t=null;return e&&(e.nodeType===m.SHADOW_ROOT?t=this.checkParentForMasking(e.host):(t=!0===e.di_maskable||!1!==e.di_maskable&&(e.di_maskable=g.matchesSelector(e,P.personalDataSelector),!0===e.di_maskable)?e:t)||e.di_dom&&"BODY"===e.di_dom.n||(t=this.checkParentForMasking(e.parentNode))),t}getParentNodeFromMutation(e,t){let i=e.parentElement||e.parentNode||e.host;try{!(i=!i&&t.previousSibling?t.previousSibling.parentElement||t.previousSibling.parentNode:i)&&t.nextSibling&&(i=t.nextSibling.parentElement||t.nextSibling.parentNode)}catch(e){}return i}maskAttrChanges(e,t,i){return e!==u.value&&e!==u.label||(t=Oi(t)),t=e===u.src&&i===p.img?"//"+d.app+"/images/noimg.svg":t}getAttributeName(e,t){return e=t&&(t=t.match(R.xmlns))?t[1]+":"+e:e}getAttributeDiff(e,t,i,s){return"string"==typeof e&&yi(i)<3&&(void 0!==s[li+i]?e=Si.getPatches(s[li+i],e):(e=Si.getPatches(t,e),s[li+i]=t)),e}getLastAttrPatchIndex(t){return E.jCur.jP.findIndex(e=>e.i===t&&e.a)}cleanupClonedDidom(e){e.di_dom&&e.parentNode&&e.parentNode.di_dom&&e.di_dom.i===e.parentNode.di_dom.i&&delete e.di_dom}applyNodeIndex(e,t){return e.i=t.i,t.ti&&(e.ti=t.ti),e}removeId(e,t){var i={};for(const n of Object.keys(e))switch(n){case"i":void 0!==t&&e.i===t+1||(i.i=e.i),t=e.i;break;case"c":var s=[];for(const a of e.c){var r=this.removeId(a,t);t=r[1],s.push(r[0])}i.c=s;break;default:i[n]=e[n]}return[i,t]}calculateElementLocation(e,t){var i;e instanceof CSSStyleSheet?e.ownerRule?(t.path.unshift("styleSheet"),this.calculateElementLocation(e.ownerRule,t)):e.ownerNode?t.el=e.ownerNode:t.sheetId=e.di_id:e instanceof CSSRule&&(i=this.getRuleIndex(e),t.path.unshift("cssRules",i),this.calculateElementLocation(e.parentRule||e.parentStyleSheet,t))}getRuleIndex(t){var e=t.parentRule||t.parentStyleSheet;return Array.prototype.slice.call(Di(e)).findIndex(e=>e===t)}}function Pi(e,t){return t.width&&-1===e.search(R.stW)&&(e+=" width: "+t.width+"px;"),t.height&&-1===e.search(R.stH)&&(e+=" height: "+t.height+"px;"),e}function Ni(e,t,i){Object.keys(e).length?t[i]=e:delete t[i]}function Mi(i){var e,t=(i=null===i?"":i).length;let s=0;function r(e){let t="";return(e=e.exec(i.substring(s)))&&(t=e[0],s+=t.length),t}var n=[];for(r(R.lComSp);s<t;)","===(e=r(R.lNSp)).slice(-1)?n.push({u:e.replace(R.tCom,""),d:""}):n.push({u:e,d:r(R.lNCom).trim()}),r(R.lComSp);return n}function Li(e){let t=e.innerHTML||e.textContent||"";var i,s;return t=t.trim(),e.children&&e.children.length?t="hasNode":C(e.sheet)||(C(t)||(i=function(i){let s=0,r=0;for(let e=0,t=i.length;e<t;e++){var n=i.charCodeAt(e);125===n?0<r&&r--:123===n?1===++r&&s++:92===n&&e++}return s}(t),null!=(s=Di(e.sheet))&&i<s.length))&&(t=Ai(e.sheet)),t}const ji=class{constructor(){this.preparedInlineContent=[]}processCssFn(e){let t=e.di_style_res;var i,s=I(e,"data-di-alt-src");return C(s)?C(i=Li(e))||!C(t)&&t.innerText===i?C(i)&&!C(t)&&(t=null):t=this.styleInnerTextToResource(e,i):!C(t)&&t.altSrc===s||(t={media:e.media,altSrc:s,href:E.resourceModule.qualifyURL(s)}),e.di_style_res=t}styleInnerTextToResource(e,t){let i,s=!1;var r=t.length,r=(i=!e.di_in_shadow&&r>P.maxCss&&!e.hasAttribute("data-di-track")?(s=!0,"/* Style block too large | "+r+" characters | expected length less than "+P.maxCss+" characters */"):this.prepareCSS(t.replace(R.cssComment,"").replace(R.commentFrag,"")),{innerText:t,content:i,media:e.media,tooLarge:s});return"hasNode"===t&&(r.hasNode=!0,r.content=""),this.cssToResource(r,e,i),r}prepareCSS(e){var t;return C(e)?"":(e=(e=-1!==(e=-1!==e.indexOf("@import")&&-1!==(t=e.indexOf("{"))?e.substring(0,t)+e.substring(t).replace(R.importIgnore,""):e).indexOf("\\")?e.replace(R.cssEscaped,this.urlCssUnescape.bind(this)):e).replace(R.cssUrl,this.urlQualifyReplace).replace(R.importUrl,this.importReplace).replace(R.pseudoFix,".di-$1").replace(R.hoverQueryFix,"$1hover$2:hover").replace(R.canvasCss,"$1.di-canvas").replace(R.attrSel,"[class*="),P.noDeviceWidthMediaReplace?e:e.replace(R.dWidthHeight,"$1:"))}urlCssUnescape(e,t,i,s,r){let n=e;return i?n=String.fromCharCode(Number("0x"+i)):r&&(Number("0x"+r)<32?n="":this.isPrivateUseArea(r)||(n=String.fromCharCode(Number("0x"+r)))),n}isPrivateUseArea(e){let t=!1;e=Number("0x"+e);return t=57344<=e&&e<=63743||983040<=e&&e<=1048573||1048576<=e&&e<=1114109?!0:t}urlQualifyReplace(e,t,i){return"url("+t+E.resourceModule.qualifyURL(i.replace(R.punctuationEscaped,"$1"),{prefix:!0,noProxy:!0})+t+")"}importReplace(e,t,i){return"@import "+t+E.resourceModule.qualifyURL(i.replace(R.punctuationEscaped,"$1"),{prefix:!0,noProxy:!0})+t}cssToResource(e,t,i){i.length>P.minResourceSize&&E.canCollectResource()&&!t.hasAttribute("data-di-no-resource-proxy")&&(e.name=tt(i)+"-"+i.length+".css",e.href=E.rUrl+e.name,E.resourceModule.sendResource(e))}};function Hi(e,t,i){for(const s of Array.prototype.slice.call(i||e.childNodes))s.di_res_parent=t,Hi(s,t)}class Ui{constructor(){this.tag="DIDOMAPI",this.styleObservers=[{func:this.styleSheetDisabledObserverFn,rate:1e3},{func:this.adoptedStyleSheetObserverFn,rate:1e3}],this.documentDINodes={},this.styleDINodes={},this.scannedStylesheet={},this.utilities=new Fi,this.diNodePrepareFn={CANVAS:this.prepareCanvasDINode,EMBED:this.prepareObjectDINode,IFRAME:this.prepareObjectDINode,OBJECT:this.prepareObjectDINode,LINK:this.prepareLinkDINode,PLAINTEXT:this.prepareTextDINode,SVG:this.prepareSVGDINode,STYLE:this.prepareStyleDINode},this.diNodePrepareAdditionalFn={HTML:this.prepareHTMLDINode,VIDEO:this.prepareVideoDINode},this.attrModifiers={A:{href:()=>"#"},INPUT:{type:e=>e=R.invalidInput.test(e)?"text":e},IMAGE:{href:this.qualifyURL,"xlink:href":this.qualifyURL},LINK:{href:this.qualifyURL},USE:{href:this.qualifyURL,"xlink:href":this.qualifyURL},VIDEO:{src:this.qualifySrc},SOURCE:{src:this.qualifySrc},background:this.qualifyURL,poster:this.qualifyURL,src:this.qualifyURL,srcset:this.qualifySrcSet,style:this.prepareCSS},this.styleScanner=new ji,P.maskPlaceholder&&ui.push("placeholder"),this.setDefault()}setDefault(){this.currentIndex=this.currentIndex||0,this.tree={i:0},o._di_max_id=o._di_max_id||{0:0},this.observer=null,this.documentDINodes={},this.styleDINodes={},this.scannedStylesheet={},this.unmaskedFields=["submit","reset","checkbox","radio","image","file","button"],this.maskPatchFn=this.createAttributePatch.bind(this),this.mutationQueue=[],this.mQRunning=!1,this.mutationBusy=!1,this.maTO=null,this.shadowBuffer=[]}isObserving(){return!!this.observer}observe(e){this.disconnect(),this.createObserver(e),this.tree=this.prepareTree(e,!!Oe(e,p.lowercaseBody)),this.addShadowPatches()}createObserver(e){i&&(this.observer=new i(L(this.observerFn,this)),this.observer.observe(e,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.observerFnScoped=this.observerFnScoped||L(this.observerFn,this),E.attachShadowHook.addListener(this.observerFnScoped),this.cssObserverFnScoped=this.cssObserverFnScoped||L(this.cssObserverFn,this),E.attachCSSHook.addListener(this.cssObserverFnScoped),this.initCustomObservers())}initCustomObservers(){for(const t of this.styleObservers){var e=L(t.func,this);e(),t.interval=setInterval(e,t.rate)}}createPropertyPatch(e,t,i){i={i:null,p:{[i]:e}};E.jCur.jP.push(this.utilities.applyNodeIndex(i,t.di_dom))}observerFn(i){for(let e=0,t=i.length;e<t;e++){var s=i[e].target;s.di_dom||s.parentNode&&s.parentNode.di_dom||delete i[e]}Array.prototype.unshift.apply(this.mutationQueue,i.reverse()),this.processMutationStart()}processMutationStart(){this.mQRunning?(this.mutationBusy=!0,clearTimeout(this.maTO),this.maTO=setTimeout(()=>{this.mutationBusy=!1,this.mQRunning=!1,this.processMutationStart()},200)):(this.mQRunning=!0,this.processMutation())}processMutation(){for(var e=this.mutationQueue.splice(-1<this.mutationQueue.length-1500?this.mutationQueue.length-1500:0,1500);0<e.length;){var t=e.pop();if(t){var i=t.target;if("childList"===t.type&&0<t.addedNodes.length&&E.addDataLayerRuleListenersForTargetsIn(Array.prototype.slice.call(t.addedNodes)),"characterData"===t.type&&i.nodeType===m.TEXT&&i.parentNode.di_dom.n===p.style)i.parentNode.setAttribute(ci,w());else if(!i.di_ignored)switch(t.type){case"childList":this.obsChildList(t);break;case"attributes":this.obsAttributes(t);break;case"characterData":this.obsCharacterData(t)}}}this.mutationQueue.length?this.mutationBusy||setTimeout(L(this.processMutation,this),0):this.mQRunning=!1}cssObserverFn(i){var e=i.el,t={path:[]},e=(this.utilities.calculateElementLocation(e,t),C(t.sheetId)?t.el:document.documentElement);if(e&&e.di_dom){const s={},r=this;Fe(gi,function(e,t){C(i[t])||(s[e]="rT"===e||"aR"===e?r.prepareCSS(i[t]):i[t])}),C(t.sheetId)||(s.sheetId=t.sheetId),t.path.length&&(s.path=t.path),this.createPropertyPatch(s,e,"rule")}}obsChildList(e){let i=e.removedNodes?e.removedNodes.length:0;var s=e.target,r=[],n=[],a=[],o=[];if(s.di_dom){var l=this.diNodePrepareFn[s.di_dom.n];if(s.di_dom.na&&l)this.diffPreparedElement(s,l);else{for(const u of e.removedNodes){var h=s.di_dom.getChildIndex(u);-1===h?i--:r.push(h)}let t=0;if(r.length)t=f.min.apply(null,r);else try{e.previousSibling&&(t=s.di_dom.getChildIndex(e.previousSibling)+1)}catch(e){t=s.di_dom.c?s.di_dom.c.length:t}for(const p of e.addedNodes){var c=this.utilities.getParentNodeFromMutation(p,e);if(s.shadowRoot&&s.shadowRoot===p)return;-1===s.di_dom.getChildIndex(p)&&c&&c===s&&(c=this.prepareTree(p,s.di_in_body||s.di_is_body,s.di_in_shadow||s.di_is_shadow,s.di_dom.rt?s.di_dom.i:s.di_dom.ti),this.addShadowPatches(),-1===o.indexOf(c.i))&&(c.el.di_in_body&&this.handleParentMasking(s,c),o.push(c.i),n.push(c),c=c.clone(!0,c.ti),a.push(E.remoteStorage?E.serializer.serialize(c,!0):c))}s.di_dom.c||(s.di_dom.c=[]),s.di_dom.c.splice.apply(s.di_dom.c,[t,i].concat(n));var l={p:t},d=(i&&(l.r=i),a.length&&(l.a=a),s.di_res_parent);d?(d.di_html_res.changed=!0,Hi(s,d,e.addedNodes)):1<Object.keys(l).length&&E.jCur.jP.push(this.utilities.applyNodeIndex({i:null,c:[l]},s.di_dom))}}}handleParentMasking(e,t){!t.el.di_masked&&(e.di_masked&&(P.recursiveMasking||t.v)||P.recursiveMasking&&P.personalDataSelector&&this.utilities.checkParentForMasking(e))&&t.maskContent(this.maskPatchFn)}obsAttributes(e){var t,i,s=e.target,e=this.utilities.getAttributeName(e.attributeName,e.attributeNamespace);let r;s.di_dom&&(t=s.di_dom.getAttribute(e))!==(r=s.getAttribute(e))&&(delete s.di_maskable,(i=this.diNodePrepareFn[s.di_dom.n])?this.diffPreparedElement(s,i):this.ignoreAttr(e)||(r=this.prepareAttribute(e,r,s.di_dom.n,s),t!==(r=s.di_masked?this.utilities.maskAttrChanges(e,r,s.di_dom.n):r)&&this.createAttributePatch(s,e,r,t)))}diffPreparedElement(e,t){var i=e.di_dom.clone(!1),t=(t.call(this,e.di_dom),e.di_dom.clone(!1));e.di_res_parent?e.di_res_parent.di_html_res.changed=!0:this.addDINodeDiffPatch(i,t,E.jCur.jP)}createAttributePatch(e,t,i,s){var r,n,a;e.di_dom.setAttribute(t,i),e.di_res_parent?e.di_res_parent.di_html_res.changed=!0:(a=this.utilities.getLastAttrPatchIndex(e.di_dom.i),(r=E.jCur.jP[a])?("undefined"==typeof r.a[yi(t)]&&delete e[li+t],Pe(n=this.utilities.getAttributeDiff(i,s,t,e))&&0===n.length?(delete r.a[yi(t)],2===Object.keys(r).length&&0===Object.keys(r.a).length&&E.jCur.jP.splice(a,1)):r.a[yi(t)]=n):(delete e[li+t],(a={i:null,a:{}}).a[yi(t)]=this.utilities.getAttributeDiff(i,s,t,e),E.jCur.jP.push(this.utilities.applyNodeIndex(a,e.di_dom))))}obsCharacterData(e){var t,e=e.target;let i;e.di_dom&&e.nodeType!==m.COMMENT&&(t=e.di_dom.v,(i=e.nodeValue)!==t)&&(i=this.utilities.maskTextNode(i),e.di_masked&&(i=Oi(i)),t=Si.getPatches(t,i),e.di_dom.v=i,e.di_res_parent?e.di_res_parent.di_html_res.changed=!0:E.jCur.jP.push(this.utilities.applyNodeIndex({i:null,v:t},e.di_dom)))}getTree(e,t){return e&&this.isObserving()?this.tree.clone(!t):this.tree}toString(){return Qe(this.tree.clone(!0))}disconnect(){this.observer&&this.observer.disconnect();for(const e of this.styleObservers)e&&e.interval&&(clearInterval(e.interval),delete e.interval);this.observerFnScoped&&E.attachShadowHook.removeListener(this.observerFnScoped),this.cssObserverFn&&E.attachCSSHook.removeListener(this.cssObserverFn),this.setDefault()}handleMask(e){var t="di-mask-"+w()+"-"+f.random();if(P.personalDataSelector)for(const s of g.deep(P.personalDataSelector,e.el))s.di_dom&&s.di_dom.maskContent(this.maskPatchFn,t);let i=g.deep("select,textarea,input",e.el);for(const r of i=C(P.unmaskFieldSelector)?i:g.matches(":not("+P.unmaskFieldSelector+")",i))!r.di_dom||r.di_dom.a&&-1!==this.unmaskedFields.indexOf(r.di_dom.a.type)||r.di_dom.maskContent(this.maskPatchFn,t)}canPrepare(e){let t;var i=Ei[e.n];return t=(t=!!x(i)||i(e.el))&&P.ignoreElementSelector&&g.matchesSelector(e.el,P.ignoreElementSelector)?!1:t}getPrepareFn(e){return this.diNodePrepareFn[e.n]||this.prepareDefaultDINode}prepareTree(e,t,i,s,r){this.utilities.cleanupClonedDidom(e);var n=e.di_dom?e.di_dom.i:++o._di_max_id[s||0],n=e.di_dom||new wi(n,e,s);return n.c&&delete n.c,e.di_in_body=t,e.di_in_shadow=i,n.t===m.TEXT?(s=this.utilities.maskTextNode(e.nodeValue))&&(n.v=s):n.t===m.ELEMENT?(n.n=e.nodeName.replace("\\","").toUpperCase(),n.el.di_is_body=n.n===p.body,this.canPrepare(n)?(delete n.na,delete e.di_ignored,this.getPrepareFn(n).call(this,n)):(e.di_ignored=!0,n.na=oi)):n.t===m.SHADOW_ROOT&&this.prepareShadowRoot(n),e.di_dom=n,r||n.t!==m.ELEMENT&&n.t!==m.SHADOW_ROOT||this.handleMask(n),n}prepareShadowRoot(t){t.n=t.el.nodeName.toUpperCase(),t.el.di_is_shadow=!0;var e=this.prepareAdoptedStyleSheets(t.el),i=(e.sheets.length&&(t.p={adoptedSheetList:JSON.stringify(e.sheets)}),this.getChildNodes(Array.prototype.slice.call(t.el.childNodes),void 0,t.el.di_in_body,!0));i&&(t.c=i),t.el.__shady?t.f=1:((i=P.syntheticShadowContainerSelector)&&t.el.host&&g.search(i).find(e=>e.contains(t.el.host))&&(t.f=1),this.documentDINodes[t.i]={diNode:t,adoptedSheetIds:e.adoptedSheetIds},this.observer.observe(t.el,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}))}prepareAdoptedStyleSheets(e){var e=(e=e===h.documentElement?h:e).adoptedStyleSheets,t={sheets:[],adoptedSheetIds:""};if(e){var i=[];window.di_sheet_count=window.di_sheet_count||0;for(const s of e){let e;C(s.di_id)&&(s.di_id=window.di_sheet_count++),this.scannedStylesheet[s.di_id]?e={id:s.di_id}:(e={id:s.di_id,disabled:s.disabled,media:s.media?s.media.mediaText:"",rules:Ai(s)},this.scannedStylesheet[s.di_id]={id:s.di_id,disabled:s.disabled,sheet:s}),i.push(s.di_id),t.sheets.push(e)}t.adoptedSheetIds=i.join(",")}return t}prepareDefaultDINode(e,t,i,s){t||(t=this.getAttributes(e.el,e.n,Array.prototype.slice.call(e.el.attributes)))&&(e.a=t),i||(t=this.getProperties(e))&&(e.p=t);i=s?e.i:e.ti,t=e.el===e.el.shadowRoot?void 0:e.el.shadowRoot,s=this.getChildNodes(Array.prototype.slice.call(e.el.childNodes),t,e.el.di_in_body||e.n===p.body,e.el.di_in_shadow,i),s&&(e.c=s),t=this.diNodePrepareAdditionalFn[e.n];t&&t.call(this,e)}prepareHTMLDINode(e){var t=this.prepareAdoptedStyleSheets(e.el);t.sheets.length&&(e.p={adoptedSheetList:JSON.stringify(t.sheets)}),this.documentDINodes[e.i]={diNode:e,adoptedSheetIds:t.adoptedSheetIds}}prepareObjectDINode(t){var i=this.getAttributes(t.el,t.n,Array.prototype.slice.call(t.el.attributes),[u.src,u.srcdoc,u.value])||{},e=this.getProperties(t)||{},s=t.el.getAttribute(u.data);let r=!0;if(s){let e="";var n=t.el.getAttribute(u.type),a=t.el.hasAttribute(di);(n&&0===n.toLowerCase().indexOf("image")||a)&&(r=!1,e=E.resourceModule.qualifyURL(s)),i.data=e}r&&delete i.type,t.n===p.object&&(t.h=t.el.innerHTML),t.el.hasAttribute("data-di-pvid")?delete t.na:t.n===p.iframe&&(i.class=(i.class||"")+" di-iframe"+hi,i.style=Pi(t.el.style.cssText,i),t.na=p.div),Ni(e,t,"p"),Ni(i,t,"a")}prepareStyleDINode(e){var t,i,s=this.getAttributes(e.el,e.n,Array.prototype.slice.call(e.el.attributes))||{},r=this.getProperties(e)||{};let n;e.n===p.link?e.el.di_style_res||e.el.sheet?n=e.el.di_style_res&&!e.el.sheet?e.el.di_style_res:this.styleScanner.processCssFn(e.el):T(e.el,"load",function(){e.el.setAttribute(ci,w())},this):n=this.styleScanner.processCssFn(e.el),C(n)?e.na=oi:(delete e.na,n.tooLarge&&(E.lstyle=!0),n.href?(e.na=p.link,s.type="text/css",s.rel="stylesheet",s.href=n.href,n.media&&(s.media=n.media),delete s.disabled):(n.content.length>Math.pow(2,10)&&(t=tt(n.content),(i=this.styleScanner.preparedInlineContent[t])?JSON.parse(i).fromDiId!==e.i&&(n.content=i):this.styleScanner.preparedInlineContent[t]=JSON.stringify({fromDiId:e.i})),e.h=n.content,e.na=p.style,delete s.type,delete s.rel,delete s.href),n.hasNode&&this.prepareDefaultDINode(e,!0),Ni(r,e,"p"),Ni(s,e,"a"))}prepareStyleLinkDINode(e){var t,i=this.getAttributes(e.el,e.n,Array.prototype.slice.call(e.el.attributes))||{},s=this.getProperties(e)||{};C(e.el.sheet)?(T(e.el,"load",()=>{e.el.setAttribute(ci,w())},this),T(e.el,"error",()=>{e.el.setAttribute(ci,w())},this),e.na=oi):null==(t=Di(e.el.sheet))||t.length?(delete e.na,Ni(s,e,"p"),Ni(i,e,"a")):e.na=oi}prepareLinkDINode(e){let t=this.prepareStyleLinkDINode;(t="blob:http"===(e.el.href||"").substr(0,9)?this.prepareStyleDINode:t).call(this,e)}prepareCanvasDINode(e){var t=this.getAttributes(e.el,e.n,Array.prototype.slice.call(e.el.attributes))||{},i=this.getProperties(e)||{},s=e.el.di_ResId,s=E.resourceModule.canvasList[s];t.class=(t.class||"")+" di-canvas",t.style=Pi(e.el.style.cssText,t),C(s)||(s.tainted?(E.tcanvas=!0,t.class=t.class+hi,e.na=p.div):(e.na=p.img,t.src=s.src||s.content)),Ni(i,e,"p"),Ni(t,e,"a")}prepareSVGDINode(e){var t,i=this.getAttributes(e.el,e.n,Array.prototype.slice.call(e.el.attributes))||{};Ni(this.getProperties(e)||{},e,"p"),Ni(i,e,"a"),e.ti?this.prepareDefaultDINode(e):(o._di_max_id[e.i]||(o._di_max_id[e.i]=0),e.rt=e.rt||!0,Hi(e.el,e.el),e.el.di_res_parent=e.el,e.el.di_html_res=e.el.di_html_res||{tries:0,done:0},this.prepareDefaultDINode(e,!1,!1,!0),t=Qe(i=e.clone(!0,e.i)),i&&t&&E.resourceModule.sendElResource(e,e.el,t),e.el.di_html_res.diNode=e.el.di_html_res.diNode||e.clone(!1,e.i),e.el.di_html_res.rootNode=e.el.di_html_res.rootNode||e.clone(!1))}prepareVideoDINode(e){e.el.di_event_added||(e.el.di_event_added=!0,T(e.el,"play",e=>{this.createPropertyPatch("play",e.target,"paused")},this),T(e.el,"pause",e=>{this.createPropertyPatch("pause",e.target,"paused")},this),T(e.el,"ratechange",e=>{this.createPropertyPatch(void 0!==e.target.playbackRate?e.target.playbackRate:1,e.target,"playbackRate")},this),T(e.el,"seeked",e=>{this.createPropertyPatch(e.target.currentTime,e.target,"currentTime")},this))}prepareTextDINode(e){var t;E.visible(e.el)?this.prepareDefaultDINode(e):(t=this.getAttributes(e.el,e.n,Array.prototype.slice.call(e.el.attributes)))&&(e.a=t)}getChildNodes(e,t,i,s,r){let n=[],a=0;var o=e.length;t?P.shadowsAsPatches?this.shadowBuffer.push({shadowRoot:t,inBody:i,inShadow:s,treeIndex:r,recursive:!0}):(n=new Array(o+1))[a++]=this.prepareTree(t,i,s,r,!0):n=new Array(o);for(const l of e)n[a++]=this.prepareTree(l,i,s,r,!0);return n.length?n:null}styleSheetDisabledObserverFn(){const s=this;Fe(this.styleDINodes,function(e){let t;var i=(t=(e.n===p.style?mi.STYLE:mi.LINK).d.getter)(e.el);null!=i&&e.p&&i!==e.p.d&&(s.createPropertyPatch(i,e.el,"d"),e.p.d=i)});Fe(this.scannedStylesheet,function(e){var t=e.sheet.disabled;null!=t&&t!==e.disabled&&(s.createPropertyPatch({sheetId:e.id,value:t},document.documentElement,"d"),e.disabled=t)})}adoptedStyleSheetObserverFn(){const s=this;Fe(this.documentDINodes,function(e){let t=e.diNode.el;e.diNode.n===p.html&&(t=document);var i=s.prepareAdoptedStyleSheets(t);i.adoptedSheetIds!==e.adoptedSheetIds&&(s.createPropertyPatch(JSON.stringify(i.sheets),e.diNode.el,"adoptedSheetList"),e.adoptedSheetIds=i.adoptedSheetIds)})}addDINodeDiffPatch(e,t,i){let s={i:t.i},r=1;var n;t.ti&&(s.ti=t.ti,r++),e.n!==t.n||e.na!==t.na?s=t:(e.h!==t.h&&(s.h=Si.getPatches(e.h,t.h)),e.rt!==t.rt&&(s.rt=t.rt),(n=this.getObjDiff(e.a||{},t.a||{}))&&(s.a=n),(n=this.getObjDiff(e.p||{},t.p||{}))&&(s.p=n),(n=this.getObjDiff(e.s||{},t.s||{}))&&(s.s=n),e.v!==t.v&&(s.v=Si.getPatches(e.v,t.v)),(n=this.getChildDiff(e.c||[],t.c||[],i))&&(s.c=n)),Object.keys(s).length>r&&i.push(s)}getObjDiff(e,t){var i={};for(const s of Object.keys(t))e[s]!==t[s]&&(_(t[s])&&10<t[s].length?i[s]=Si.getPatches(e[s],t[s]):i[s]=t[s]),delete e[s];for(const r of Object.keys(e))i[r]=null;return Object.keys(i).length?i:null}getChildDiff(i,s,r){var n=[];let e=i.length;for(;e--;)-1===this.findDINodeIndex(i[e].i,s)&&(n.push({p:e,r:1}),i.splice(e,1));for(let e=0,t=s.length;e<t;e++){var a=s[e],o=this.findDINodeIndex(s[e].i,i);-1===o?(n.push({p:e,a:[E.remoteStorage?E.serializer.serialize(this.utilities.removeId(a)[0],!0):a]}),i.splice(e,0,a)):(this.addDINodeDiffPatch(i[o],a,r),o!==e&&(n.push({p:o,m:e}),i.splice(e,0,i.splice(o,1)[0])))}return n.length?n:null}findDINodeIndex(t,e){return e.findIndex(e=>e.i===t)}getProperties(s){var e=mi[s.n];const r={};if(e){const n=this;return Fe(e,function(e,t){var i=e.getter(s.el);void 0!==i&&(r[t]=i),e.nodeList&&(n[e.nodeList][s.i]=s)}),Object.keys(r).length?r:null}}getAttributes(e,t,i,s=[]){var r={},n=s.length;for(const a of i)n&&-1!==s.indexOf(a.name)||this.prepareAttribute(a.name,a.value,t,e,r);for(const o of this.getAdditionalAttrs(t))o.o?r[o.n]=o.v:r[o.n]=r[o.n]||o.v;return e.value&&t===p.input&&(r.value=e.value),Object.keys(r).length?r:null}prepareAttribute(t,e,i,s,r){if(!this.ignoreAttr(t)&&!R.inValAttr.test(t)){var i=this.getAttrModifier(i,t),n=this.getAttrMutator(t);if(i&&(e=i.call(this,e,s)),n)try{e=L(n,E)(e,s)}catch(e){n.errored||(k("DXA warning: Configuration error in "+t+" callback within the Attribute Mutation Callback.",e.toString()),n.errored=!0)}return r&&(r[t]=e),e}}getAdditionalAttrs(e){return Ci[e]||[]}ignoreAttr(e){return d.dAR&&d.dAR.test(e)||Ti[e]}getAttrModifier(e,t){return(this.attrModifiers[e]||{})[t]||this.attrModifiers[t]}getAttrMutator(e){return P.attrMutationCallback?P.attrMutationCallback[e]:void 0}qualifyURL(e,t){return E.resourceModule.qualifyURL(e,t)}qualifySrc(e,t,i){t=t.getAttribute("data-di-alt-src");return E.resourceModule.qualifyURL(t||e,i)}qualifySrcSet(e){var t=[];for(const i of Mi(e))t.push((E.resourceModule.qualifyURL(i.u,{prefix:!0})+" "+i.d).trim());return t.join(", ")}prepareCSS(e){return this.styleScanner.prepareCSS(e)}addShadowPatches(){if(this.shadowBuffer.length){for(const t of this.shadowBuffer){var e=this.prepareTree(t.shadowRoot,t.inBody,t.inShadow,t.treeIndex,t.recursive),e=e.clone(!0,e.ti),e={i:t.shadowRoot.host.di_dom.i,c:[{p:0,a:[E.remoteStorage?E.serializer.serialize(e,!0):e]}]};E.jCur.jP.push(e)}this.shadowBuffer=[]}}}function Vi(e){E.scanCanvasList(g.search(P.canvasSelector)),setTimeout(()=>{yt("DIJSToDIExt",{response:Qe(h.documentElement.di_dom.clone()).replace(/\[DI_PROXY_URL\]/g,"").replace(/(https?)\//g,"$1://")}),e&&e()},1e3)}const Bi=class{static addListener(){h.documentElement.hasAttribute("data-di-loaded")||(h.documentElement.setAttribute("data-di-loaded",1),h.addEventListener("DIExtToDIJS",function(e){e&&"getDIDOMForHeatmap"===e.detail&&(P.proxyV2?h.documentElement.di_dom?Vi():((e=new Ui).observe(h.documentElement),Vi(e.disconnect.bind(e))):yt("DIJSToDIExt",{response:!1}))},!1))}};function qi(e,t){let i=2;return e<2?i=0:e===t&&(i=1),i}function Gi(e){let t=!1;for(var i;!t&&Z(e)&&!ke(e);)i=Q(e,"position"),t="fixed"===i||"sticky"===i,e=e.parentNode;return t}function Xi(e){return e-e%50}function Wi(e){return e-e%3+1}(us=bi=bi||{}).activateDXAWidget=function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://widget.decibelinsight.net/index.js",e.addEventListener("load",function(){var e=document.createElement("div");e.className="react-container",document.querySelectorAll("body")[0].appendChild(e),window.dcl&&window.dcl.bridge(window.dcl.RealtimeDxsWidgetContainer,e)}),document.querySelector("head").appendChild(e)},us.activateHeatmap=function(e){var t;return e&&window.URLSearchParams&&e instanceof URLSearchParams&&(t=e.get("appHost"),e=e.get("appVersion"),t=`https://${-1<t.indexOf("localhost")?"dev-kappa-app.decibelinsight.net":t}/js/hm.js`+(e?"?_="+e:""),(e=document.createElement("script")).type="text/javascript",e.src=t,e.async=!0,e.addEventListener("load",function(){clearInterval(window.dxaHmInterval)}),document.body.appendChild(e),document.body.contains(e))&&e.src===t?void 0:"activation failed"};var zi,Ii=class{constructor(){this.fixEl=null,this.fixPos={top:0,left:0},this.focusTime=0,this.hasFocus=h.hasFocus(),this.lInt=w(),this.hvDur={},this.hEl=A.empty,this.hInt=null,this.lHov=w(),this.hto=3e3,this.mX=0,this.mY=0,this.vpW=null,this.vpH=null,this.vOT=null,this.vOL=null,this.z=null,this.cto=3e4,this.scDur={},this.srC=0,this.svT=null,this.svL=null,this.svB=null,this.asvT=null,this.asvL=null,this.asvB=null,this.lst=0,this.lsl=0,this.isS=!1,this.sTi=null,this.sX=0,this.sY=0,this.clX=0,this.clY=0,this.clT=0,this.clK=A.empty,this.tF=0,this.oCl={x:0,y:0,t:0,ti:0},this.pT=0,this.tTi=0,this.tX=null,this.tY=null,this.cP=!1,this.cC=!1,this.pDs=0,this.pDe=0,this.hCTTime=0,this.contextElement=null,this.pGoal=!1,this.jSel=A.empty,this.wTi=null,this.wld=null,this.dO=0,this.or=A.empty,this.orS=!1,this.curW=0,this.gList=[],this.scrollEvent=_t(this._scrollEvent,500),this.scrollEventContexed=_t(this._scrollEventContexed,500),this.searchFixEl=_t(this._searchFixEl,1e3)}pointerUp(e){var t;e=ei(e),this.lInt=w(),E.canCollect()&&(this.isS||(t=this.makePointerEvent(e),this.handleClickSwipe(e,t),this.handlePinch(t),this.clearClickData(),t.p&&t.t&&this.pT--,this.getSelection(),this.tF=0),this.hasFocus=!0)}pointerDown(e){var t,i;e=ei(e),this.lInt=w(),E.canCollect()&&(this.tF=0,t=e.touches,i={single:!1,double:!1},(e=this.makePointerEvent(e)).p&&e.t&&this.pT++,this.processTouchCount(e,t,i),this.isS||(i.single?(this.cC=!0,this.tTi=w(),this.tX=e.x,this.tY=e.y):i.double&&!e.p&&(this.cP=!0,this.cC=!1,this.pDs=f.sqrt(f.pow(t[1].pageX-t[0].pageX,2)+f.pow(t[1].pageY-t[0].pageY,2)))),this.hasFocus=!0)}pointerCancel(e){e=ei(e),E.canCollect()&&(this.tF=0,e=this.makePointerEvent(e),this.cC=!1,e.p&&e.t&&this.pT--,this.tX=null,this.tY=null,this.tTi=0,this.cP=!1,this.pDs=0,this.pDe=0)}pointerMove(e){var t;e=ei(e),this.lInt=this.lHov=w(),E.canCollect()&&(t=this.makePointerEvent(e),e=e.touches,t.m&&(this.mX=t.x,this.mY=t.y,this.hEl=this.getClElID(t.target)),this.cP&&t.t&&!t.p&&2===e.length&&(this.pDe=f.sqrt(f.pow(e[1].pageX-e[0].pageX,2)+f.pow(e[1].pageY-e[0].pageY,2))),this.hasFocus=!0)}getSelection(){let e=A.empty;var t=o.getSelection();E.isJ()&&o.getSelection&&(e=t.rangeCount?this.getSelectionRange(t):e)!==this.jSel&&(this.jSel=E.jCur.s=e)}getSelectionRange(e){let t=A.empty;var i,s,r,n;return e.getRangeAt&&(s=(i=e.getRangeAt(0)).startOffset,r=i.endOffset,i.startContainer===i.endContainer&&s===r||(n=Je(i,!0),t=He(i.startContainer)+":"+s+"|"+He(i.endContainer)+":"+r+"|"+f.floor(n.left)+A.comma+f.floor(n.top)+A.comma+f.ceil(n.right)+A.comma+f.ceil(n.bottom)+A.comma+e.toString().length)),t}handleClickSwipe(e,t){var i=w();i-this.hCTTime<50||(this.hCTTime=i,this.cC&&(f.abs(this.tX-t.x)<5&&f.abs(this.tY-t.y)<5?this.isClickEvent(t)&&(this.setClickData(t,e),this.pGoal&&this.processClick(t.target),this.sendClick(t.target)):!t.t||C(this.tX)||C(this.tY)||this.handleSwipe(t)))}handleSwipe(e){var t=e.x-this.tX,e=e.y-this.tY,i=f.abs(t),s=f.abs(e);let r;w()-this.tTi<=500&&(50<=i&&s<=i?r=t<0?A.l:A.r:50<=s&&i<=s&&(r=e<0?A.u:A.d),r)&&(E.jCur.tE=r)}handlePinch(e){let t;this.cP&&e.t&&!e.p&&(this.pDs&&this.pDe&&(1<this.pDs-this.pDe?t="i":this.pDs-this.pDe<-1&&(t="o"),t)&&(E.jCur.tE=t),this.cP=!1)}setClickData(e,t){var i=e.x,s=e.y;this.mX=i,this.mY=s,this.clX=i,this.clY=s,e.t?this.clT=3:C(t.which)?this.clT=qi(t.button,4):this.clT=qi(t.which,2),this.clK=this.setClickKey(t),this.hasFocus=!0}sendClick(e){var t=w(),i=this.getClElID(e),s=this.clX,r=this.clY,n={x:s,y:r},a=ee(e);Ne(s)&&Ne(r)&&(this.adjustClickHover(n,e),function(e,t){var i=e.ti-t.ti;let s;return s=100<i||2<f.abs(t.x-e.x)||2<f.abs(t.y-e.y)}(e={x:n.x,y:n.y,t:this.clT,ti:t},this.oCl))&&(this.oCl=e,n.x=Wi(n.x),n.y=Wi(n.y),E.isJ()?(Ae(E.jCur,{cX:s,cY:r,hX:n.x,hY:n.y,cT:this.clT,cE:i,n:1,tag:a,cK:this.clK,cF:this.tF}),E.addToJBuf(t)):E.postInfo("click",{clx:n.x,cly:n.y,clt:this.clT,ceid:i,tag:a}),this.searchFixEl(),!E.smo)&&E.indexItems()}processClick(e){if(e&&!lt(e)){for(const s of this.gList){var t,i;g.matchesSelector(e,s.sel)&&(t="g"+s.gid+s.sel,500<(i=w())-(this[t]||0))&&(this[t]=i,E.sendTrackedEvent(s.gid,s.val,s.valType,e))}this.processClick(e.parentNode||e.host)}}setClickKey(e){e=Ve(e),e=C(d.evtKeyCodes)?null:d.evtKeyCodes["f"+e];return e?e.str:A.empty}clearClickData(){this.cC=!1,this.tX=null,this.tY=null,this.tTi=0,this.cP=!1,this.pDs=0,this.pDe=0}getClElID(e){if(C(e))return A.empty;let t=I(e,"data-di-id");return C(t)&&(t=A.empty,lt(e)||(t=this.getClElID(e.parentNode||e.host))),t}onWheel(e){if(e=ei(e),E.isJ()){const t=this,i=1===f.max(-1,f.min(1,q.getWheelDelta(e)))?A.wu:A.wd;this.wld!==i&&null!==this.wld&&(E.jCur.tE=this.wld),clearTimeout(this.wTi),this.wTi=setTimeout(function(){E.jCur.tE=i,t.wld=null},250),this.wld=i,this.hasFocus=!0}}touchForceChanged(e){(e=ei(e)).changedTouches&&e.changedTouches.length&&(this.tF=f.max(this.tF,f.round(1e3*e.changedTouches[0].force)))}mouseForceChanged(e){e=ei(e),this.tF=f.max(this.tF,f.round(e.webkitForce/3*1e3))}processTouchCount(e,t,i){e.m?(i.single=!0,i.double=!1):e.t&&t.length?(i.single=1===t.length,i.double=2===t.length):e.p&&e.t&&(i.single=1===this.pT,i.double=2===this.pT)}keyDown(e){var t;e=ei(e),E.isJ()&&(t=Ve(e),this.setKeyPress(e.keyCode,d.evtKeyCodes["f"+t]),this.hasFocus=!0)}setKeyPress(e,t){t&&-1!==ot(e,t.keys)&&(E.jCur.kE=t.str+e,this.lInt=w())}handleBlur(){return this.hasFocus=!1}handleFocus(){return!(this.hasFocus=!0)}handleVisibilityChange(){let e;return typeof document.hidden!==A.undef?e=A.hidden:typeof document.msHidden!==A.undef?e=A.msHidden:typeof document.webkitHidden!==A.undef&&(e=A.webkitHidden),this.hasFocus=!document[e],!1}hoverIntervalFn(){var e,t;E.canCollect()&&(t=w(),e={x:this.mX,y:this.mY},this.adjustClickHover(e),this.hasFocus&&t-this.lHov<this.hto&&(this.srC++,t=Wi(e.x)+A.comma+Wi(e.y)+(this.hEl===A.empty?A.empty:A.comma+this.hEl),this.hvDur[t]=(this.hvDur[t]||0)+P.hoverThreshold),100<=this.srC)&&this.sendScroll()}resizeEvent(){var e;this.lInt=w(),E.canCollect()&&(e=nt(o),this.vpW=e.width,this.vpH=e.height,this.svT=Ct(o),this.svL=Et(o),this.svB=e.height+this.svT,this.contextElement&&(this.asvT=Ct(this.contextElement),this.asvL=Et(this.contextElement),this.asvB=e.height+this.asvT),this.calFixPos())}orientationChanged(){const e=this;this.orS?this.screenOrientationChanged():setTimeout(function(){e.dO=N(90!==f.abs(o.orientation))},100)}screenOrientationChanged(){var e=_(this.or)?this.or:this.or.type;this.dO=N(-1===e.indexOf(A.landscape))}oQueryObs(){var e;this.curW!==o.innerWidth&&(e=o.matchMedia(A.orientLandscape),this.orS?this.screenOrientationChanged():this.dO=N(!e.matches),this.curW=o.innerWidth)}_scrollEvent(){const e=this;var t=Ct(o),i=Et(o);let s;this.lInt=w(),this.isS||(this.sX=t,this.sY=i),this.isS=!0,clearTimeout(this.sTi),this.sTi=setTimeout(function(){e.isS=!1,e.sX=0,e.sY=0},250),E.canCollect()&&(this.svT=t,this.svL=i,this.svB=at(o)+this.svT,this.lst!==this.svT&&(s=0-this.lst,this.lst=this.svT,s+=this.lst,this.mY=f.round(this.mY+s)),this.lsl!==this.svL)&&(s=0-this.lsl,this.lsl=this.svL,s+=this.lsl,this.mX=f.round(this.mX+s))}_scrollEventContexed(){this.lInt=w(),this.asvT=Ct(this.contextElement),this.asvL=Et(this.contextElement),this.asvB=this.vpH+this.asvT}detectScroll(){var e=w();let t;this.hasFocus&&e-this.lInt<this.cto&&(this.srC++,t=this.contextElement?Xi(this.asvT)+A.comma+Xi(this.asvB):Xi(this.svT)+A.comma+Xi(this.svB),this.scDur[t]=(this.scDur[t]||0)+E.cIntT,this.focusTime+=E.cIntT)}sendScroll(e){let t;var i={},s={};for(t in this.hvDur)D(this.hvDur,t)&&this.hvDur[t]>=P.minHoverTime&&(i[t]=this.hvDur[t],delete this.hvDur[t]);for(t in this.scDur)D(this.scDur,t)&&750<=this.scDur[t]&&(s[t]=this.scDur[t],delete this.scDur[t]);E.postInfo(A.scrollinfo,{ft:this.focusTime,scroll:s,hover:i},{onExit:e||null,time:this.lInt}),this.focusTime=0,this.srC=0}adjustClickHover(e,t){var i=this.fixPos;t&&Gi(t)?(e.x-=Et(o),e.y-=Ct(o)):(Ne(i.left)&&Ne(i.top)&&(e.x=f.round(e.x-i.left),e.y=f.round(e.y-i.top)),this.contextElement&&(e.x+=Et(this.contextElement),e.y+=Ct(this.contextElement))),this.contextElement&&(t=Je(this.contextElement),e.x-=t.left,e.y-=t.top)}setFixedEl(){_(P.fixedElementSelector)&&(P.fixedElementSelector!==A.empty?"string"==typeof P.fixedElementSelector&&(P.fixedElementSelector=P.fixedElementSelector.split("|")):P.fixedElementSelector=[]),this.searchFixEl()}_searchFixEl(){var e;for(const i of P.fixedElementSelector)if((e=g.search(i)).length){this.fixEl=e[0];break}this.calFixPos();const t=this;clearTimeout(this.searchFixedTi),this.searchFixedTi=setTimeout(L(function(){t.searchFixEl()},window[window.DecibelInsight]),5e3)}calFixPos(){var e=Je(this.fixEl);e&&!C(e.left)&&(this.fixPos=e,Gi(this.fixEl)?(this.fixPos.top-=Ct(o),this.fixPos.left-=Et(o)):this.contextElement&&(e=Je(this.contextElement),this.fixPos.top=this.fixPos.top+Ct(this.contextElement)-e.top,this.fixPos.left=this.fixPos.left+Et(this.contextElement)-e.left))}isClickEvent(e){return!ke(e.target)&&(!this.isS||f.abs(this.sX-Ct(o))<5&&f.abs(this.sY-Et(o))<5)}makePointerEvent(e){var t={};return t.p=-1<e.type.indexOf(A.pointer),t.target=ti(e),t.p?(t.t=e.pointerType===A.touch,t.m=!t.t):(t.t=-1<e.type.indexOf(A.touch),t.m=-1<e.type.indexOf(A.mouse)),t.m||t.p?x(e.pageX)?(t.x=e.clientX+ze(A.Left),t.y=e.clientY+ze(A.Top)):(t.x=e.pageX,t.y=e.pageY):t.t&&(e=this.getTouch(e),t.x=e.pageX,t.y=e.pageY),t.x=f.round(t.x),t.y=f.round(t.y),t}getTouch(e){let t={pageX:0,pageY:0};return e.changedTouches&&e.changedTouches.length?t=e.changedTouches[0]:e.touches&&e.touches.length?t=e.touches[0]:x(e.pageX)||(t=e),t}contextMenu(e){e=ei(e),E.canCollect()&&0<this.tTi&&!C(this.tX)&&!C(this.tY)&&(this.setClickData({x:this.tX,y:this.tY,t:!1},e),this.sendClick(ti(e)),this.clearClickData())}setInitFields(){this.contextElement=g.search(P.altContextSelector)[0],this.setFixedEl();var e=nt(o);this.vpW=e.width,this.vpH=e.height,A.visualViewport in o?this.visualViewportEvent():(this.z=1,this.vOT=0,this.vOL=0),this.svT=Ct(o),this.svL=Et(o),this.svB=this.vpH+this.svT,this.contextElement&&(this.asvT=Ct(this.contextElement),this.asvL=Et(this.contextElement),this.asvB=this.vpH+this.asvT),this.mX=f.round(this.vpW/2),this.mY=f.round(this.vpH/2)}addInteractionEvents(){this.contextElement&&T(this.contextElement,A.scroll,this.scrollEventContexed,this,!0),T(h.body,A.scroll,this.scrollEvent,this,!0),T(o,A.scroll,this.scrollEvent,this,!0),T(o,A.resize,this.resizeEvent,this,!0),A.visualViewport in o&&(T(o.visualViewport,A.scroll,this.visualViewportEvent,this,!0),T(o.visualViewport,A.resize,this.visualViewportEvent,this,!0)),this.addClickEvents(),T(o,A.blur,this.handleBlur,this),T(h,A.blur,this.handleBlur,this),T(o,A.focus,this.handleFocus,this),T(h,A.focus,this.handleFocus,this);let e;typeof document.hidden!==A.undef?e=A.visibilitychange:typeof document.msHidden!==A.undef?e=A.msvisibilitychange:typeof document.webkitHidden!==A.undef&&(e=A.webkitvisibilitychange),T(h,e,this.handleVisibilityChange,this),this.hInt=setInterval(L(this.hoverIntervalFn,this),P.hoverThreshold)}addClickEvents(e){let t,i,s,r,n=!1;var a=e||h;A.ontouchstart in o?(i=A.touchstart,t=A.touchend,s=A.touchmove,r=A.touchcancel,n=!0):H.msPointerEnabled&&!H.pointerEnabled?(i=A.MSPointerdown,t=A.MSPointerup,s=A.MSPointermove,r=A.MSPointercancel):H.pointerEnabled&&(i=A.pointerdown,t=A.pointerup,s=A.pointermove,r=A.pointercancel),i&&(T(a,i,this.pointerDown,this,n),T(a,t,this.pointerUp,this,n),T(a,s,this.pointerMove,this,n),T(a,r,this.pointerCancel,this,n)),A.ontouchstart in o&&d.isAC||(T(a,A.mousedown,this.pointerDown,this),T(a,A.mouseup,this.pointerUp,this),T(a,A.mousemove,this.pointerMove,this)),T(a,A.contextmenu,this.contextMenu,this),e||this.addForceEvent()}visualViewportEvent(){var e,t,i;E.canCollect()&&(e=o.visualViewport,this.z=(t=e.scale,0<(i=6)?(i=Math.pow(10,i),Math.round(t*i)/i):Math.round(t)),this.vOT=f.max(0,f.round(e.offsetTop)),this.vOL=f.max(0,f.round(e.offsetLeft)),i=nt(o),this.vpW=i.width,this.vpH=i.height)}addForceEvent(){A.ontouchforcechange in h&&T(h,A.touchforcechange,this.touchForceChanged,this),A.onwebkitmouseforcechanged in h&&T(h,A.webkitmouseforcechanged,this.mouseForceChanged,this)}addJourneyEvents(){E.j&&(T(h,A.keydown,this.keyDown,this),T(h,A.keyup,this.getSelection,this),T(h,q.getWheelEvent(),this.onWheel,this,!0),this.or=screen.orientation||screen.mozOrientation||screen.msOrientation,this.orS=!C(this.or),A.onorientationchange in o?(T(o,A.resize,this.orientationChanged,this),this.orientationChanged()):A.matchMedia in o&&(T(o,A.resize,this.oQueryObs,this),this.oQueryObs()))}};const Ji={comparison:"valueComp",location:"location"},$i={string:"string",function:"function",object:"object",undefined:"undefined"},Yi={once:"once",replace:"replace"},Qi={domSelector:"dom-selector",jsVariable:"js-var",urlParameter:"url-param",gtmVariable:"gtm-var"},Ki={change:"change",click:"click",gtmEvent:"gtm-event",hashChange:"hashchange",load:"load",submit:"submit"},Zi={addEvent:{element:{paramType:"object",required:!0},eventType:{paramType:"string",required:!0},handler:{paramType:"function",required:!0},context:{paramType:"object",required:!0},passive:{paramType:"boolean",required:!1}},ajax:{url:{paramType:"string",required:!0},options:{paramType:"object",required:!1},successCallback:{paramType:"function",required:!1},failCallback:{paramType:"function",required:!1}},bindGoalEvents:{goalList:{paramType:"object",required:!0}},canCollect:{featureFlag:{paramType:"number",required:!1}},closest:{el:{paramType:"object",required:!0},selector:{paramType:"string",required:!0}},dataRetention:{state:{paramType:"boolean",required:!0}},enableRealTime:{},forIn:{obj:{paramType:"object",required:!0},callback:{paramType:"function",required:!0},thisArg:{paramType:"object",required:!1}},formSubmitted:{formNodeSel:{paramType:"string|object",required:!0},event:{paramType:"object",required:!0}},getAttribute:{node:{paramType:"object",required:!0},attrName:{paramType:"string",required:!0}},getCookie:{cookieName:{paramType:"string",required:!0}},getDIDOMId:{el:{paramType:"object",required:!0}},getXPath:{el:{paramType:"object",required:!0}},getLeadId:{options:{paramType:"object",required:!1}},getLS:{key:{paramType:"string",required:!0}},getNodeName:{el:{paramType:"object",required:!1}},getQualifiedSelector:{el:{paramType:"object",required:!0},indexCounter:{paramType:"number",required:!1}},getSS:{key:{paramType:"string",required:!0}},getStyle:{el:{paramType:"object",required:!0},cssProperty:{paramType:"string",required:!1}},handleException:{tag:{paramType:"string",required:!0},e:{paramType:"object",required:!0},type:{paramType:"object",required:!1},message:{paramType:"object",required:!1}},hash:{str:{paramType:"string",required:!1}},hasKey:{obj:{paramType:"object",required:!0},key:{paramType:"string|number",required:!0}},sendApplicationError:{error:{paramType:"object|string",required:!0},useAsSelector:{paramType:"boolean",required:!0}},sendCustomDimension:{data:{paramType:"object|array|string",required:!0},value:{paramType:"string|number|boolean|object",required:!0},valueIsParam:{paramType:"boolean|number",required:!0}},sendHTTPError:{code:{paramType:"string|number",required:!0}},sendPageGroup:{groupName:{paramType:"string|object",required:!0},dataLayerId:{paramType:"number",required:!0}},sendTrackedEvent:{name:{paramType:"string|number|object",required:!0},value:{paramType:"number|object",required:!1},valueType:{paramType:"string|object",required:!1},el:{paramType:"object",required:!1},pageUrl:{paramType:"string|object",required:!1}},trackPageView:{urlToLoad:{paramType:"string|object",required:!0},params:{paramType:"object",required:!0},internal:{paramType:"boolean|number",required:!0}},updateUserId:{id:{paramType:"object|string|number",required:!0}}},es=/(?:\[(["']?)(.+?)\1\])|(?:\.?([^.\n\[\]]+)\.?)/g,ts=/^dataLayer\[ *[0-9]+ *\]/;function is(e,t){var i,s,r,n=function(){var t=g.search("nav"),i=g.search("ul:not(ul ul, nav ul)");for(let e=0;e<i.length;e++){var s=i[e];g.search("li:has(>a)",s,!0).length===s.children.length&&t.push(s)}return t}(),a=[p.img,p.input,p.select,p.textarea,p.a,p.button].join(",");for(const c of n.concat(g.search(a))){var o=nt(c),l=Je(c,!1,o);if(o.width&&o.height){var h=c.nodeName===p.img?(i=o.width,s=o.height,r=l,.02<i*s/t?[Math.floor(r.left),Math.floor(r.top),Math.ceil(r.left+i),Math.ceil(r.top+s)]:null):[Math.floor(l.left),Math.floor(l.top),Math.ceil(l.left+o.width),Math.ceil(l.top+o.height)];if(!C(h))switch(c.nodeName){case p.img:e.img.push(h);break;case p.a:case p.button:e.link.push(h);break;case p.input:case p.select:case p.textarea:e.fields.push(h);break;case p.ul:case p.li:case p.nav:e.nav.push(h)}}}}function ss(e,t,i,s,r,n){var a=e.textContent.trim().length;return a&&(t.selectNodeContents(e),(e=t.getClientRects()).length)&&(t=function(e,t,i,s,r){let n=[],a=9999999,o=9999999,l=0,h=0,c,d;for(const p of e)a=Math.min(a,p.left),o=Math.min(o,p.top),l=Math.max(l,p.right),h=Math.max(h,p.bottom),c=Math.abs(l-a),d=Math.abs(h-o);var e=20<c&&20<d&&5<s,u=c*d;return n=s/u<.007&&.002<u/r&&e?[Math.floor(a+t),Math.floor(o+i),Math.ceil(l+t),Math.ceil(h+i),s]:n}(Array.prototype.slice.call(e),i,s,a,r)).length&&n.push(t),a}function rs(e,t){const i=document.createRange(),s=[],r=ze("Left"),n=ze("Top");let a=0;function o(e){for(e=e.firstChild;e;)e.nodeType===m.TEXT?a+=ss(e,i,r,n,t,s):e.nodeType===m.ELEMENT&&e.nodeName!==p.button&&e.nodeName!==p.a&&o(e),e=e.nextSibling}o(document.body),e.txt=function(t){var i=[];if(t.length){i.push(t.shift());for(let e=0;e<t.length;e++){var s=t[e],r=i[i.length-1];80<Math.max(0,Math.min(r[2],s[2])-Math.max(r[0],s[0]))/((Math.abs(r[2]-r[0])+Math.abs(s[2]-s[0]))/2)*100&&Math.abs(s[1]-r[3])<30?(r[0]=Math.min(r[0],s[0]),r[1]=Math.min(r[1],s[1]),r[2]=Math.max(r[2],s[2]),r[3]=Math.max(r[3],s[3]),r[4]+=s[4]):i.push(s)}}return i}(s),e.charArea=a?Math.round(t/a):0}function ns(e){return Math.abs(e)<10?(e<0?"-":"")+"0"+Math.abs(e):""+e}function as(){var e=P.curTime?1e3*P.curTime:Math.min(Math.max(E.getPageTime(),1),7258118400),e=new Date(e);return Math.min(Math.max(e.getUTCFullYear(),1970),2200)+"-"+ns(Math.min(Math.max(e.getUTCMonth(),0),11)+1)+"-"+ns(Math.min(Math.max(e.getUTCDate(),1),31))}function os(e){let t=I(e,"data-di-res-id");return C(t)&&(t=tt(w()+"_"+f.random()),e.setAttribute("data-di-res-id",t),e.di_ResId=t),t}(zi||(zi={})).execute=function(e,t){Ht.process("hash",e,t)};const ls="di_res_list",hs="data-di-alt-src",cs="data-di-rand";function ds(){}var us={tag:"DecibelInsightAPI",init:!1,propType:fs.WEBSITE,phS:!1,pageBuff:2e3,originalBase:"",pC:0,indexElementsCounter:0,dC:0,d:[],q:[],tId:1,tHash:function(){let e=qe("di_tab_hash");var t=+qe("di_tab_active");return e&&!t||M("di_tab_hash",e=tt(w()+"_"+f.random())),M("di_tab_active",1),e}(),qs:Ze(),sId:null,wId:null,aId:null,leadId:null,pvId:null,optOut:!1,diLoc:"",xhrU:"",socU:"",eC:0,remoteStorage:!1,hashes:{},jspsf:null,lastPT:0,dSize:0,j:!1,jS:!x(i)&&"function"==typeof URL,dd:null,jRate:5,jIRate:5,jBuf:[],jCur:{jE:[],jsEO:{},fE:{},jP:[]},jLast:{},jInt:null,jfInt:null,jrInt:null,jLT:null,sList:[],apiCT:{},pN:1,pUrl:"",rUrl:"",lb:!1,tcanvas:!1,lstyle:!1,time:new Date,tZ:(new Date).getTimezoneOffset(),initPV:!1,lan:function(){let e="en";return H.userLanguage?e=H.userLanguage.replace("_","-"):H.language&&(e=H.language.replace("_","-")),e}(),ref:h.referrer,tUrl:null,pageUrl:null,pTitle:null,trackTitle:!0,aPT:!0,htmlColCB:[],htmlSent:!1,pageColCB:[],pageSent:!1,sResW:screen.width,sResH:screen.height,docW:0,docH:0,attrHL:{},cInt:null,cIntT:250,navSent:!1,pto:5e3,httpEr:0,smo:!x(i),obs:null,cdParam:[],dlList:[],features:a.NONE,dataColl:null,colcq:[],botDetected:!1,realTime:null,attachShadowHook:new t,attachCSSHook:new qt,dataLayerRulesModule:new class{constructor(){this.rules=[],this.tag="DataLayerRulesError",this.timesSent={},this.previousValues={},this.retryRules=[],this.maxAttempts=3600,this.ruleIdCounter=0}createListeners(t=[]){var e;this.rules.length<=0&&void 0===this.queueInterval&&(this.queueInterval=setInterval(()=>this.queueRetry(),500)),this.rules=this.rules.concat(t);const i=[];for(let e=0;e<t.length;++e){var s=t[e];s.id=++this.ruleIdCounter,"object"==typeof s.convertedEvent&&(s.event=s.convertedEvent,delete s.convertedEvent,s.LegacyDataLayer)?i.push({rule:s}):"object"==typeof s.event&&"object"==typeof s.action&&this.initialiseRule(s)}setTimeout(()=>{for(var{rule:e}of i)"object"==typeof e.action&&this.initialiseRule(e)},null!==(e=+P.datalayerTO)?e:0)}recreateOnLoadListeners(){for(let e=0;e<this.rules.length;++e){var t=this.rules[e];"object"==typeof t.event&&t.event.name===Ki.load&&(this.timesSent[t.id]=0,this.attemptRule(t))}}reset(){this.previousValues={}}initialiseRule(e){this.timesSent[e.id]=0;var t=this.getTargets(e);if(e.event.name===Ki.load&&this.attemptRule(e),e.event.name===Ki.gtmEvent){var i=window.dataLayer;const s=this;if(i){const r=i.push;i.push=function(){return arguments[0].event===e.event.target&&s.attemptRule(e),r.apply(this,arguments)}}}for(const n of t)T(n,e.event.name,()=>{this.attemptRule(e)},window,void 0,JSON.stringify(e))}addListenersForTargetsIn(t){for(let e=0;e<this.rules.length;++e){const i=this.rules[e];if(this.timesSent[i.id]=0,"object"==typeof i.event&&"object"==typeof i.action){let e=[];for(const s of t)e.push(...this.getTargets(i,s));for(const r of e=e.filter(e=>e!==window))T(r,i.event.name,()=>{this.validateRuleOptions(i)&&this.validateCondition(i.condition)&&this.executeAction(i)},window,void 0,JSON.stringify(i))}}}getTargets(e,t){let i=[];e=e.event.target;return typeof e===$i.undefined?i=[window]:typeof e===$i.string?i=g.search(e,t||window.document,!1):!C(e)&&e.variable&&e.variable.type===Qi.domSelector&&(i=g.search(e.variable.name,t||window.document,!1)),i}validateCondition(e){if(void 0===e)return!0;var t=e.value,i=e.reference;if(e.type===Ji.location){if(typeof t===$i.string&&!C(t))return-1!==location.href.indexOf(t)}else if(e.type===Ji.comparison){var s=typeof i===$i.string?this.getDeepVariableFromObject(i,window):this.getDLRVariable(i);if(void 0!==s)switch(e.operator){case"eq":return s==t;case"ne":return s!=t;case"gt":return t<s;case"gte":return t<=s;case"lte":return s<=t;case"lt":return s<t;case"urlregex":return new RegExp(t).test(s)}else y.processError(this.tag,new Error(`Variable ${i} does not exist in the scope`),v.ERROR,S.CAUGHT_ERROR)}return!1}executeAction(e){var t,{name:i,args:s}=e.action,r=window[window.DecibelInsight][i];let n=!0;if(e.event.name===Ki.load)for(const l in s){var a=s[l];if("object"==typeof a&&"object"==typeof a.variable&&"js-var"===a.variable.type){var o=this.getDeepVariableFromObject(a.variable.name,window);if(e.event.name===Ki.load){if((null==(t=this.previousValues[e.id])?void 0:t.value)===o)return!1;this.previousValues[e.id]={name:a.variable.name,value:o},n=!1}if(void 0===o)return!1}}if(typeof r===$i.function)try{return r.apply(window[window.DecibelInsight],this.orderNamedArguments(i,s)),void 0!==this.timesSent[e.id]&&++this.timesSent[e.id],n}catch(e){y.processError(this.tag,new Error("The following error occurred during DLR execution: \\n "+e),v.ERROR,S.CAUGHT_ERROR)}else y.processError(this.tag,new TypeError(`Action "${i}" is not a DXA API method.`),v.ERROR,S.CAUGHT_ERROR)}orderNamedArguments(e,t){let i=[];var s=Zi[e];if(typeof s!==$i.undefined)for(const n in s)if(D(s,n)){var r=s[n];let e=typeof t[n]===$i.object&&t[n].variable?this.getDLRVariable(t[n]):t[n];typeof e!==$i.undefined?(!isNaN(e)&&!isNaN(parseFloat(e))&&e<Math.pow(10,20)&&(e=+e),r.paramType.includes(typeof e)?i.push(e):(i.push(void 0),y.processError(this.tag,new TypeError(`Parameter ${n} of type ${r.paramType} received value of incorrect type: ${e}.`),v.ERROR,S.CAUGHT_ERROR))):r.required?(i.push(void 0),y.processError(this.tag,new TypeError(`Parameter ${n} of type ${r.paramType} is required.`),v.ERROR,S.CAUGHT_ERROR)):i.push(void 0)}return i.length?"sendPageGroup"===e&&i.push(!0):i=void 0,i}getDLRVariable(e){let t;switch(e.variable.type){case Qi.domSelector:var i=g.search(e.variable.name,window.document,!1);i.length&&(t=g.getText(i[0]).trim());break;case Qi.jsVariable:t=this.getDeepVariableFromObject(e.variable.name,window);break;case Qi.urlParameter:t=Ze()[e.variable.name];break;case Qi.gtmVariable:t=this.getFromDataLayer(e)}return t}getFromDataLayer(e){let t;var i=window.google_tag_manager;return i?i[e.variable.containerId]?t=i[e.variable.containerId].dataLayer.get(e.variable.name):y.processError(this.tag,new TypeError(`GTM container id ${e.variable.containerId} does not exist.`),v.ERROR,S.CAUGHT_ERROR):y.processError(this.tag,new TypeError("GTM object does not exist."),v.ERROR,S.CAUGHT_ERROR),t}validateRuleOptions(e){return void 0===e.action.frequency||e.action.frequency!==Yi.once||this.timesSent[e.id]<1}getDeepVariableFromObject(e,t){let i;e=function(e){es.lastIndex=0,e=e.replace(ts,"dataLayer");var t=[];let i=es.exec(e);for(;i;)i[2]?!isNaN(parseFloat(i[2]))&&isFinite(+i[2])?t.push(i[2].trim()):t.push(i[2]):i[3]&&t.push(i[3]),i=es.exec(e);return"window"===t[0]&&t.shift(),t}(e);if(0<e.length)try{i=function t(e,i){let s;for(const a of e){var r="dataLayer"===s;if(s=a,r&&Pe(i)){let e=!1;for(const o of i){var n=t([a],o);x(n)||(i=n,e=!0)}e||(i=void 0)}else{if(!("object"==typeof i&&a in i)){i=void 0;break}i=i[a]}}return i}(e,t)}catch(e){y.processError(this.tag,new Error("Failed to retrieve deeply-nested JS variable: \\n "+e),v.ERROR,S.CAUGHT_ERROR)}return i}queueRetry(){for(let e=0;e<this.retryRules.length;e++){var t=this.retryRules[e],i=t["rule"];if((this.attemptRule(i)||(++t.attempts,t.attempts>this.maxAttempts))&&(this.retryRules.splice(e,1),--e),this.retryRules.length<=0)return void clearInterval(this.queueInterval)}}attemptRule(e){var t;let i=!1;return this.validateRuleOptions(e)&&(this.validateCondition(e.condition)?(t=this.executeAction(e))?i=!0:!1===t&&this.addRuleToQueue(e):e.event.name===Ki.load&&"js-var"===(null==(t=null==(t=null==(t=e.condition)?void 0:t.reference)?void 0:t.variable)?void 0:t.type)&&void 0===this.getDeepVariableFromObject((null==(t=e.condition)?void 0:t.reference).variable.name,window)&&this.addRuleToQueue(e)),i}addRuleToQueue(e){for(const t of this.retryRules)if(t.rule.id===e.id)return;this.retryRules.push({rule:e,attempts:0})}},pageMetaModule:new class{getData(){var e,t={img:[],nav:[],fields:[],link:[],txt:[],charArea:0};return P.noPageMeta||(is(t,e=(e=nt(window)).width*e.height),rs(t,e)),t}},formsModule:new ai,interactionModule:new Ii,net:new $t,resourceModule:new class{constructor(){this.resB=[],this.resBLT=w(),this.topRes=[],this.resList=[],this.hrsList={svg:{sel:"svg",per:1}},this.canvasList={},this.puList={},this.puListB=[],this.elList={},this.exportedMethodNames=["qualifyURL","sendElResource","sendResource","scanCanvasList"]}exposeMethodsTo(e){if(c(e))for(const t of this.exportedMethodNames)l(this[t])&&(e[t]=this[t])}prepareHrsList(e){if(!C(e))try{var i=e.split("||");for(let e=0,t=i.length;e<t;e++){var s=i[e].split("|");this.hrsList[s[0]]={sel:s[0],per:+e[1]}}}catch(e){y.processError(E.tag,e,v.CONFIG)}}sendResource(e){P.noHTML||-1!==ot(e.name,this.resList)||(-1===ot(e.name,P.topResources)?this.resB.push({name:e.name,content:e.content}):this.resB.push({name:e.name,symlink:1}),100<w()-this.resBLT?setTimeout(L(this.sendResourceList,this),0):(clearTimeout(this.resBT),this.resBT=setTimeout(L(this.sendResourceList,this),100)),this.resList.push(e.name),M(ls,Qe(this.resList)))}sendResourceList(){clearTimeout(this.resBT),E.postInfo("resourceList",this.resB,{extraParam:"&date="+as()}),this.resB=[],this.resBLT=w()}setHtmlResSelector(t,i){if(Kt(t)){t=t.replace(R.trimSpCom,"");let e=this.hrsList[t];if(C(e))e={per:+i,sel:t},C(i)||(this.hrsList[t]=e,this.scanHTMLResFn(e));else if(C(i)){delete this.hrsList[t];for(const r of g.search(t)){s=void 0;var s=r;for(const n of Array.prototype.slice.call(s.childNodes))delete n.di_res_parent,Hi(n);delete r.di_res_parent,delete r.di_html_res}}else+i!==e.per&&(e.per=+i,e.reset=!0,this.scanHTMLResFn(e))}}scanHTMLRes(){Fe(this.hrsList,this.scanHTMLResFn,this)}scanHTMLResFn(e){for(const i of g.matches(":not([data-di-res-id] *)",g.search(e.sel))){if(!i.di_dom)return;var t=i.di_html_res;t?this.diffHTMLRes(i,t,e):(Hi(i,i),this.scanCanvas(i),(i.di_res_parent=i).di_html_res={conf:e,tries:0,done:0,diNode:i.di_dom.clone(!1,i.di_dom.i)},i.di_dom.rt&&(i.di_html_res.rootNode=i.di_dom.clone(!1)))}e.reset=!1}diffHTMLRes(e,t,i){t.conf||(t.conf=i),i.reset&&(t.done=0,t.tries=0);var i=t.done/t.tries;t.tries++,!isNaN(i)&&i>t.conf.per||(t.changed&&(this.scanCanvas(e),E.dd||(E.dd=new Ui),t.rootNode&&(i=e.di_dom.clone(!1),E.dd.addDINodeDiffPatch(t.rootNode,i,E.jCur.jP),t.rootNode=i),(i=e.di_dom.clone(!1,e.di_dom.i)).i=e.di_dom.i,E.dd.addDINodeDiffPatch(t.diNode,i,E.jCur.jP),t.diNode=i,t.changed=!1),t.done++)}scanCanvas(e){var t;C(P.canvasSelector)||(C(t=ee(e))?this.scanCanvasList(g.matches(":visible:inview:not([data-di-res-id] canvas)",g.search(P.canvasSelector))):t!==p.lowercaseSvg&&this.scanCanvasList(g.matches(":visible:inview",g.search(P.canvasSelector,e,!1))))}scanCanvasList(e){var t=e.shift();t&&(this.scanCanvasFn(t),setTimeout(()=>{this.scanCanvasList(e)},0))}scanCanvasFn(t){const i=os(t);let s,r=!1,e=!1;const n=P.canvasFormat||"jpeg";try{s=C(I(t,hs))?t.toDataURL("image/"+n,.5):(e=!0,this.qualifyURL(I(t,hs)))}catch(e){s="",r=!0}let a=this.canvasList[i];!C(a)&&a.content===s||(a={id:i,tainted:r,content:s},r||e||!E.canCollectResource()?(this.canvasList[i]=a,t.setAttribute(cs,w())):zi.execute(s,e=>{a.name=e+"-"+s.length+"."+n,a.src=E.rUrl+a.name,this.sendResource(a),this.canvasList[i]=a,t.setAttribute(cs,w())}))}qualifyURL(e,t){let i="";var s=t instanceof HTMLElement?t:null;if(t=Ae({},t),""===(e=Me(e))||"#"===e.charAt(0))return e;if(-1!==(e=function(e){let t="";if(_(e)){var i=P.originalBase||document.baseURI||document.location.href;try{var s=new URL(e,i);t=s.origin+"/"===s.href?s.origin:s.href}catch(e){}}return t}(e)).indexOf("#")){var r=e.split("#");if(0===n.href.indexOf(r[0]))return i="#"+r.slice(1).join("#")}if(0===n.href.indexOf(e))i="";else if(0===e.indexOf(E.pUrl))i=e;else if(e.startsWith("blob:http")&&s instanceof HTMLImageElement)try{let e=document.createElement("canvas");e.width=s.naturalWidth,e.height=s.naturalHeight,e.getContext("2d").drawImage(s,0,0),i=e.toDataURL(),e=void 0}catch(e){}else e.startsWith("data:")?i=this.qualifyDataURL(e,t):R.protR.test(e)&&(i=this.qualifyStandardURL(e,t));return i}qualifyStandardURL(e,t){(e=(e=l(P.optimizeURLCallback)?L(P.optimizeURLCallback,this)(e):e).replace(R.urlFix,"").replace(R.protR,"$1/"))&&!function(e){let t;if(0===e.indexOf("http/"))t=5;else{if(0!==e.indexOf("https/"))return;t=6}var i=(e=e.substring(t,e.indexOf("/",t))).split(".");if(!(2<i.length))return P.blacklisted[e];for(let e=0;e<i.length-1;++e){var s=i.slice(-e-2).join(".");if(P.blacklisted[s])return 1}}(e)?this.addToPUList(e):e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";let i="";return(i=t.prefix?E.remoteStorage?"[DI_PROXY_URL]":E.pUrl:i)+e}qualifyDataURL(e,t){return e.length>P.minResourceSize&&!t.noProxy&&(E.canCollectResource()?e=this.resourceProxy(e):E.remoteStorage||(E.lb=!0,e="")),e}resourceProxy(e){var t=e.match(R.dU);return C(t)||(t={content:e,name:tt(e)+"-"+e.length+"."+t[1]},this.sendResource(t),e=E.rUrl+t.name),e}addToPUList(e){E.canCollect()&&!this.puList[e]&&(this.puList[e]=!0,this.puListB.push(e),10<=this.puListB.length)&&this.sendProxyUrl()}sendProxyUrl(e){!P.noHTML&&E.canCollect()&&this.puListB.length&&E.postInfo("proxyUrls",{prefix:E.pUrl,items:this.puListB},{onExit:e}),this.puListB=[]}loadResList(){var e;d.hasStor&&!C(e=qe(ls))&&(this.resList=bt(e))}sendElResource(e,t,i){var s=os(t),r=this.elList[s];C(r)&&(r={id:s,content:i},E.canCollectResource()&&i.length>P.minResourceSize?(r.name=tt(i)+"-"+i.length+".txt",r.src=E.rUrl+r.name,e.rt=r.src,this.sendResource(r)):e.rt=i,this.elList[s]=r,t.setAttribute(cs,w()))}trackCanvas(e){if(E.j){_(e)?e=g.search(e):Pe(e)||(e=[e]);for(const t of g.matches(":visible",e))this.scanCanvasFn(t)}}},unloadInProgress:!1,networkSpeedCollection:new class{constructor(){this.downSpeed=0,this.upSpeed=0,this.upSize=0,this.upTime=0,this.collectedPackages=0,this.hasSentData=!1,this.collectResourceTimingSpeed(),this.scheduleCollectedData()}collectResourceTimingSpeed(s=15){setTimeout(()=>{let e=0,t=0;for(const i of window.performance.getEntries())0<i.transferSize&&1e3<i.decodedBodySize&&(e+=i.encodedBodySize,t+=i.responseEnd-i.fetchStart);this.downSpeed=e/(t/1e3),e<1e4&&0<--s&&this.collectResourceTimingSpeed(s)},500)}collectWSSNetworkSpeed(e,t,i){i-=t,this.upSize+=e.size,this.upTime+=i,t=this.upSize/(this.upTime/1e3);this.upSpeed=t,++this.collectedPackages}sendCollectedData(){this.hasSentData=!0;var e=8*this.downSpeed/1e3,t=8*this.upSpeed/1e3;E.postInfo("netSpeed",{dSpeed:(e&&e!==1/0?e:0).toFixed(2),uSpeed:(t&&e!==1/0?t:0).toFixed(2)})}scheduleCollectedData(){setTimeout(()=>{this.collectedPackages?this.sendCollectedData():(this.scheduleCollectedData(),this.collectedPackages=0)},1e4)}},errorModule:new class{proxyOnError(){P.err=P.err||[],window.onerror&&-1!==window.onerror.toString().indexOf("_da_.err.push(arguments)")||(P.oldOnError=window.onerror,window.onerror=function(){P.err.push(arguments),P.oldOnError&&P.oldOnError.apply(window,Array.prototype.slice.call(arguments))})}validateError(e,t,i,s){return!R.erTest.test(e)&&""!==t&&(0<i||0<s)}sendApplicationError(e,t){if(E.canCollect(a.ERROR_TRACKING)&&!C(e))if(t)for(const s of g.matches(":visible",g.search(e))){var i=kt(g.getText(s));C(i)||E.postInfo("applicationerror",{error:i})}else E.postInfo("applicationerror",{error:e})}sendHTTPError(t,i){if(E.canCollect(a.ERROR_TRACKING)&&!C(t)&&Ne(t))if(0===E.httpEr)E.httpEr=t,E.postInfo("httperror",{error:t});else if(t!==E.httpEr){let e=`DXA warning: HTTP error code (${E.httpEr}) has been collected for this pageview already. `;k(e+=i?`DXA thinks the http error code should be ${t}. Please make sure the error code sent earlier was correct or let DXA collect the http error code automatically.`:`Please contact support if you think the error code should be ${t}.`)}}processHTTPError(){var e,t;l(e=this.sendHTTPError.bind(this))&&o.performance&&l(o.performance.getEntriesByType)&&(t=o.performance.getEntriesByType("navigation")).length&&!x((t=t[0]).responseStatus)&&400<=t.responseStatus&&e(t.responseStatus,!0)}sendError(e,t,i,s,r){if(r){if(r.di_processed)return;r.di_processed=!0}Kt(e)&&this.sendErData(e,t,i,s),_(t)&&-1<t.indexOf("decibelinsight.net")&&y.processError(E.tag,r,v.ERROR,S.CAUGHT_ERROR),E.isJ()&&(e=function(e){let t=d.jEList.GenericError;return t=e&&(e=pt(e),d.jEList.hasOwnProperty(e))?d.jEList[e]:t}(r),E.jCur.jsE=(E.jCur.jsE||0)+1,E.jCur.jsEO[e]=D(E.jCur.jsEO,e)?E.jCur.jsEO[e]+1:1)}sendErData(e,t,i,s){E.canCollect(a.ERROR_TRACKING)&&E.eC<5&&(e=e.trim(),t=C(t)?"":t.split("?")[0],i=Ne(i)?i:0,s=Ne(s)?s:0,this.validateError(e,t,i,s))&&(E.eC++,E.postInfo("error",{error:e,errorUrl:t,line:i,column:s}))}},pagePerformanceModule:new class{constructor(){this.tries=0}sendPagePerformance(){var e=this.getPerformanceTiming();0<e.loadEventStart?(this.tpWaitTime=void 0,E.postInfo("perf",this.formatPerformanceTimingData(e))):(this.tries<150&&setTimeout(()=>this.sendPagePerformance(),100),this.tries++)}formatPerformanceTimingData(e){var t=e.navigationStart||e.unloadEventEnd||0;return{lid:E.leadId,conn:e.requestStart-t,down:e.responseEnd-e.requestStart,rend:e.loadEventStart-e.responseEnd,fire:this.tpWaitTime||e.domInteractive-t}}getPerformanceTiming(){let e={};var t;return c(o.performance)&&(c(o.performance.timing)?e=o.performance.timing:(t=o.performance.getEntriesByType("navigation")).length&&(e=t[0])),e}sendTrackedPagePerf(){C(this.tpWaitTime)||(E.postInfo("perf",{lid:E.leadId,conn:0,down:0,rend:0,fire:this.tpWaitTime}),this.tpWaitTime=void 0)}},start:function(){var e;e=this,E=e,G.startLogging();const t=this;function i(){return t.q.push(U.call(arguments))}i.Sizzle=Mt,i.DISearch=g,t.q=o[o.DecibelInsight]&&o[o.DecibelInsight].q?o[o.DecibelInsight].q:[],o[o.DecibelInsight]=i;for(const s of B)i[s]=function(e){return function(){return t.q.push([e].concat(U.call(arguments)))}}(s);if(l(P.preInit)&&(P.preInit(),Ae(P,W)),T(o,"pagehide",G.sendLogs,this),this._init()){t.q.push=function(e){return t.processQueue(e)};for(const r of t.q)t.processQueue(U.call(r));t.globalReady()}Bi.addListener()},_init:function(){if(this.diLoc=Ue(),this.features=P.account_flags_orig,this.dataColl=this.dataColl||new At,this.dataColl.active=this.dataColl.getExperienceStatus(),d.igQH=this.hasFeature(a.IGNORE_QUERY),this.processOptOut())return!1;if(this.sId=this.get_da_Session(),this.validateSId(),this.leadId=this.get_da_Lead(),this.wId=P.websiteId,this.aId=P.accountNumber,this.xhrU=`https://${d.cdn}/i/${this.aId}/da/`,this.socU=`wss://${d.cdn}/i/${this.aId}/ws/`,!this.canInit())return!1;if(this.setFirstPartyCookie(),this.resourceModule.exposeMethodsTo(this),G.setCollectLogs(!!P.collectLogs),R.bot.test(H.userAgent)){if(!P.processBot)return!1;this.botDetected=!0}return P.deepShadowRootSearch&&Object.defineProperty(g,"search",{value:g.deep}),P.fixDaVars(),this.resourceModule.prepareHrsList(P.htmlResSelector),this.prepareHashes(),this.pageUrl=st(),this.isDomainValid(P.domains)?(this.errorModule.proxyOnError(),this.indexElements(),this.startCacheExtender(),this.canCollect(a.PAGE)&&(this.init=!0,this.pTitle=this.getPageTitle(),this.interactionModule.setInitFields(),this.startObserver(),this.net.checkFailedBeacon(),this.aPT=!R.boolTrue.test(P.noAutoPageTrack),this.aPT)&&!R.boolTrue.test(I(h.body,"di-heatmap"))&&(this.runIntScripts("intPreScripts"),this.startColl()),!0):(this.domainInvalid(),!1)},canInit:function(){return!(C(this.sId)||C(this.wId)||C(this.leadId)||C(this.aId))},setFirstPartyCookie:function(){this.hasFeature(a.COOKIE)&&wt.setFirstPartyCookie()},processOptOut:function(){var e;return 1===parseInt(Xe("da_optOut"))?this.optOut=!0:"?da_optOut"===n.search&&(this.optOut=!0,Tt("da_optOut",1),(e=new Date).setFullYear(e.getFullYear(),e.getMonth()+120,e.getDate()),this.hasFeature(a.COOKIE)&&(h.cookie="da_optOut=1; expires="+e.toGMTString()+"; path=/"),alert("You have successfully opted out of DXA for this domain."),!0)},validateSId:function(){this.sId=this.sId||"";var e=this.sId.match(/\.([0-1])$/);e&&(this.jspsf=N(+e[1]),this.sId=this.sId.slice(0,-2)),M("_da_da_sessionId",this.sId)},domainInvalid:function(){k("DXA warning: "+n.hostname+" is not a valid domain for this account.");var e=this.q.findIndex(e=>"_hm"===e[0]);-1<e&&(this.switchToHeatmapMode(),C(e=this.q[e+1])||"ready"!==e[0]||rt(e[1]))},_hm:function(){this.switchToHeatmapMode()},switchToHeatmapMode:function(){this.dataColl.active=!1,this.stopObserver(),this.clearTimer(["cInt","hInt","jInt","jrInt","jfInt","fcInt","searchFixedTO"])},prepareHashes:function(){if(!C(P.hashes))for(const e of P.hashes.split(","))this.hashes[parseInt(e,36)]=1;this.remoteStorage=D(P,"hashes")},clearCookies:function(){this.postInfo("clearcookies"+this.getAccountPresent(),"",{imp:!0,process:!1})},initPageTrack:function(){this.interactionModule.addInteractionEvents();var e=P.dataLayerRules;this.dataLayerRulesModule.createListeners("string"==typeof e?bt(e):e),"onpagehide"in window?(T(o,"pagehide",this.onPageHide,this),T(o,"beforeunload",this.onBeforeUnload,this),T(o,"pageshow",this.onPageShow,this)):T(o,"unload",this.onPageHide,this),this.cInt=setInterval(L(this.collIntervalFn,this),this.cIntT),this.j=!R.boolTrue.test(P.noVisitorJourney)&&this.jS,this.startJourney(),this.interactionModule.addJourneyEvents(),P.err=P.err||[],P.err.push=e=>{e=ht(e)?U.call(e):[e];this.errorModule.sendError(...e)};for(const i of P.err){var t=ht(i)?U.call(i):[i];this.errorModule.sendError(...t)}this.pagePerformanceModule.sendPagePerformance(),this.errorModule.processHTTPError(),this.formsModule.startForm(),this.sendTrackedEvent(P.goalId,P.goalValue,"static",null,this.ref),this.updateLead({companyName:P.companyName})},runIntScripts:function(e){var t=P[e];l(t)&&!this[e+"Done"]&&(this[e+"Done"]=!0,t())},processQueue:function(e){const t=e.shift();if(this[t]&&-1!==ot(t,B)){if(this.dataColl.active||!this.dataColl.inactivityTriggered||!r.includes(t))return this[t].apply(this,e);this.dataColl.active=!0,this.dataColl.inactivityTriggered=!1,this.startColl(void 0,()=>this[t].apply(this,e))}else k("DXA warning: Method does not exist: "+t)},globalReady:function(){if(this.globalReadyFn(o._da_ready),Pe(o._da_readyArray)&&o._da_readyArray.length)for(const e of o._da_readyArray)this.globalReadyFn(e)},globalReadyFn:function(e){if(l(e))try{L(e,this)()}catch(e){y.processError(this.tag,e,v.CONFIG,S.GLOBAL_READY)}},isCollecting:function(){return this.canCollect(a.PAGE)},isInSample:function(){var e=this.dataColl.getStatus("experience");return e===b.FORCED_IN||e===b.FORCED_IN_SERVER},canCollect:function(e){return this.dataColl.active&&this.dataColl.getExperienceStatus()&&(!e||this.hasFeature(e))},setCollection:function(e,t){var i=this.dataColl.active,s=e?b.FORCED_IN:b.FORCED_OUT;if(t=!!C(t)||t,this.setForceColl("analysis",s,t,!0),this.setForceColl("replay",s,t,!0),this.selectSessionForExperience(e,t,"setCollection",!0,!0),this.hasFeature(a.PAGE))for(const r of this.colcq)r(!!e,i)},canChangeState:function(e,t){var i=this.dataColl.experienceLead||this.dataColl.experienceSession,t=this.dataColl[t+"Lead"]||this.dataColl[t+"Session"];return this.hasFeature(a.PAGE)&&(!1===e||2!==i&&2!==t)},selectSessionForExperience:function(e,t,i,s,r){var n=e?b.FORCED_IN:b.FORCED_OUT;i=i||"selectSessionForExperience",s||!this.dataColl.isDataCreditSubscription()&&!this.dataColl.experiencePurposeful()?n===this.dataColl.getStatus("experience")?k("DXA warning: No change provided for data collection status."):this.canChangeState(e,"experience")||this.dataColl.isDataCreditSubscription()&&this.hasFeature(a.PAGE)?(s=this.dataColl.active,this.jCur.jE.push(i),!this.dataColl.isDataCreditSubscription()&&this.dataColl.experienceMethod&&(this.jspsf=1,this.hasFeature(a.COOKIE)||M("d_sessionId",this.sId+".1")),e?this.setCollStart(s,t,i):this.setCollStop(s,t,i,r)):k("DXA warning: Experience data collection status cannot be changed anymore for this session."):k("DXA warning: selectSessionForExperience is not supported by current subscription or sampling method.")},selectPageviewForAnalysis:function(e){var t=e?b.FORCED_IN:b.FORCED_OUT;this.dataColl.isDataCreditSubscription()||this.dataColl.analysisPurposeful()?k("DXA warning: selectPageviewForAnalysis is not supported by current subscription or sampling method."):t===this.dataColl.getStatus("analysis")?k("DXA warning: No change provided for Analysis data collection status."):this.canChangeState(e,"analysis")&&this.dataColl.analysisSession!==b.FORCED_IN&&this.dataColl.analysisPage!==b.FORCED_OUT&&this.dataColl.analysisPage!==t?(this.postApi("selectPageviewForAnalysis"),this.dataColl.analysisPage=t,this.sendSamplingStatus(!0)):k("DXA warning: Analysis data collection status cannot be changed anymore for this page.")},selectSessionForAnalysis:function(e,t){var i="selectSessionForAnalysis",s=e?b.FORCED_IN:b.FORCED_OUT,r=this.dataColl.getExperienceStatus();this.dataColl.isDataCreditSubscription()||this.dataColl.analysisPurposeful()?k("DXA warning: selectSessionForAnalysis is not supported by current subscription or sampling method."):s===this.dataColl.getStatus("analysis")?k("DXA warning: No change provided for Analysis data collection status."):this.canChangeState(e,"analysis")?this.dataColl.active?(this.postApi(i),this.setForceColl("analysis",s,t),this.sendSamplingStatus()):e&&!r&&(this.setForceColl("analysis",s,t,!0),this.selectSessionForExperience(e,t,i,!0)):k("DXA warning: Analysis data collection status cannot be changed anymore for this session.")},selectSessionForReplay:function(e,t){var i="selectSessionForReplay",s=e?b.FORCED_IN:b.FORCED_OUT,r=this.dataColl.getReplayStatus(),n=this.dataColl.getExperienceStatus();this.dataColl.isDataCreditSubscription()||this.dataColl.replayPurposeful()?k("DXA warning: selectSessionForReplay is not supported by current subscription or sampling method."):s===this.dataColl.getStatus("replay")?k("DXA warning: No change provided for Replay data collection status."):this.canChangeState(e,"replay")?this.dataColl.active?(this.postApi(i),this.setForceColl("replay",s,t),this.sendSamplingStatus(),!r&&this.dataColl.getReplayStatus()&&this.trackPageView(null,null,!0)):e&&!n&&(this.setForceColl("replay",s,t,!0),this.selectSessionForExperience(e,t,i,!0)):k("DXA warning: Replay data collection status cannot be changed anymore for this session.")},endColl:function(e,t){this.interactionModule.sendScroll(t),this.endJourney(t),this.formsModule.endForm(),this.networkSpeedCollection.sendCollectedData(),this.pageGroups=[],e&&(this.clearTimer(["cInt","hInt"]),this.stopObserver(),this.initPV=!1),this.postInfo(t?"exit":"flush")},startColl:function(e,t){var i,s;R.boolTrue.test(I(h.body,"di-heatmap"))||(this.time=new Date,this.dC=0,this.httpEr=0,this.eC=0,this.dSize=0,this.htmlSent=!1,this.pageSent=!1,this.htmlColCB=[],this.pageColCB=[],this.realTime=new Ft,this.unloadInProgress=!1,this.dataLayerRulesModule.reset(),this.jBuf=[],s=qe("di_last_session_time"),i=L(function(){this.init?(this.phS=!1,this.pN=1,this.postInfo("page",this.pageData(),{imp:!0,callback:()=>{this.pageCollected(),this.runIntScripts("intScripts"),l(t)&&t()}}),this.postBrowserData(),this.frameIdentifier=new Qt("CrossFramePVID"),this.frameIdentifier.checkFramed(),this.initPV?(this.pagePerformanceModule.sendTrackedPagePerf(),this.startJourney(),this.formsModule.startForm(),this.startObserver(),this.dataLayerRulesModule.recreateOnLoadListeners()):(this.initPV=!0,this.initPageTrack())):this._init(),e&&this.postApi(e)},this),s=s||1e3*P.curTime,w()-s>P.sessionTimeout?+qe("di_activity_json_time")!==s?(M("di_activity_json_time",s),M("di_last_session_time"),this.sendCookieFlags(!0,!1,L(this.startColl,this,e))):y.processError(this.tag,Error(S.C_JSON_CACHE),v.WARN,S.C_JSON_CACHE):i())},postBrowserData:function(){navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues(["platform","platformVersion"]).then(e=>{e.platform&&e.platformVersion&&this.postInfo("browser",{platform:e.platform,platformVersion:e.platformVersion,mobile:e.mobile},{imp:!0})})},setCollStart:function(e,t,i){this.dataColl.active=!0,this.setForceColl("experience",b.FORCED_IN,t),this.init?e||(this.cInt=setInterval(L(this.collIntervalFn,this),this.cIntT),this.interactionModule.hInt=setInterval(L(this.interactionModule.hoverIntervalFn,this.interactionModule),P.hoverThreshold),this.startJourney(),this.formsModule.startForm(),this.startObserver()):(this.time=new Date,this._init()),this.sendSamplingStatus(),this.postApi(i,!0),"setRetention"===i&&this.postInfo("retention"+this.getAccountPresent(),"",{imp:!0,process:!1})},setCollStop:function(e,t,i,s){e&&this.init&&(this.postApi(i,!0),s||this.sendSamplingStatus(!1,{experience:b.FORCED_OUT}),this.setForceColl("experience",b.FORCED_OUT,t),this.endColl(!0),this.dataColl.active=!1)},startSessionFn:function(e,t){var i;this.dataColl.active||(this.dataColl.active=!0,(i=this.dataColl.replayLead||this.dataColl.replaySession)===b.FORCED_IN&&i===b.FORCED_IN_SERVER||(this.dataColl.replaySession=b.FORCED_IN,this.dataColl.replayLead=b.SERVER),(i=this.dataColl.experienceLead||this.dataColl.experienceSession)===b.FORCED_IN&&i===b.FORCED_IN_SERVER||(this.dataColl.experienceSession=b.FORCED_IN,this.dataColl.experienceLead=b.SERVER,C(this.jspsf))||(this.jspsf=1),this.sendCookieFlags(!0,e,L(this.startColl,this,t)))},startSession:function(e){this.startSessionFn(e,"startSession")},endSession:function(){var e="endSession";this.dataColl.active&&(this.jCur.jE.push(e),this.init)&&(this.postApi(e,!0),this.setForceColl("analysis",b.SERVER,!1,!0),this.setForceColl("replay",b.SERVER,!1,!0),this.setForceColl("experience",b.FORCED_OUT,!1),this.endColl(!0),this.dataColl.active=!1)},restartSession:function(e){this.dataColl.active&&(this.postApi("restartSession"),this.endColl(),this.dataColl.active=!1),this.setForceColl("analysis",b.SERVER,!1,!0),this.setForceColl("replay",b.SERVER,!1,!0),this.setForceColl("experience",b.SERVER,!1,!0),this.startSessionFn(e,"restartSession")},setFavourite:function(t=0){this.canCollect(a.PAGE)&&(this.setRetention(),t=Ne(t)?+t:0,t=[24,12,6,3,1].find(e=>e<=t)||0,this.postApi("setFavourite"),this.postInfo("favourite",{retention:t}))},setFavorite:function(e){this.setFavourite(e)},setRetention:function(){this.canCollect(a.PAGE)&&(this.dataColl.isDataCreditSubscription()?(C(this.jspsf)||(this.jspsf=1,this.hasFeature(a.COOKIE)||M("d_sessionId",this.sId+".1"),Xt.execute(this.diLoc,{nocache:!0,extraHeader:this.getExtraHeaders()})),this.postApi("setRetention"),this.postInfo("retention"+this.getAccountPresent(),"",{imp:!0,process:!1})):(this.setForceColl("analysis",b.FORCED_IN,!!this.dataColl.analysisLead,!0),this.setForceColl("replay",b.FORCED_IN,!!this.dataColl.replayLead,!0),this.selectSessionForExperience(!0,!!this.dataColl.experienceLead,"setRetention",!0)),this.htmlSent&&this.htmlCollected(),this.pageSent)&&this.pageCollected()},dataRetention:function(e){this.canCollect()&&!1===e&&(this.postInfo("dataRetention",{state:!1}),this.endColl(!0),this.dataColl.active=!1,this.sendCookieFlags(!0))},getAccountPresent:function(){return"&accountPresent="+N(R.newDiPath.test(this.diLoc))},getExtraHeaders:function(e,t){var i={"X-DI-cookieflags":this.dataColl.getSamplingHeader(),"X-DI-sid":this.sId,"X-DI-lid":this.leadId};return C(this.jspsf)||(i["X-DI-jspsf"]=this.jspsf),e&&(i["X-DI-sid-renew"]=1,P.int_state="0",M("di_adobe_tracked"),M("di_ga_tracked")),t&&(i["X-DI-lid-renew"]=1),i["X-DI-int-state"]=P.int_state||"0",i},setForceColl:function(e,t,i,s){var r;this.hasFeature(a.PAGE)&&(r=this.dataColl.getSamplingHeader(),i?(this.dataColl[e+"Lead"]=t,this.dataColl[e+"Session"]=b.SERVER):(this.dataColl[e+"Lead"]=b.SERVER,this.dataColl[e+"Session"]=t),s||this.dataColl.getSamplingHeader()===r||(this.sendCookieFlags(),this.htmlSent&&this.htmlCollected(),this.pageSent&&this.pageCollected()))},sendCookieFlags:function(e,t,i){var s=Ue();Xt.execute(s,{nocache:!0,extraHeader:this.getExtraHeaders(e,t)},e=>{var t=bt(e);ut(t)&&(this.sId=t.da_sessionId_e,this.leadId=t.da_leadId_e,P.int_state=t.int_state,P.curTime=t.curTime,this.hasFeature(a.COOKIE)||(M("d_sessionId",this.sId),M("d_int_state",P.int_state),Tt("_da_da_leadId",this.leadId)),this.validateSId(),this.setFirstPartyCookie(),i)&&i(e)})},startCacheExtender:function(){!this.cacheExtInt&&P.curTime&&(this.cacheExtInt=setInterval(this.cacheExtender.bind(this),3e5),this.cacheExtender())},cacheExtender:function(){1200<w()/1e3-P.curTime&&this.dataColl.active&&Xt.execute(this.diLoc,{nocache:!0,extraHeader:this.getExtraHeaders()},function(e){e&&(e=e.match(/"curTime":([0-9]+)/))&&(P.curTime=+e[1])})},setIntStatus:function(e,t){var i=P.int_state||"";-1!==i.indexOf(e+":")?P.int_state=i.replace(new RegExp("("+e+":)[^|]+"),"$1"+t):P.int_state=i+(i.length?"|":"")+e+":"+t,this.sendCookieFlags()},hasFeature:function(e){return(e&this.features)===e},stopObserver:function(){this.smo&&this.obs&&this.obs.disconnect(),this.obs=null,this.obsFnScoped&&this.attachShadowHook.removeListener(this.obsFnScoped)},startObserver:function(){if(this.smo&&null===this.obs&&this.canCollect(a.PAGE)&&(this.obs=new i(L(this.obsFn,this)),this.obs.observe(h.documentElement,{childList:!0,subtree:!0,attributes:!0}),P.deepShadowRootSearch)){this.obsFnScoped=this.obsFnScoped||L(this.obsFn,this),this.attachShadowHook.addListener(this.obsFnScoped);for(const e of g.search(":shadow"))this.obs.observe(e.shadowRoot,{childList:!0,subtree:!0})}},getObserverState:function(){return!!this.obs},obsFn:function(e){this.indexScrollableThrottled();for(const t of e)for(const i of t.addedNodes)this.obsFnIndex(i)},obsFnIndex:function(e){var t,i=e.nodeType;if((i===m.ELEMENT||i===m.SHADOW_ROOT)&&(t=(t=e).getRootNode())&&(t.nodeName===p.document||t.nodeName===p.documentFragment)&&(this.indexElements(!1,e),g.search("form,input,textarea,select,[data-di-form-track]",e).length&&this.formsModule.formIndex(),P.deepShadowRootSearch))if(i===m.SHADOW_ROOT)this.obs.observe(e,{childList:!0,subtree:!0});else for(const s of g.search(":shadow",e))this.obs.observe(s.shadowRoot,{childList:!0,subtree:!0})},_indexItems:function(){this.indexElements(),this.indexScrollable(),this.formsModule.formIndex()},collIntervalFn:function(){this.canCollect()&&(this.interactionModule.detectScroll(),this.checkUrlChange(),100<=this.interactionModule.srC&&this.interactionModule.sendScroll(),this.formsModule.unfocusForm(),this.checkInactivity())},checkInactivity:function(){var e=w();let t=e-this.interactionModule.lInt>P.sessionTimeout;e-this.getPageTime()>P.maxPageTime&&(t=!0,this.postInfo("extra",{maxTimeReached:1})),this.dSize>P.maxDataCredit&&(t=!0,this.postInfo("extra",{maxCreditReached:1})),t&&(this.endColl(!0),this.dataColl.active=!1,this.dataColl.inactivityTriggered=!0,setTimeout(L(this.net.socketClose,this),5e3))},addDSize:function(e){this.dSize=this.dSize+e},checkUrlChange:function(){let e=!1;var t;this.aPT&&(t=st(),this.checkUrlPart(t,"url")||this.checkQueryChange(t)||this.checkHashChange(t))&&(e=!0,this.trackPageView(null,null,!0)),!e&&this.trackTitle&&(t=this.getPageTitle(),this.pTitle!==t)&&(this.pTitle=t,this.postInfo("extra",{pt:this.pTitle}))},checkQueryChange:function(e){return P.autoQueryTrack&&this.checkUrlPart(e,"query")},checkHashChange:function(e){return P.autoFragmentTrack&&P.fragmentPattern.test("#"+e.hash)&&this.checkUrlPart(e,"hash")},checkUrlPart:function(e,t){return e[t]!==this.pageUrl[t]&&(null===this.tUrl||e[t]!==this.tUrl[t])},bindGoalEvents:function(e){var t=[];for(const i in e)t.push({event:{name:"click",target:e[i]},action:{name:"sendTrackedEvent",args:{name:i.substring(5)}},LegacyDataLayer:void 0});this.dataLayerRulesModule.createListeners(t)},getTabId:function(){return this.tId},getPageTitle:function(){return l(P.pageTitleCallback)?L(P.pageTitleCallback,this)():P.pageTitle||h.title},getPageUrl:function(){C(this.pageUrl)&&(this.pageUrl=st());let e=this.pageUrl.url;return C(this.pageUrl.query)||(e+="?"+this.pageUrl.query),C(this.pageUrl.hash)||(e+="#"+this.pageUrl.hash),e},getPagePart:function(e,t){return t&&t.test(this.pageUrl[e])?"":this.pageUrl[e]},indexForms:function(){this.formsModule.formIndex()},formSubmitted:function(e,t){this.formsModule.formSubmitted(e,t)},isJ:function(){return this.j&&this.canCollect()&&!C(this.jInt)},setFrameRate:function(e,t){C(e)||e<0||10<e||!this.j||(this.clearTimer(["jInt","jrInt","jfInt"]),P.frameRate=e,t||(this.jIRate=e,this.postApi("setFrameRate"),delete this.pausedJRate),0<P.frameRate&&(this.resourceModule.loadResList(),this.scanResource(),this.setJIntervals()),this.handleDidomFrame())},handleDidomFrame:function(){var e;0<P.frameRate?this.dd.isObserving()||(this.dd.observe(h.documentElement),e=this.dd.getTree(!0,!0),this.dd.addDINodeDiffPatch(this.prevDidom||{},e,this.jCur.jP)):this.dd&&(this.prevDidom=this.dd.getTree(!0,!0),this.dd.disconnect())},setJIntervals:function(){this.jInt=setInterval(L(this.buildJourney,this),1e3/P.frameRate),this.jrInt=setInterval(L(this.scanResource,this),1e3/P.resourceRate),this.jfInt=setInterval(L(this.formsModule.checkFormValue,this.formsModule),200)},pauseRecording:function(e){!C(this.jInt)&&this.j&&(this.postApi("pauseRecording"),this.pausedJRate=this.jIRate,this.setFrameRate(0,!0),!C(e))&&0<e&&setTimeout(L(this.resumeRecording,this,!0),e)},resumeRecording:function(e){C(this.jInt)&&this.j&&(e||this.postApi("resumeRecording"),delete this.pausedJRate,this.setFrameRate(this.jIRate,!0))},prepareJourneyPatch:function(e){var t,i,s,r,n=g.search(":hover"),n=n.length?He(n.pop()):"";for(const o of[["oX",this.interactionModule.fixPos.left],["oY",this.interactionModule.fixPos.top],["mX",this.interactionModule.mX],["mY",this.interactionModule.mY],["dO",this.interactionModule.dO||0],["sT",f.max(0,f.round(this.interactionModule.svT))],["sL",f.max(0,f.round(this.interactionModule.svL))],["vW",this.interactionModule.vpW],["vH",this.interactionModule.vpH],["z",this.interactionModule.z],["vOT",this.interactionModule.vOT],["vOL",this.interactionModule.vOL],["aE",He(h.activeElement)],["hE",n],["iE",function(){var e=[];for(const t of g.search("input:invalid, select:invalid, textarea:invalid"))e.push(He(t));return e.join("|")}()],["sE",this.getScrolledElement()],["f",N(this.interactionModule.hasFocus)],["meta",(n={pH:(n=we()).height,pW:n.width,fR:P.frameRate},P.depthElementSelector&&(t=g.search(P.depthElementSelector)).length&&(t=Je(t[0]),n.pH=t.top),Qe(n))]])i=this.jLast,s=o[0],r=o[1],!x(i[s])&&i[s]===r||(this.jCur[o[0]]=o[1],e.changed=1);for(const l of["pageMeta","cX","s","tE","jE","fE","kE","jsEO","jsE","jP"]){var a=this.jCur[l];x(a)||c(a)&&!ut(a)||(e.changed=1)}},cleanJourneyPatch:function(e){ut(e.jsEO)||delete e.jsEO,ut(e.fE)||delete e.fE,e.jE.length||delete e.jE,e.jP.length?!e||!P.noHTML&&this.canSendHTML()||(e.jP=[]):delete e.jP},sendJourneyPatches:function(e,t){(this.jBuf.length>(this.net.socketActive()?0:1)||e-this.jLT>this.pto||t)&&(this.jBuf.length&&((t=this.getParamForReplay()).content=this.jBuf,this.postInfo("patch",t)),this.jBuf=[],this.jLT=e)},buildJourney:function(){var e,t;this.canCollect()&&(e={changed:0,important:0},t=w(),this.prepareJourneyPatch(e),e.changed)&&this.addToJBuf(t,e.important)},addToJBuf:function(e,t){var i=e-this.getPageTime(),s=this.jLast.t||0;-1<i&&i-s<=P.sessionTimeout&&(this.jCur.pN=this.pN++,this.jCur.t=i,s=this.jCur,this.jCur={jE:[],jsEO:{},fE:{},jP:[]},this.cleanJourneyPatch(s),this.jBuf.push(s),Ae(this.jLast,s),this.sendJourneyPatches(e,t))},getParamForReplay:function(){var e={};for(const t of["lb","tcanvas","lstyle"])this[t]&&(e[t]=1,this[t]=!1);return e},startJourney:function(){this.j&&((C(P.frameRate)||P.frameRate<0||10<P.frameRate)&&(P.frameRate=5),this.jIRate=x(this.pausedJRate)?P.frameRate:this.pausedJRate,this.setProxyUrl(),this.jLT=this.getPageTime(),this.resourceModule.loadResList(),this.scanResource(),this.indexScrollable(),P.noHTML||(this.phS?(this.jCur.pageMeta=this.pageMetaModule.getData(),this.handleDidomFrame()):(this.dd||(this.dd=new Ui),this.remoteStorage&&(this.serializer=new Nt(this.hashes)),this.dd.observe(h.documentElement),this.sendDIDOM()),this.resourceModule.sendProxyUrl()),0<P.frameRate)&&this.setJIntervals()},sendDIDOM:function(){let i="";var e=this.dd.getTree(!0);const t={proxyUrl:this.pUrl,pageMeta:this.pageMetaModule.getData(),docType:"",didom:{}};let s;this.remoteStorage?(s=Vt).init(this.hashes):s=Ut,Fe(this.getParamForReplay(),function(e,t){i+="&"+t+"="+e});const r={imp:!0,extraParam:i};this.canSendHTML()?(t.docType=function(){let e="";var t=document.doctype;return e=t?"<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">":e}(),r.callback=L(this.htmlCollected,this),s.serialize(e,!1,e=>{t.didom=e,this.postInfo("html",t,r),this.phS=!0})):(this.postInfo("html",t,r),this.phS=!0)},canSendHTML:function(){return!P.disableHTMLContent&&this.dataColl.getReplayStatus()},onHTMLCollected:function(e,t){let i=!1;for(const s of this.htmlColCB)i=i||s.toString()===e.toString();!t&&i||this.htmlColCB.push(e),this.htmlSent&&this.htmlCollected()},htmlCollected:function(){let e=0!==this.jspsf;if(e=this.dataColl.isDataCreditSubscription()?e:(this.dataColl.experienceRandom()||this.getSamplingForProcessor("experience")===b.FORCED_IN)&&(this.dataColl.replayRandom()||this.getSamplingForProcessor("replay")===b.FORCED_IN))for(;this.htmlColCB.length;)this.htmlColCB.shift()();this.htmlSent=!0},onPageCollected:function(e,t){let i=!1;for(const s of this.pageColCB)i=i||s.toString()===e.toString();!t&&i||this.pageColCB.push(e),this.pageSent&&this.pageCollected()},pageCollected:function(){let e=0!==this.jspsf;if(e=this.dataColl.isDataCreditSubscription()?e:this.dataColl.experienceRandom()||this.getSamplingForProcessor("experience")===b.FORCED_IN)for(;this.pageColCB.length;)this.pageColCB.shift()();this.pageSent=!0},setProxyUrl:function(){var e=as();let t=n.host.toLowerCase();var i=P.httpsJourney?"https":"http";let s=i+"://";C(P.altProxyHostname)||(s+=P.altProxyHostname+"/alt-proxy/"+i+"/"),P.proxyV2?this.pUrl=s+d.proxy+"/v2-"+P.proxyV2+"/"+this.wId+"/"+e+"/":this.pUrl=s+d.proxy+"/da-"+this.aId+"/"+this.wId+"/"+e+"/",this.hasFeature(a.RESOURCE_PROXY)&&("_di_onprem_"===d.proxyStyle?this.rUrl=s+d.proxy+"/res/da-"+this.aId+"/"+this.wId+"/"+e+"/":this.rUrl=s+"da-"+this.aId+"-"+d.proxy+"/res/"+this.wId+"/"+e+"/"),this.hasFeature(a.FULL_PROXY_REFERER)&&(t=(i=n.protocol+"//"+n.host+n.pathname,e=!0,(o.btoa?(e?"":"DIB64;")+o.btoa(unescape(encodeURIComponent(i))):i).replace(/\//g,"_").replace(/\+/g,"-").replace(/[=]+$/,""))),this.pUrl=this.pUrl+t+"/"},setEnterpriseProxy:function(){},indexScrollable:function(){this.j&&(this.sList=g.search(":scrollable"))},getScrolledElement:function(){const i=[];return It(this.sList,e=>{var t=e.isConnected;return!t||e.scrollTop===e.di_scrollTop&&e.scrollLeft===e.di_scrollLeft||((0<e.scrollTop||void 0!==e.di_scrollTop||0<e.scrollLeft||void 0!==e.di_scrollLeft)&&i.push(He(e)+":"+e.scrollTop+":"+e.scrollLeft),e.di_scrollTop=e.scrollTop,e.di_scrollLeft=e.scrollLeft),!t}),i.join("|")},scanResource:function(){this.resourceModule.scanCanvas(),this.resourceModule.scanHTMLRes(),this.checkDocSize()},_checkDocSize:function(){var e=we(),t=e.width,e=e.height;0===this.docW||0===this.docH?(this.docW=t,this.docH=e):(50<f.abs(t-this.docW)||50<f.abs(e-this.docH))&&(this.docW=t,this.docH=e,this.jCur.pageMeta=this.pageMetaModule.getData())},endJourney:function(e){var t,i;if(this.j){this.clearTimer(["jInt","jrInt","jfInt"]),this.dd&&(this.prevDidom&&delete this.prevDidom,this.dd.disconnect()),this.jLast.t<this.interactionModule.lInt-this.getPageTime()&&this.addToJBuf(this.interactionModule.lInt,!0),this.jBuf.length&&((t=this.getParamForReplay()).content=this.jBuf,this.postInfo("patch",t,{onExit:e})),this.resourceModule.sendProxyUrl(e),this.jCur={jE:[],jsEO:{},fE:{},jP:[]},this.jBuf=[],this.sList=[],this.jLast={},this.resourceModule.canvasList={},this.resourceModule.elList={},this.apiCT={},this.lb=!1,this.tcanvas=!1,this.lstyle=!1,this.jLT=null,this.interactionModule.jSel="";for(const s of g.search("[data-di-res-id]"))delete(i=s).di_html_res,i.removeAttribute("data-di-res-id")}},sendGoal:function(e,t,i){k("DXA warning: the 'sendGoal' API method is replaced by 'sendTrackedEvent'."),this.sendTrackedEvent(e,t,i)},sendTrackedEvent:function(e,t,i,s,r,n){var a={};this.canCollect()&&!C(e)&&(a.conid=e,Ne(t)?(a.conv=t,i&&((e=P.currencyConversionRates)[i]?a.conv=t/e[i]:P.currency!==i&&k("DXA warning: "+i+" is not defined as a secondary currency for this property."))):_(t)&&_(s)&&this.getTrackedEventValue(a,t,s,r),a.conp=C(n)?"":n,this.postInfo("goal",a))},getTrackedEventValue:function(t,i,s,r){if(!C(i)){let e;"attr"===s&&r?e=I(r,i):"selector"===s&&(r=g.search(i)).length&&(e=g.getText(r[0]).trim()),C(e)||0<(s=+e.replace(/[^0-9.]/g,""))&&(t.conv=s)}},sendIntegrationData:function(e,t){!this.canCollect()||C(e)||C(t)||this.postInfo("int",{int:e,content:t})},sendApplicationError:function(e,t){this.errorModule.sendApplicationError(e,t)},sendCustomDimension:function(e,t,i){const s={};this.canCollect()&&(Fe(e=_(e)?this.createCDObj(e,t,i):e,function(e,t){C(Me(t))||C(e)||(c(e)&&(e=Qe(e)),s[Me(t)]=e)}),ut(s))&&this.postInfo("customdimension",s)},setPageRole:function(e){this.canCollect()&&Ne(e)&&this.postInfo("pageRole",{roleId:e})},setPageGroup:function(e,t){this.canCollect()&&!C(e)&&this.postInfo("pageGroup",{name:(""+e).substr(0,64),dlId:t||0})},sendPageGroup:function(e,t,i){if(0===t||i)this.setPageGroup(e.substring(0,64),t);else if(P.datalayer&&0<P.datalayer.length)for(const s of P.datalayer)s.id===t&&2===s.e&&this.setPageGroup(e.substring(0,64),t)},createCDObj:function(e,t,i){var s={};return C(e=Me(e))||C(t=i?this.qs[t]:t)||(s[e]=t),s},sendHTTPError:function(e,t){return this.errorModule.sendHTTPError(e,t)},getSessionLeadIdFn:function(e,t){return this.hasFeature(a.PAGE)?(!1===t?"":"di-"+this.wId+"-")+this[e]:""},getSessionLeadId:function(e,t){!1===t||!0===t?t={prefix:t}:ut(t)||(t={prefix:!0});var i=()=>{t.callback(this.getSessionLeadIdFn(e,t.prefix))};if(!t.callback)return this.getSessionLeadIdFn(e,t.prefix);t.onHTMLCollected?this.onHTMLCollected(i,!0):t.onPageCollected?this.onPageCollected(i,!0):i()},getLeadId:function(e){return this.getSessionLeadId("leadId",e)},getSessionId:function(e){return this.getSessionLeadId("sId",e)},getPageTime:function(){return this.time.getTime()},updateLead:function(e){var t={};this.canCollect()&&!C(e)&&(C(e.userId)||(t.uid=e.userId,P.userId=e.userId),C(e.companyName)||(t.comn=e.companyName),ut(t))&&this.postInfo("leadinfo",t)},updateUserId:function(e){this.canCollect()&&!C(e)&&(P.userId=e,this.postInfo("leadinfo",{uid:e}))},updateLeadScore:function(e){this.canCollect()&&!C(e)&&Ne(e)&&this.postInfo("leadscore",{lid:this.leadId,score:+e})},canTrackPage:function(){var e=w();let t=!1;return this.canCollect(a.PAGE)&&e-this.lastPT>P.pageBuffer&&(this.lastPT=e,t=!0),t},trackPageView:function(e,t,i){this.canTrackPage()&&(this.initPV&&this.endColl(),this.tUrl=st(),this.setTrackPageVars(e,Ae({},t)),this.runIntScripts("intPreScripts"),l(P.trackPageWrapper)?P.trackPageWrapper(L(this.startColl,this,i?void 0:"trackPageView")):this.startColl(i?void 0:"trackPageView"))},setTrackPageVars:function(e,t){let i="",s="";C(e)?this.pageUrl.url=this.tUrl.url:(d.qa.href=n.protocol+"//"+n.host+"/"+e.replace(/^\//,""),this.pageUrl.url=d.qa.protocol+"//"+d.qa.host+d.qa.pathname,i=d.qa.search,s=d.qa.hash),d.qa.href="http://test.com",i=_(t.queryString)?(d.qa.search=t.queryString,d.qa.search):i||this.tUrl.query,s=_(t.fragment)?(d.qa.hash=t.fragment,d.qa.hash):s||this.tUrl.hash,this.pageUrl.query=i.replace(/^\?/,""),this.pageUrl.hash=s.replace(/^#/,""),!x(t.pageGroups)&&Pe(t.pageGroups)?this.setPageGroupsVar(t):this.pageGroups=[],t.title?(this.pTitle=t.title,this.trackTitle=!1):(this.pTitle=this.getPageTitle(),this.trackTitle=!0),P.pageRole=t.role||P.pageRole,P.pageTaxonomy=t.taxonomy||P.pageTaxonomy,Ne(t.waitTime)&&(this.pagePerformanceModule.tpWaitTime=t.waitTime)},setPageGroupsVar:function(e){this.pageGroups=[];for(const t of e.pageGroups)for(const i of P.datalayer)i.id===t[Object.keys(t)[0]]&&2===i.e&&this.pageGroups.push(t)},get_da_Session:function(){var e="d_sessionId";let t=Xe(e);return C(t)&&(t=P.sessionId_e,this.hasFeature(a.COOKIE)||M(e,t)),t},get_da_Lead:function(){var e="_da_da_leadId";let t=Xe(e);return C(t)&&(t=P.leadId_e,this.hasFeature(a.COOKIE)||Tt(e,t)),t},indexElements:function(e,t){if(this.canCollect()||e){!1!==e&&(this.attrHL={}),this.indexElementsCounter++;for(const i of g.search(P.interactionSelector,t))this.indexElementsFn(i)}},indexElementsFn:function(e){var t;e.hasAttribute("data-di-id")||e.hasAttribute("data-di-id-done")||function(e){let t=!1;for(;!t&&Z(e)&&!lt(e);)t=!C(I(e,"data-di-id")),e=e.parentNode||e.host;return t}(e)||C(t=this.getDIID(e))||e.setAttribute("data-di-id",t)},getDIID:function(e){let t;var i,s;return C(t=l(P.attributionCallback)?L(P.attributionCallback,this)(e):t)&&(i=P.attributionCriteria,s=e,-1!==i.indexOf(u.text)&&!C(g.getText(s).trim())||-1!==i.indexOf(u.value)&&!C(I(s,u.value))||-1!==i.indexOf(u.name)&&s.hasAttribute(u.name)||-1!==i.indexOf(u.href)&&s.hasAttribute(u.href)&&$(s)||z(s.id))&&(t=this.getAttributeSelector(e)),t=C(t)||-1===t.indexOf(" ")?t:"di-id-"+tt(P.allowDuplicateAttribute?t:this.resolveDuplicateAttribution(t))},resolveDuplicateAttribution:function(e){return this.attrHL[e]?(this.attrHL[e]++,e+=this.attrHL[e]):this.attrHL[e]=1,e},onBeforeUnload:function(){this.unloadInProgress=!0,this.net.socketClose()},onPageHide:function(){M("di_tab_active",0),this.net.socketClose(),this.canCollect()&&this.endColl(!0,!0)},onPageShow:function(e){this.unloadInProgress=!1,e.persisted&&this.trackPageView(null,null,!0)},getAttributeSelector:function(e){let t;var i;return Z(e)?(i=ee(e),t=z(e.id)?"#"+e.id:Ke(e.parentNode,this.indexElementsCounter)+" > "+i+function(t){let i;var s=P.attributionCriteria.split(",");let r="";for(let e=2;e<s.length&&(s[e]===u.href&&t.hasAttribute(u.href)&&$(t)?r='[href="'+J(t)+'"]':s[e]===u.name&&t.hasAttribute(u.name)?r='[name="'+I(t,u.name)+'"]':s[e]!==u.value||C(I(t,u.value))?s[e]!==u.text||C(i=g.getText(t).trim())||(r="|"+i):r='[value="'+I(t,u.value)+'"]',""===r);e++);return r}(e)):""},getNavType:function(){let e=c(o.performance)&&c(o.performance.navigation)?"&navtype="+o.performance.navigation.type:"&navtype=0";return this.navSent?e="&navtype=3":this.navSent=!0,e},setPageCounter:function(){var e;d.hasStor&&(this.pC=1,C(e=qe("di_page_counter"))||(this.pC+=+e),M("di_page_counter",this.pC))},sendSamplingStatus:function(e,t){e=this.getSamplingStatus(!1,e,t);e&&this.postInfo("samplingStatus",e,{imp:!0})},getSamplingForProcessor:function(e){let t=this.dataColl[e+"Lead"]||this.dataColl[e+"Session"];return t=(t=t===b.FORCED_IN_SERVER?b.FORCED_IN:t)===b.FORCED_OUT_SERVER?b.FORCED_OUT:t},getSamplingStatus:function(e,t,i){var i=(i||{}).experience||this.getSamplingForProcessor("experience"),s=this.getSamplingForProcessor("analysis"),r=this.getSamplingForProcessor("replay"),n=i+"|"+s+"|"+r;let a="";return e?(this.curSamplingStatus=n,a="&experienceDataStatus="+i+"&analysisDataStatusSession="+s+"&replayDataStatus="+r):n!==this.curSamplingStatus?(this.curSamplingStatus=n,a={experienceDataStatus:i,analysisDataStatusSession:s,replayDataStatus:r}):t&&0<this.dataColl.analysisPage&&(a={experienceDataStatus:i,analysisDataStatusSession:s,replayDataStatus:r,analysisDataStatusPage:this.dataColl.analysisPage}),a},pageData:function(){this.setPageCounter();var e=this.getSamplingStatus(!0),e="lid="+this.leadId+"&uid="+P.userId+"&pc="+this.pC+"&tc="+this.tId+"&thash="+this.tHash+"&uhash="+tt(location.href)+"&lan="+this.lan+"&srw="+this.sResW+"&srh="+this.sResH+"&vpw="+this.interactionModule.vpW+"&vph="+this.interactionModule.vpH+this.getNavType()+(qe("_da_from_native")?"&fromNative=1":"")+(this.jS?"":"&ub=1")+(P.noHTML?"&nh=1":"")+"&ptax="+De(P.pageTaxonomy)+"&pr="+De(P.pageRole)+"&pt="+De(this.pTitle)+"&ref="+De(this.refUsed||this.ref.split("/")[2]===n.host?"":this.ref)+"&pu="+De(xt(this.pageUrl.url))+(this.pageGroups&&this.pageGroups.length?"&pgroups="+JSON.stringify(this.pageGroups):"")+"&qu="+De(xt(this.getPagePart("query",P.ignoreQueryRegex)))+"&fr="+De(xt(this.getPagePart("hash",P.ignoreFragmentRegex)))+e+"&tz="+this.tZ+"&v="+d.ver+"&cv="+P.configVersion+"&cjs="+P.jsVersion+"&htmlVersion="+(this.remoteStorage?"HJSON":"DJSON")+"&bot="+N(this.botDetected);return this.refUsed=1,e},postInfo:function(e,t,i){this.net.postInfo(e,t,i)},postApi:function(e,t){var i=w();(x(this.apiCT[e])||3e3<i-this.apiCT[e])&&(t||this.jCur.jE.push(e),this.postInfo("apicall",{api:e}),this.apiCT[e]=i)},clearTimer:function(e){for(const t of e)clearInterval(this[t]),this[t]=null},canCollectResource:function(){return this.hasFeature(a.RESOURCE_PROXY)&&!this.remoteStorage},getAccountId:function(){return this.aId},getPropertyId:function(){return this.wId},getPageViewId:function(){return this.pvId},getInteractionModuleField:function(e){return void 0!==this.interactionModule[e]?this.interactionModule[e]:null},setInteractionModuleField:function(e,t){void 0!==this.interactionModule[e]&&(this.interactionModule[e]=t)},addDataLayerRuleListenersForTargetsIn:function(e){this.dataLayerRulesModule.addListenersForTargetsIn(e)},setHtmlResSelector:function(e,t){this.resourceModule.setHtmlResSelector(e,t)},trackCanvas:function(e){this.resourceModule.trackCanvas(e)},activateDXAWidget:function(){bi.activateDXAWidget()},activateHeatmap:function(e){return bi.activateHeatmap(e)},Sizzle:Mt,DISearch:g,addEvent:T,ajax:Xt.execute,closest:Oe,extend:Ae,forIn:Fe,getAttribute:I,getCookie:je,getDIDOMId:He,getLS:Ge,getNodeName:ee,getQualifiedSelector:Ke,getSS:qe,getSiblings:Rt,triggerEvent:yt,getEventKeys:Ve,getStyle:Q,getXPath:He,handleException:y.processError,handleProcessedException:y.processErrorString,hash:tt,hasKey:D,height:at,inArray:ot,isArray:Pe,isDIDOM:function(){return!0},isDomainValid:ct,isEmpty:C,isEmptyObject:dt,isFunction:l,isNode:Z,isNumber:Ne,isObject:c,isObjectNoProp:dt,isObjectWithProp:ut,isString:_,isUndefined:x,offset:Je,parents:Oe,proxy:L,ready:rt,scrollLeft:Et,scrollTop:Ct,setLS:Tt,setSS:M,siblings:Rt,stringify:Qe,tabReady:rt,trim:Me,trimnlb:kt,version:function(){let e=d.ver;return d.branch&&"MASTER"!==d.branch&&(e+="-"+d.branch),e},visible:function(e){return e.nodeName===p.document||K(e)&&"hidden"!==Q(e,"visibility")&&"0px"!==Q(e,"height").trim()&&"0px"!==Q(e,"width").trim()&&0!=+Q(e,"opacity")},warn:k,width:function(e){return nt(e).width}};(ds.prototype=us).indexItems=_t(ds.prototype._indexItems,500),ds.prototype.checkDocSize=_t(ds.prototype._checkDocSize,5e3),ds.prototype.indexScrollableThrottled=_t(ds.prototype.indexScrollable,1e3);const ps=ds;var fs,ms=function(e,a,o,l){return new(o=o||Promise)(function(i,t){function s(e){try{n(l.next(e))}catch(e){t(e)}}function r(e){try{n(l.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?i(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(s,r)}n((l=l.apply(e,a||[])).next())})};Array.prototype.forEach||(Array.prototype.forEach=function(e,t){let i;if(null==this)throw new TypeError(" this is null or not defined");var s,r=Object(this),n=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");1<arguments.length&&(i=t);let a=0;for(;a<n;)a in r&&D(r,a)&&(s=r[a],e.call(i,s,a,r)),a++}),d.evtKeyCodes=(fs={f0:{str:"",keys:[8,9,13,33,34,35,36,37,38,39,40,116]},f2:{str:"c",keys:[65,67,68,70,76,80,82,83,86,88,90,116]},f4:{str:"s",keys:[8]},f6:{str:"cs",keys:[82]},f8:{str:"a",keys:[]}},(d.isMac?fs.f2:fs.f8).keys.push(37,39),fs),Ae(P,W),function e(){-1!==h.readyState.indexOf("in")?setTimeout(e,9):function(){ms(this,void 0,void 0,function*(){let i;o.DecibelInsight=o.DecibelInsight||"decibelInsight",o[o.DecibelInsight+"_script"]=h.currentScript,o[o.DecibelInsight+"_initiated"]?o[o.DecibelInsight].activateHeatmap||(o[o.DecibelInsight].activateHeatmap=bi.activateHeatmap,o[o.DecibelInsight].activateDXAWidget=bi.activateDXAWidget):(o[o.DecibelInsight+"_initiated"]=!0,yield Ht.init(),C(P.sessionId_e)?!C(P.config)&&c(P.config)?(P.cleanup(P.config),delete P.config,(i=new ps).start()):C(P.websiteId)||C(P.accountNumber)||new Qt("CrossFrameSession").checkParent(e=>{e=e||wt.getHeaderForConfig();let t=Ue();qe("_da_from_native")&&(t+=`?da_sid=${e["X-DI-sid"]}&da_lid=`+e["X-DI-lid"]),Xt.execute(t,{extraHeader:e},e=>{ut(e=bt(e))&&(P.cleanup(e),(i=new ps).start(),P.jsVersion!==P.configVersion)&&k("DXA warning: Configuration version mismatch")})}):(i=new ps).start())})}()}()})();